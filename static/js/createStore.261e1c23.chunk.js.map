{"version":3,"file":"static/js/createStore.261e1c23.chunk.js","mappings":"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","sources":["utils/customStoreUtils.ts","services/CustomStore/dataRetrieverNojquery.ts"],"sourcesContent":["/*******************************************************************************\n * (C) Copyright\n * Logivations GmbH, Munich 2010-2022\n ******************************************************************************/\n\nfunction processLoadResponse(d, res, getResolveArgs) {\n\tres = expandLoadResponse(res);\n\n\tif (!res || typeof res !== 'object') {\n\t\td.reject(new Error('Unexpected response received'));\n\t} else {\n\t\td.resolve.apply(d, getResolveArgs(res));\n\t}\n}\n\nfunction expandLoadResponse(value) {\n\tif (Array.isArray(value) || typeof value === 'object') {\n\t\treturn { data: value };\n\t}\n\n\tif (typeof value === 'number') {\n\t\treturn { totalCount: value };\n\t}\n\n\treturn value;\n}\n\nfunction createLoadExtra(res) {\n\treturn {\n\t\ttotalCount: 'totalCount' in res ? res.totalCount : -1,\n\t\tgroupCount: 'groupCount' in res ? res.groupCount : -1,\n\t\tsummary: res.summary || null,\n\t};\n}\n\nfunction serializeKey(key) {\n\tif (typeof key === 'object') {\n\t\treturn JSON.stringify(key);\n\t}\n\n\treturn key;\n}\n\nfunction serializeDate(date) {\n\tfunction zpad(text, len) {\n\t\ttext = String(text);\n\t\twhile (text.length < len) {\n\t\t\ttext = `0${text}`;\n\t\t}\n\t\treturn text;\n\t}\n\n\tconst builder = [1 + date.getMonth(), '/', date.getDate(), '/', date.getFullYear()];\n\tconst h = date.getHours();\n\tconst m = date.getMinutes();\n\tconst s = date.getSeconds();\n\tconst f = date.getMilliseconds();\n\n\tif (h + m + s + f > 0) {\n\t\tbuilder.push(' ', zpad(h, 2), ':', zpad(m, 2), ':', zpad(s, 2), '.', zpad(f, 3));\n\t}\n\n\treturn builder.join('');\n}\n\nfunction stringifyDatesInFilter(crit) {\n\tcrit.forEach((v, k) => {\n\t\tif (Array.isArray(v)) {\n\t\t\tstringifyDatesInFilter(v);\n\t\t} else if (Object.prototype.toString.call(v) === '[object Date]') {\n\t\t\tcrit[k] = serializeDate(v);\n\t\t}\n\t});\n}\n\nfunction isAdvancedGrouping(expr) {\n\tif (!Array.isArray(expr)) {\n\t\treturn false;\n\t}\n\n\tfor (let i = 0; i < expr.length; i++) {\n\t\tif ('groupInterval' in expr[i] || 'isExpanded' in expr[i]) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction getErrorMessageFromXhr(xhr) {\n\tconst mime = xhr.getResponseHeader('Content-Type');\n\tconst responseText = xhr.responseText;\n\n\tif (!mime) {\n\t\treturn null;\n\t}\n\n\tif (mime.indexOf('text/plain') === 0) {\n\t\treturn responseText;\n\t}\n\n\tif (mime.indexOf('application/json') === 0) {\n\t\tconst jsonObj = safeParseJSON(responseText);\n\n\t\tif (typeof jsonObj === 'string') {\n\t\t\treturn jsonObj;\n\t\t}\n\n\t\tif (typeof jsonObj === 'object') {\n\t\t\tfor (const key in jsonObj) {\n\t\t\t\tif (typeof jsonObj[key] === 'string') {\n\t\t\t\t\treturn jsonObj[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn responseText;\n\t}\n\n\treturn null;\n}\n\nfunction safeParseJSON(json) {\n\ttry {\n\t\treturn JSON.parse(json);\n\t} catch (x) {\n\t\treturn null;\n\t}\n}\n\nexport {\n\tsafeParseJSON,\n\tgetErrorMessageFromXhr,\n\tisAdvancedGrouping,\n\tstringifyDatesInFilter,\n\tserializeDate,\n\tcreateLoadExtra,\n\texpandLoadResponse,\n\tprocessLoadResponse,\n\tserializeKey,\n};\n","/*******************************************************************************\n * (C) Copyright\n * Logivations GmbH, Munich 2010-2022\n ******************************************************************************/\n\nimport { Deferred } from 'devextreme/core/utils/deferred';\nimport { extend } from 'devextreme/core/utils/extend';\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport { normalizeSortingInfo } from 'devextreme/data/utils';\nimport { FilterGroup, SortingData } from '../../models/Classes';\nimport TableDataModel from '../TableDataModel/TableDataModel';\nimport {\n\tcreateLoadExtra,\n\tgetErrorMessageFromXhr,\n\tisAdvancedGrouping,\n\tprocessLoadResponse,\n\tserializeKey,\n\tstringifyDatesInFilter,\n} from '../../utils/customStoreUtils';\nimport TFunction from '../../models/Types/Types';\nimport authJwtApi from '../../api/AuthJwtApi';\n\nconst CUSTOM_STORE_OPTIONS = [\n\t'onLoading',\n\t'onLoaded',\n\t'onInserting',\n\t'onInserted',\n\t'onUpdating',\n\t'onUpdated',\n\t'onRemoving',\n\t'onRemoved',\n\t'onModifying',\n\t'onModified',\n\t'onPush',\n\t'loadMode',\n\t'cacheRawData',\n\t'errorHandler',\n];\n\nclass StoreConfig {\n\tpublic keyExpr: string[] = null;\n\tpublic loadUrl = '';\n\tpublic totalCountUrl = '';\n\tpublic loadMethod = '';\n\tpublic updateMethod = '';\n\tpublic insertMethod = '';\n\tpublic deleteMethod = '';\n\tpublic totalCountMethod = '';\n\tpublic loadParams = null;\n\tpublic isRawLoadMode = false;\n\tpublic updateUrl = '';\n\tpublic insertUrl = '';\n\tpublic deleteUrl = '';\n\tpublic onBeforeSend = null;\n\tpublic onAjaxError = null;\n\tpublic options = {};\n\tpublic tableDataModel: TableDataModel = null;\n\tpublic loadDataTransformer: TFunction;\n\n\tconstructor(options) {\n\t\tthis.keyExpr = options.key;\n\t\tthis.loadUrl = options.loadUrl;\n\t\tthis.loadMethod = options.loadMethod || 'GET';\n\t\tthis.updateMethod = options.updateMethod || 'PUT';\n\t\tthis.insertMethod = options.insertMethod || 'POST';\n\t\tthis.deleteMethod = options.deleteMethod || 'DELETE';\n\t\tthis.totalCountMethod = options.deleteMethod || 'POST';\n\t\tthis.loadParams = options.loadParams;\n\t\tthis.isRawLoadMode = options.loadMode === 'raw';\n\t\tthis.updateUrl = options.updateUrl;\n\t\tthis.insertUrl = options.insertUrl;\n\t\tthis.deleteUrl = options.deleteUrl;\n\t\tthis.totalCountUrl = options.totalCountUrl;\n\t\tthis.onBeforeSend = options.onBeforeSend;\n\t\tthis.onAjaxError = options.onAjaxError;\n\t\tthis.options = options;\n\t\tthis.tableDataModel = options.tableDataModel;\n\t\tthis.loadDataTransformer =\n\t\t\toptions.loadDataTransformer ||\n\t\t\tfunction (res) {\n\t\t\t\treturn res;\n\t\t\t};\n\t}\n\n\tstatic createStoreConfig(options) {\n\t\tconst storeConfig = new StoreConfig(options);\n\t\treturn storeConfig.createResult();\n\t}\n\n\tpublic send(operation, requiresKey, ajaxSettings, customSuccessHandler) {\n\t\tconst d = Deferred();\n\t\tlet thenable;\n\t\tlet beforeSendResult;\n\n\t\tconst sendCore = () => {\n\t\t\timport(/* webpackChunkName: \"ajaxUtility\" */ 'devextreme/core/utils/ajax').then(\n\t\t\t\t({ default: ajaxUtility }) => {\n\t\t\t\t\treturn authJwtApi.getTokens().then(() => {\n\t\t\t\t\t\tajaxUtility.sendRequest(ajaxSettings).then(\n\t\t\t\t\t\t\t(res, textStatus, xhr) => {\n\t\t\t\t\t\t\t\tif (customSuccessHandler) {\n\t\t\t\t\t\t\t\t\tcustomSuccessHandler(d, res, xhr);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\td.resolve();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t(xhr, textStatus) => {\n\t\t\t\t\t\t\t\tlet error = getErrorMessageFromXhr(xhr);\n\n\t\t\t\t\t\t\t\tif (this.onAjaxError) {\n\t\t\t\t\t\t\t\t\tconst e = { xhr, error };\n\t\t\t\t\t\t\t\t\tthis.onAjaxError(e);\n\t\t\t\t\t\t\t\t\terror = e.error;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\t\td.reject(error);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\td.reject(xhr, textStatus);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t);\n\t\t};\n\n\t\tif (requiresKey && !this.keyExpr) {\n\t\t\td.reject(new Error(`Primary key is not specified (operation: '${operation}', url: '${ajaxSettings.url}')`));\n\t\t} else {\n\t\t\tajaxSettings.cache = false;\n\t\t\tajaxSettings.dataType = 'json';\n\n\t\t\tif (this.onBeforeSend) {\n\t\t\t\tbeforeSendResult = this.onBeforeSend(operation, ajaxSettings);\n\t\t\t\tif (beforeSendResult && typeof beforeSendResult.then === 'function') {\n\t\t\t\t\tthenable = beforeSendResult;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (thenable) {\n\t\t\t\tthenable.then(sendCore, (error) => {\n\t\t\t\t\td.reject(error);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsendCore();\n\t\t\t}\n\t\t}\n\n\t\treturn d.promise();\n\t}\n\n\tpublic filterByKey(keyValue) {\n\t\tif (!Array.isArray(this.keyExpr)) {\n\t\t\treturn [this.keyExpr, keyValue];\n\t\t}\n\n\t\treturn this.keyExpr.map((i) => [i, keyValue[i]]);\n\t}\n\n\tpublic loadOptionsToActionParams(options, isCountQuery) {\n\t\tconst result = {};\n\t\tObject.assign(options, { isDictinct: !!options.dataField });\n\n\t\tif (isCountQuery) {\n\t\t\tresult['isCountQuery'] = isCountQuery;\n\t\t}\n\n\t\tif (options) {\n\t\t\t['skip', 'take', 'requireTotalCount', 'requireGroupCount', 'isDictinct'].forEach((i) => {\n\t\t\t\tif (options[i] !== undefined) {\n\t\t\t\t\tresult[i] = options[i];\n\t\t\t\t}\n\t\t\t});\n\t\t\tresult['dataField'] = Object.hasOwn(options, 'dataField') ? [options['dataField']] : [];\n\n\t\t\tconst normalizeSorting = normalizeSortingInfo;\n\t\t\tlet group = options.group;\n\t\t\tlet filter = options.filter;\n\t\t\tlet select = options.select;\n\t\t\tconst sort = options.sort;\n\t\t\tconst totalSummary = options.totalSummary;\n\n\t\t\tif (sort) {\n\t\t\t\tresult['sort'] = SortingData.create(normalizeSorting(options.sort));\n\t\t\t}\n\n\t\t\tif (group) {\n\t\t\t\tif (!isAdvancedGrouping(group)) {\n\t\t\t\t\tgroup = normalizeSorting(group);\n\t\t\t\t}\n\t\t\t\tgroup.forEach(({ selector }) => {\n\t\t\t\t\tif (!result['dataField'].includes(selector)) {\n\t\t\t\t\t\tresult['dataField'].push(selector);\n\t\t\t\t\t\tresult['isDictinct'] = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (filter) {\n\t\t\t\tlet filterGroup;\n\t\t\t\tif (filter.setting instanceof FilterGroup) {\n\t\t\t\t\tfilterGroup = filter.setting;\n\t\t\t\t} else if (filter instanceof FilterGroup) {\n\t\t\t\t\tfilterGroup = filter;\n\t\t\t\t} else {\n\t\t\t\t\tfilter = extend(true, [], filter);\n\t\t\t\t\tstringifyDatesInFilter(filter);\n\t\t\t\t\tfilterGroup = FilterGroup.createFilterGroup(filter);\n\t\t\t\t\tthis.tableDataModel.setRowAndHeaderFilter(filterGroup);\n\t\t\t\t}\n\t\t\t\tthis.tableDataModel.setAllAppliedFilters(filterGroup);\n\t\t\t\tresult['filter'] = filterGroup;\n\t\t\t} else {\n\t\t\t\tthis.tableDataModel.setAllAppliedFilters(null);\n\t\t\t\tthis.tableDataModel.setRowAndHeaderFilter(null);\n\t\t\t}\n\n\t\t\tif (totalSummary) {\n\t\t\t\t//TODO: temporary fix: discuss with Vova\n\t\t\t\tresult['totalSummary'] = totalSummary.filter(({ summaryType }) => summaryType !== 'NULL');\n\t\t\t\tresult['selectionFilter'] = this.tableDataModel.getSelectionFilter();\n\t\t\t}\n\n\t\t\tif (options.groupSummary) {\n\t\t\t\tresult['groupSummary'] = options.groupSummary;\n\t\t\t}\n\n\t\t\tif (select) {\n\t\t\t\tif (!Array.isArray(select)) {\n\t\t\t\t\tselect = [select];\n\t\t\t\t}\n\t\t\t\tresult['select'] = select;\n\t\t\t}\n\t\t}\n\n\t\textend(result, this.loadParams);\n\n\t\treturn JSON.stringify(result);\n\t}\n\n\tpublic handleInsertUpdateSuccess = (d, res, xhr) => {\n\t\tconst mime = xhr.getResponseHeader('Content-Type');\n\t\tconst isJSON = mime && mime.includes('application/json');\n\t\td.resolve(isJSON ? JSON.parse(res) : res);\n\t};\n\n\tpublic createResult() {\n\t\tconst result = {\n\t\t\tkey: this.keyExpr,\n\t\t\tuseDefaultSearch: true,\n\t\t\tload: (loadOptions) => {\n\t\t\t\treturn this.send(\n\t\t\t\t\t'load',\n\t\t\t\t\tfalse,\n\t\t\t\t\t{\n\t\t\t\t\t\turl: this.loadUrl,\n\t\t\t\t\t\tmethod: this.loadMethod,\n\t\t\t\t\t\tdata: this.loadOptionsToActionParams(loadOptions, false),\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t(d, res) => {\n\t\t\t\t\t\tprocessLoadResponse(d, res, (res) => {\n\t\t\t\t\t\t\tif (loadOptions.dataField || loadOptions.group?.length) {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tconst result = res.data.data.reduce((acc, re) => {\n\t\t\t\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t\t\t\t\t\t...Object.values(re).map((key) => ({\n\t\t\t\t\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\t\t\t\t\titems: null,\n\t\t\t\t\t\t\t\t\t\t\t\tcount: res.length,\n\t\t\t\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t}, []);\n\t\t\t\t\t\t\t\t\treturn [result, createLoadExtra(res)];\n\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\tconsole.error('ProcessLoadResponse Error: ', e);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn [this.loadDataTransformer(res.data), createLoadExtra(res)];\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\n\t\t\ttotalCount: (loadOptions) => {\n\t\t\t\t!this.isRawLoadMode &&\n\t\t\t\t\tthis.send(\n\t\t\t\t\t\t'send',\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\turl: this.totalCountUrl,\n\t\t\t\t\t\t\tmethod: this.totalCountMethod,\n\t\t\t\t\t\t\tdata: this.loadOptionsToActionParams(loadOptions, true),\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(d, res) => {\n\t\t\t\t\t\t\tprocessLoadResponse(d, res, ({ totalCount }) => {\n\t\t\t\t\t\t\t\treturn [totalCount];\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t},\n\n\t\t\tbyKey: (key) => {\n\t\t\t\t!this.isRawLoadMode &&\n\t\t\t\t\tthis.send(\n\t\t\t\t\t\t'load',\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\turl: this.loadUrl,\n\t\t\t\t\t\t\tmethod: this.loadMethod,\n\t\t\t\t\t\t\tdata: this.loadOptionsToActionParams({ filter: this.filterByKey(key) }, false),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(d, res) => {\n\t\t\t\t\t\t\tprocessLoadResponse(d, res, ({ data }) => [data[0]]);\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t},\n\n\t\t\tupdate: (key, values) => {\n\t\t\t\treturn this.send(\n\t\t\t\t\t'update',\n\t\t\t\t\ttrue,\n\t\t\t\t\t{\n\t\t\t\t\t\turl: this.updateUrl,\n\t\t\t\t\t\tmethod: this.updateMethod,\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdata: JSON.stringify(this.tableDataModel.updateOptionsToActionParams(key, values)),\n\t\t\t\t\t},\n\t\t\t\t\t(d, res, xhr) => {\n\t\t\t\t\t\tconst mime = xhr.getResponseHeader('Content-Type');\n\t\t\t\t\t\tconst isJSON = mime && mime.includes('application/json');\n\t\t\t\t\t\t//res.updatedRow = {on_empty_remove_assignment: true, keep_size: false, enable_background_image: false};\n\t\t\t\t\t\td.resolve(isJSON ? res.updatedRow : res);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tinsert: (values) => {\n\t\t\t\tthis.insertUrl &&\n\t\t\t\t\tthis.send(\n\t\t\t\t\t\t'insert',\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\turl: this.insertUrl,\n\t\t\t\t\t\t\tmethod: this.insertMethod,\n\t\t\t\t\t\t\tdata: { values: JSON.stringify(values) },\n\t\t\t\t\t\t},\n\t\t\t\t\t\tthis.handleInsertUpdateSuccess,\n\t\t\t\t\t);\n\t\t\t},\n\n\t\t\tremove: (key) => {\n\t\t\t\tthis.deleteUrl &&\n\t\t\t\t\tthis.send(\n\t\t\t\t\t\t'delete',\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\turl: this.deleteUrl,\n\t\t\t\t\t\t\tmethod: this.deleteMethod,\n\t\t\t\t\t\t\tdata: { key: serializeKey(key) },\n\t\t\t\t\t\t},\n\t\t\t\t\t\t() => {},\n\t\t\t\t\t);\n\t\t\t},\n\t\t};\n\t\tCUSTOM_STORE_OPTIONS.forEach((name) => {\n\t\t\tconst value = this.options[name];\n\t\t\tif (value !== undefined) {\n\t\t\t\tresult[name] = value;\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n}\n\nexport default function createStore(options) {\n\tconst config = StoreConfig.createStoreConfig(options);\n\treturn import(/* webpackChunkName: \"CustomStore\" */ 'devextreme/data/custom_store').then(\n\t\t({ default: CustomStore }) => {\n\t\t\t// @ts-ignore\n\t\t\treturn new CustomStore(config);\n\t\t},\n\t);\n}\n"],"names":["processLoadResponse","d","res","getResolveArgs","value","Array","isArray","data","totalCount","expandLoadResponse","resolve","apply","reject","Error","createLoadExtra","groupCount","summary","serializeKey","key","JSON","stringify","stringifyDatesInFilter","crit","forEach","v","k","Object","prototype","toString","call","date","zpad","text","len","String","length","builder","getMonth","getDate","getFullYear","h","getHours","m","getMinutes","s","getSeconds","f","getMilliseconds","push","join","serializeDate","getErrorMessageFromXhr","xhr","mime","getResponseHeader","responseText","indexOf","jsonObj","json","parse","x","safeParseJSON","CUSTOM_STORE_OPTIONS","StoreConfig","options","keyExpr","loadUrl","totalCountUrl","loadMethod","updateMethod","insertMethod","deleteMethod","totalCountMethod","loadParams","isRawLoadMode","updateUrl","insertUrl","deleteUrl","onBeforeSend","onAjaxError","tableDataModel","loadDataTransformer","handleInsertUpdateSuccess","isJSON","includes","this","loadMode","operation","requiresKey","ajaxSettings","customSuccessHandler","thenable","beforeSendResult","Deferred","sendCore","then","ajaxUtility","default","authJwtApi","sendRequest","textStatus","error","e","url","cache","dataType","promise","keyValue","map","i","isCountQuery","result","assign","isDictinct","dataField","undefined","hasOwn","filterGroup","normalizeSorting","normalizeSortingInfo","group","filter","select","sort","totalSummary","SortingData","expr","isAdvancedGrouping","selector","setting","FilterGroup","extend","setRowAndHeaderFilter","setAllAppliedFilters","summaryType","getSelectionFilter","groupSummary","useDefaultSearch","load","loadOptions","send","method","loadOptionsToActionParams","headers","reduce","acc","re","values","items","count","console","byKey","filterByKey","update","updateOptionsToActionParams","updatedRow","insert","remove","name","createResult","createStore","config","createStoreConfig","CustomStore"],"sourceRoot":""}