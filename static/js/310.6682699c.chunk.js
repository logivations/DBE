"use strict";(self.webpackChunkroot1=self.webpackChunkroot1||[]).push([[310],{6977:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var i=n(1413),o=n(74165),a=n(15861),s=n(72791),r=n(68962),l=n.n(r),u=(n(13486),n(73261),n(85841),n(68583),n(80184)),c=function(e){var t=e.data,n=e.id,c=e.tableInstance,d=e.component,p=e.rowIndex,h=e.colCount,f=(0,s.useRef)(null),b=(0,s.useCallback)((function(){var e;return null===f||void 0===f||null===(e=f.current)||void 0===e?void 0:e.instance}),[f]),m=(0,s.useCallback)(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.cellValue(p,t,n),e.next=3,d.saveEditData();case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[p,d]),g=(0,s.useMemo)((function(){return c.getTableDataModel().columns}),[]);return(0,u.jsx)(l(),{id:n,formData:t,readOnly:!1,showColonAfterLabel:!0,labelLocation:"top",validationGroup:"customerData",minColWidth:300,colCount:h||4,ref:f,children:g.map((function(e){var n=(0,i.Z)((0,i.Z)({},e.getColumnEditorOptions()),{},{disabled:!e.getIsEditable(),onValueChanged:function(){var n=(0,a.Z)((0,o.Z)().mark((function n(i){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.getValidators()){n.next=4;break}e.getValidatorForAsyncRule(i.value,t).then(function(){var t=(0,a.Z)((0,o.Z)().mark((function t(n){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=3;break}return t.next=3,m(e.getName(),i.value);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.next=7;break;case 4:if(!b||!b().validate().isValid){n.next=7;break}return n.next=7,m(e.getName(),i.value);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),setParameters:function(){var t=(0,a.Z)((0,o.Z)().mark((function t(n,i,a){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!b||!b().validate().isValid){t.next=6;break}if(!(e.getIsRequired()&&a||!e.getIsRequired())){t.next=6;break}return t.next=4,m(e.getName(),a);case 4:return t.next=6,d.repaint();case 6:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}()});return(0,u.jsx)(r.SimpleItem,{dataField:e.getName(),name:e.getName(),component:e.getFormCellRender(t),label:{text:e.getCaption()},editorOptions:n,editorType:e.getViewModel().getInputType(),children:e.getValidationRules()},e.getName())}))})},d=s.memo(c)},45217:function(e,t,n){n.d(t,{Z:function(){return he}});var i=n(70885),o=n(42982),a=n(4942),s=n(1413),r=n(72791),l=n(73283),u=n.n(l),c=n(15671),d=n(43144),p=n(82963),h=n(97326),f=n(60136),b=n(29388),m=n(38520),g={backspace:"backspace",tab:"tab",enter:"enter",escape:"escape",pageup:"pageUp",pagedown:"pageDown",end:"end",home:"home",arrowleft:"leftArrow",arrowup:"upArrow",arrowright:"rightArrow",arrowdown:"downArrow",delete:"del"," ":"space",f:"F",a:"A","*":"asterisk","-":"minus",alt:"alt",control:"control",shift:"shift"},v={8:"backspace",9:"tab",13:"enter",27:"escape",33:"pageUp",34:"pageDown",35:"end",36:"home",37:"leftArrow",38:"upArrow",39:"rightArrow",40:"downArrow",46:"del",32:"space",70:"F",65:"A",106:"asterisk",109:"minus",189:"minus",173:"minus",16:"shift",17:"control",18:"alt"},B=function(e){var t=!!e.key,n=t?e.key:e.which;if(n)return n=t?g[n.toLowerCase()]||n:v[n]||String.fromCharCode(n)},I=function(){function e(t,n,i,o){(0,c.Z)(this,e),this.code=t,this.shift=n,this.ctrl=i,this.extraParams=o}return(0,d.Z)(e,[{key:"isSameKey",value:function(e){return this.code===e.code&&this.ctrl===e.ctrl&&this.shift===e.shift}},{key:"toString",value:function(){return"".concat(this.code,"-").concat(this.ctrl,"-").concat(this.shift)}}]),e}(),S=function(){function e(t){return(0,c.Z)(this,e),this.keyListeners=new Map,this.componentStorage=new Map,e.instances[t]?e.instances[t]:(this.listenKeyboardEvents(),this.setComponentInstance=this.setComponentInstance.bind(this),e.instances[t]=this,this)}return(0,d.Z)(e,[{key:"setComponentInstance",value:function(e,t){this.componentStorage.set(e,t)}},{key:"listenKeyboardEvents",value:function(){var e=this;document.addEventListener("keyup",(function(t){var n;t.isComposing||229===t.keyCode||e.runListeners({keyName:B(n=t),key:n.key,code:n.code,ctrl:n.ctrlKey,location:n.location,metaKey:n.metaKey,shift:n.shiftKey,alt:n.altKey,which:n.which,originalEvent:n})}))}},{key:"runListeners",value:function(e){var t=this;(0,o.Z)(this.keyListeners.values()).forEach((function(n){var i=n.buttonName,o=n.shortcutOptions,a=n.handler;if(o.isSameKey(e)){var s=t.componentStorage.get(i);a({itemData:o.extraParams,component:s})}}))}},{key:"registerShortcut",value:function(e,t,n){this.keyListeners.set(e.toString(),{buttonName:n,shortcutOptions:e,handler:t})}}]),e}();S.instances={};var C=S,x=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"toolbar-item-custom",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"auto",r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"before",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"dxButton",u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},p=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;(0,c.Z)(this,e),this.buttonName=t,this.text=n,this.title=i,this.disabled=o,this.cssClass=a,this.locateInMenu=s,this.location=r,this.widget=l,this.visible=u,this.options=d,this.children=p,this.isDown=!1,this.component=void 0,this.icon=void 0,this.shortcutOptions=[],this.clickHandler=function(){return!0},this.shortcutHandler=function(){return!0}}return(0,d.Z)(e,[{key:"setShortcut",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.shortcutOptions.push(new I(e,t,n,i)),this}},{key:"getShortcuts",value:function(){return this.shortcutOptions}},{key:"setVisible",value:function(e){return this.visible=e,this}},{key:"isVisible",value:function(){return this.visible}},{key:"setTitle",value:function(e){return this.title=e,this.options.hint=e,this}},{key:"setIcon",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.icon=e.getIcon(t),this.options.icon=e.getIcon(t),this}},{key:"setCssClass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.cssClass+=" ".concat(e),this}},{key:"setChildren",value:function(e){return this.children=e,this}},{key:"setWidget",value:function(e){return this.widget=e,this}},{key:"setText",value:function(e){return this.text=e,this}},{key:"getKey",value:function(){return this.buttonName}},{key:"mergeOptions",value:function(e){return Object.assign(this.options,e),this}},{key:"setClickHandler",value:function(e){this.clickHandler=e,this.setShortcutHandler(e)}},{key:"setShortcutHandler",value:function(e){this.shortcutHandler=e}},{key:"getClickHandler",value:function(){return this.clickHandler}},{key:"getShortcutHandler",value:function(){return this.shortcutHandler}},{key:"getChildren",value:function(){return this.children}},{key:"getButtonOptions",value:function(){return Object.assign(this.options,"dxDropDownButton"!==this.widget?{onClick:this.clickHandler}:{})}},{key:"getItemProps",value:function(){return{text:this.text,title:this.title,hint:this.title,icon:this.icon,disabled:this.disabled,cssClass:this.cssClass,locateInMenu:this.locateInMenu,location:this.location,widget:this.widget,visible:this.visible}}}],[{key:"getIcon",value:function(e){return m[e]||e}}]),e}(),Z=x,T=n(74769),E=n(56118),R=n(52614),y=n(98826),D=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"buildCloseScreenBuilderTable",value:function(e,t){var n=e.getTableKey(),i=e.getTableName(),o=new Z(T.Z.closeScreenBuilderTable);return o.setTitle((0,E.Z)("CLOSE")),o.setIcon("PowerIcon"),o.setClickHandler(t.closeScreenBuilderTableButtonClickHandler(n,i)),o}},{key:"buildTableActionsMenuButton",value:function(e,t){var n=e.metadata.tableRelatedUserParameters.getActions().sort((function(e,t){return e.header>t.header?1:-1})),i=new Z(T.Z.tableActionsMenuButton);return i.setTitle((0,E.Z)("TABLE_ACTIONS")),i.setIcon("chevrondoubleright"),i.setWidget("dxDropDownButton"),i.mergeOptions({items:n,displayExpr:"header",dropDownOptions:{minWidth:350},onItemClick:t.tableActionsClickHandler(),itemTemplate:function(e){return e.header}}),i}},{key:"buildReloadButton",value:function(e){var t=new Z(T.Z.reloadButton);return t.setTitle((0,E.Z)("_RELOAD_BUTTON")+" (Ctrl+Shift+5)"),t.setIcon("ReloadIcon"),t.setWidget("dxButton"),t.setClickHandler(e.reloadButtonClickHandler()),t.setShortcut("Digit5",!0,!0),t.setShortcut("KeyR",!1,!0),t}},{key:"buildExecuteTableUpdateButton",value:function(){var e=new Z(T.Z.executeTableUpdateButton);return e.setTitle((0,E.Z)("_UPDATE_BUTTON")),e.setIcon("UpdateIcon"),e.setWidget("dxButton"),e}},{key:"buildGetLinkButton",value:function(e){var t=new Z(T.Z.getLinkButton);return t.setTitle((0,E.Z)("_GET_LINK_BUTTON")),t.setIcon("LinkIcon"),t.setWidget("dxButton"),t.setClickHandler(e.getLinkButtonClickHandler()),t}},{key:"buildToggleSelectionButton",value:function(e){var t=new Z(T.Z.toggleSelectionButton);return t.setClickHandler(e.toggleSelectionButtonClickHandler(t)),t.setTitle((0,E.Z)("SELECT_ALL_ROWS")),t.setCssClass("toolbar-bg-icon select-all-icon"),t.setWidget("dxButton"),t}},{key:"buildDeleteRowsButton",value:function(e){var t=new Z(T.Z.deleteRowsButton);return t.setTitle((0,E.Z)("_DELETE_BUTTON")+" (Ctrl+Shift+6)"),t.setIcon("RemoveIcon"),t.setWidget("dxButton"),t.setClickHandler(e.deleteRowsButtonClickHandler()),t.setShortcut("Digit6",!0,!0),t}},{key:"buildAddRowButton",value:function(e){var t=new Z(T.Z.addRowButton);return t.setTitle((0,E.Z)("_ADD_BUTTON")+" (Ctrl+Shift+3)"),t.setIcon("AddIcon"),t.setWidget("dxButton"),t.setClickHandler(e.addRowButtonClickHandler()),t.setShortcut("Digit3",!0,!0),t.setShortcut("Digit4",!0,!0),t}},{key:"buildCloneRowsButton",value:function(e){var t=new Z(T.Z.cloneRowsButton);return t.setTitle((0,E.Z)("_CLONE_BUTTON")+" (Ctrl+Shift+4)"),t.setIcon("AddCloneIcon"),t.setWidget("dxButton"),t.setClickHandler(e.cloneRowButtonClickHandler()),t}},{key:"buildSaveRowsButton",value:function(e,t){var n=new Z(T.Z.saveRowsButton);return n.setTitle((0,E.Z)("_SAVE_BUTTON")),n.setIcon("save"),n.setWidget("dxButton"),n.setClickHandler(t.saveRowsButtonClickHandler()),n}},{key:"buildSaveForeignKeyButton",value:function(e){var t=new Z(T.Z.saveForeignKeyButton);return t.setTitle((0,E.Z)("_SAVE_FOREIGN_KEY_BUTTON")),t.setIcon("SaveForeignKeyIcon"),t.setWidget("dxButton"),t.setClickHandler(e.saveForeignKeyButtonClickHandler()),t}},{key:"buildMassUpdateButton",value:function(e,t){var n=new Z(T.Z.massUpdateButton);return n.setTitle((0,E.Z)("_MASS_UPDATE_BUTTON")),n.setIcon("MassiveUpdateIcon"),n.setWidget("dxButton"),n.setClickHandler(e.massUpdateButtonClickHandler(t)),n}},{key:"buildExportButton",value:function(e){var t=new Z(T.Z.exportButton);return t.setTitle((0,E.Z)("_EXPORT_BUTTON")),t.setIcon("ExportIcon"),t.setWidget("dxButton"),t.setClickHandler(e.exportButtonClickHandler()),t}},{key:"buildImportButton",value:function(e){var t=new Z(T.Z.importButton);return t.setTitle((0,E.Z)("_IMPORT_BUTTON")),t.setIcon("ImportIcon"),t.setWidget("dxButton"),t.setClickHandler(e.importButtonClickHandler()),t}},{key:"buildSettingsButton",value:function(e){var t=new Z(T.Z.settingsButton);return t.setTitle((0,E.Z)("_SETTINGS_BUTTON")),t.setIcon("SettingsIcon"),t.setWidget("dxButton"),t.setClickHandler(e.settingsButtonClickHandler()),t}},{key:"buildPagerPanel",value:function(){return new Z(T.Z.pagerPanel)}},{key:"buildCompareButton",value:function(e){var t=new Z(T.Z.compareButton);return t.setTitle((0,E.Z)("_COMPARE_BUTTON")),t.setIcon("CompareIcon"),t.setWidget("dxButton"),t.setClickHandler(e.compareButtonClickHandler()),t}},{key:"buildMasterButton",value:function(){var e=new Z(T.Z.masterButton);return e.setTitle((0,E.Z)("_MASTER_BUTTON_SELECT")),e.setIcon("MasterIcon"),e.setWidget("dxButton"),e}},{key:"buildHelpButton",value:function(e){var t=new Z(T.Z.helpButton);return t.setTitle((0,E.Z)("HELP")),t.setIcon("HelpIcon"),t.setWidget("dxButton"),t.setClickHandler(e.helpButtonClickHandler()),t}},{key:"buildLinksMenuButton",value:function(){var e=new Z(T.Z.linksMenuButton);return e.setTitle((0,E.Z)("LINKS")),e.setIcon("link"),e.setWidget("dxButton"),e}},{key:"buildFilterSettingButton",value:function(e,t,n){var i,a=[R.oF.create({settingName:(0,E.Z)("ADD_EDIT_FILTER"),key:y.k6.ADD_EDIT_FILTER}),R.oF.create({settingName:(0,E.Z)("_UNFILTER_BUTTON")+" (Ctrl+Shift+7)",key:y.k6.UNFILTER})],r=e.filters,l=null===(i=e.defaultFilter)||void 0===i?void 0:i.settingId,u=new Z(T.Z.filterSettingButton);return u.setTitle((0,E.Z)("_FILTER_BUTTON")+" (Ctrl+Shift+2)"),u.setIcon("FilterIcon"),u.setWidget("dxDropDownButton"),u.setShortcutHandler(t.filterSettingButtonItemClick(a)),u.mergeOptions({location:"before",items:[].concat(a,(0,o.Z)(r)).map((function(e){return(0,s.Z)({},e)})),dropDownOptions:{minWidth:150},selectedItemKey:l,displayExpr:"settingName",useSelectMode:!0,keyExpr:"settingId",onItemClick:t.filterSettingButtonItemClick(a),onInitialized:function(e){var t=e.component;n(u.buttonName,t)}}),u.setShortcut("Digit2",!0,!0,{key:y.k6.ADD_EDIT_FILTER}),u.setShortcut("Digit7",!0,!0,{key:y.k6.UNFILTER}),u}},{key:"buildHiddenColumnSettingSplitMenuButton",value:function(e,t){var n,i=new Z(T.Z.hiddenColumnSettingButton),a=[R.rH.create({settingName:(0,E.Z)("ADD_EDIT_FILTER"),key:y.K8.ADD_EDIT_FILTER}),R.rH.create({settingName:(0,E.Z)("_SHOW_HIDDEN_COLUMNS_BUTTON"),key:y.K8.SHOW_HIDDEN_COLUMNS})],r=e.hiddenColumnSettings,l=null===(n=e.defaultHiddenColumn)||void 0===n?void 0:n.getSettingId();return i.setTitle((0,E.Z)("HIDDEN_COLUMNS_FILTER")),i.setIcon("HiddenColumnsIcon"),i.setWidget("dxDropDownButton"),i.mergeOptions({location:"before",items:[].concat(a,(0,o.Z)(r)).map((function(e){return(0,s.Z)({},e)})),dropDownOptions:{minWidth:150},selectedItemKey:l,displayExpr:"settingName",useSelectMode:!0,keyExpr:"settingId",onItemClick:t.hiddenColumnSettingSplitMenuButtonItemClick(a)}),i}},{key:"buildGroupingSettingSplitMenuButton",value:function(){var e=new Z(T.Z.groupingSettingSplitMenuButton);return e.setTitle((0,E.Z)("GROUPING_FILTER")),e.setIcon("indeterminatestate"),e.setWidget("dxButton"),e}},{key:"buildTableSortButton",value:function(e,t){var n,i=new Z(T.Z.tableSortButton),a=e.sortOrderSettings,r=null===(n=e.defaultSortOrder)||void 0===n?void 0:n.getSettingId(),l=[R.xW.create({settingName:(0,E.Z)("ADD_EDIT_FILTER"),key:y.Lu.ADD_EDIT_FILTER}),R.xW.create({settingName:(0,E.Z)("REMOVE_SORTING"),key:y.Lu.REMOVE_SORTING})];return i.setTitle((0,E.Z)("_TABLE_SORT_BUTTON")),i.setIcon("SortIcon"),i.setWidget("dxDropDownButton"),i.mergeOptions({location:"before",items:[].concat(l,(0,o.Z)(a)).map((function(e){return(0,s.Z)({},e)})),dropDownOptions:{minWidth:150},selectedItemKey:r,displayExpr:"settingName",useSelectMode:!0,keyExpr:"settingId",onItemClick:t.tableSortButtonItemClick(l)}),i}},{key:"buildViewChartMenuButton",value:function(e,t){var n=new Z(T.Z.viewChartMenuButton),i=e.tableRelatedCharts;return n.setTitle((0,E.Z)("DBE_CHARTS")),n.setIcon("ChartsIcon"),n.setWidget("dxDropDownButton"),n.mergeOptions({items:i,dropDownOptions:{minWidth:350},onItemClick:t.tableRelatedChartsButtonClickHandler(),itemTemplate:function(e){return(0,E.Z)(e.text)}}),n}},{key:"buildChildRecordsMenuButton",value:function(e,t){var n=new Z(T.Z.childRecordsMenuButton);return n.setTitle((0,E.Z)("_CHILD_RECORDS_BUTTON")),n.setIcon("ShowChildIcon"),n.setWidget("dxButton"),n.setClickHandler(t.openChildParentTable((0,E.Z)("_CHILD_RECORDS_BUTTON"),!0)),n}},{key:"buildParentRecordsMenuButton",value:function(e,t){var n=new Z(T.Z.parentRecordsMenuButton);return n.setTitle((0,E.Z)("_PARENT_RECORDS_BUTTON")),n.setIcon("ShowParentIcon"),n.setWidget("dxButton"),n.setClickHandler(t.openChildParentTable((0,E.Z)("_PARENT_RECORDS_BUTTON"),!1)),n}},{key:"buildSynchronizeChildButton",value:function(){var e=new Z(T.Z.synchronizeChildButton);return e.setTitle((0,E.Z)("_PARENT_BUTTON_SELECT")),e.setIcon("columnproperties"),e.setWidget("dxButton"),e}},{key:"buildMergeButton",value:function(e){var t=new Z(T.Z.mergeButton);return t.setTitle((0,E.Z)("MERGE_ROWS")),t.setIcon("MergeRowsIcon"),t.setWidget("dxButton"),t.setClickHandler(e.mergeRowsButtonClickHandler()),t}},{key:"buildScreenBuilderButton",value:function(e){var t=new Z(T.Z.screenBuilderButton);return t.setTitle((0,E.Z)("SCREEN_BUILDER")),t.setIcon("ScreenBuilder"),t.setWidget("dxButton"),t.setClickHandler(e.screenBuilderButtonClickHandler()),t}},{key:"buildColumnChooserButton",value:function(e){var t=new Z(T.Z.columnChooserButton);return t.setTitle((0,E.Z)("COLUMN_CHOOSER")),t.setIcon("ColumnChooserIcon"),t.setWidget("dxButton"),t.setClickHandler(e.columnChooserButtonClickHandler()),t}},{key:"buildLinkReferenceButton",value:function(e,t){var n=e.tableReferences,i=new Z(T.Z.linkReferenceButton);return i.setTitle((0,E.Z)("LINKS")),i.setIcon("link"),i.setWidget("dxDropDownButton"),i.mergeOptions({items:n,dropDownOptions:{minWidth:350},onItemClick:t.linkReferenceTableButtonClickHandler(),itemTemplate:function(e){return(0,E.Z)(e.name)}}),i}},{key:"buildRecalculateReportDataButton",value:function(e){var t=new Z(T.Z.executeTableUpdateButton);return t.setTitle((0,E.Z)("UPDATE")),t.setIcon("UpdateIcon"),t.setWidget("dxButton"),t.setClickHandler(e.recalculateReportDataClickHandler()),t}},{key:"buildGoToOldDBEButton",value:function(e){var t=new Z(T.Z.goToOldDBE);return t.setTitle((0,E.Z)("BACK_TO_OLD_DBE")),t.setIcon("return"),t.setWidget("dxButton"),t.setClickHandler(e.goToOldDBEClickHandler()),t}}]),e}(),O=n(74165),_=n(15861),k=n(60545),w=n(3901),M=n(55207),N=n(66364),V=n.n(N),A=n(55841),L=n(63154),P=n(72333),j=n(41189),F=n(80496),U=n(40129),G=n(33367),H=n(52431),K=n(42459),W=n(42980),z=n(49867),Y=n(68418),$=n(78902),X=function(){function e(t,n,i,o){(0,c.Z)(this,e),this.tableInstance=n,this.originalTableDataModel=i,this.gridInstance=o,this.selectedRow=new Map,this.notificationController=void 0,this.foreignProxy=void 0,this.setSelectedRow(t),this.notificationController=new F.Z,this.foreignProxy=new $.Z,this.foreignButtonFilterBuilderUpdate=this.foreignButtonFilterBuilderUpdate.bind(this),this.foreignButtonFormUpdate=this.foreignButtonFormUpdate.bind(this),this.foreignButtonCellUpdate=this.foreignButtonCellUpdate.bind(this)}return(0,d.Z)(e,[{key:"update",value:function(){var e=(0,_.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,[this.foreignButtonFilterBuilderUpdate,this.foreignButtonFormUpdate,this.foreignButtonCellUpdate].reduce(function(){var e=(0,_.Z)((0,O.Z)().mark((function e(t,n){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.then((function(e){return e?n():Promise.resolve(!1)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve(!0));case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error("Foreign cell update error");case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"foreignButtonFilterBuilderUpdate",value:function(){var e=(0,_.Z)((0,O.Z)().mark((function e(){var t,n,i,o,a;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.editorOptions)||!Object.hasOwn(t,"setValueToBuilder")){e.next=11;break}return this.closeParentTable(),n=t.setValueToBuilder,0!==this.selectedRow.size?(i=this.foreignKeyInfo.parentTableColumnName,o=this.selectedRow.get(i),a=this.selectedRow.get(this.foreignKeyInfo.parentKeyColumnText),n({foreignButtonId:o,foreignButtonText:a})):n(null),this.foreignProxy.clearCache(t.columnName),e.next=8,this.repaintComponent();case 8:return e.abrupt("return",Promise.resolve(!1));case 11:return e.abrupt("return",Promise.resolve(!0));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"foreignButtonFormUpdate",value:function(){var e=(0,_.Z)((0,O.Z)().mark((function e(){var t,n,i,o=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.editorOptions,n=this.dataFromCellData,!(t&&n&&Object.hasOwn(n,"dataField"))){e.next=13;break}return 0===this.selectedRow.size&&Object.values(this.foreignKeyInfo.joinedKeyColumnNames).forEach((function(e){o.selectedRow.set(e,null)})),i=this.foreignKeyInfo.joinedKeyColumnNames[this.dataFromCellData.dataField],t.setParameters(Object.fromEntries(this.selectedRow.entries()),n.dataField,0!==this.selectedRow.size?this.selectedRow.get(i):null),this.closeParentTable(),this.foreignProxy.clearCache(n.dataField),e.next=10,this.repaintComponent();case 10:return e.abrupt("return",Promise.resolve(!1));case 13:return e.abrupt("return",Promise.resolve(!0));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"foreignButtonCellUpdate",value:function(){var e=(0,_.Z)((0,O.Z)().mark((function e(){var t,n,o,r,l,u,c,d,p=this;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.cellData.column.dataField,n=this.originalTableDataModel.getColumnByName(t),o=this.foreignKeyInfo.joinedKeyColumnNames[t],r=this.dataFromCellData,l=this.cellData.rowIndex,u=n.getValidatorName(),c=0!==this.selectedRow.size?this.selectedRow.get(o):null,d=Object.entries(this.foreignKeyInfo.joinedKeyColumnNames).reduce((function(e,t){var n=(0,i.Z)(t,2),o=n[0],a=n[1],s=0!==p.selectedRow.size&&p.selectedRow.has(a)?p.selectedRow.get(a):p.getDefaultValue(o);return p.resolveForeignKeys(s,e,o),e}),(0,a.Z)({},t,c)),n.getValidatorForAsyncRule(c,(0,s.Z)((0,s.Z)({},r),d)).then(function(){var e=(0,_.Z)((0,O.Z)().mark((function e(n){var o;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=11;break}if(!(o=p.component)){e.next=6;break}return Object.entries(d).forEach((function(e){var t=(0,i.Z)(e,2),n=t[0],a=t[1];o.cellValue(l,n,a||0)})),e.next=6,o.saveEditData();case 6:p.foreignProxy.clearCache(t),p.gridInstance.refresh(!0),p.closeParentTable(),e.next=12;break;case 11:p.notificationController.createNotification({message:(0,E.Z)(z.Z[u]),type:U.z.ERROR});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",Promise.resolve(!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDefaultValue",value:function(e){var t=this.originalTableDataModel.getColumnByName(e);if(t){var n=t.getViewModel().getDefaultValue();return(0,Y.$K)(n)?n.toString():null}return null}},{key:"resolveForeignKeys",value:function(e,t,n){null==e&&this.originalTableDataModel.getColumns().forEach((function(e){null!==e.getForeignKeyInfo()&&Object.keys(e.getForeignKeyInfo().getJoinedColumnNames()).forEach((function(i){i.equalsIgnoreCase(n)&&!n.equalsIgnoreCase(e.getName())&&Object.assign(t,(0,a.Z)({},e.getName(),null))}))}))}},{key:"closeParentTable",value:function(){this.tableInstance.close()}},{key:"repaintComponent",value:function(){var e=(0,_.Z)((0,O.Z)().mark((function e(){var t;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.component,e.t0=t,!e.t0){e.next=5;break}return e.next=5,t.repaint();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"component",get:function(){return Object.hasOwn(this.cellData,"data")&&Object.hasOwn(this.cellData.data,"component")?this.cellData.data.component:Object.hasOwn(this.cellData,"component")?this.cellData.component:null}},{key:"foreignKeyInfo",get:function(){return this.tableInstance.foreignKeyInfo}},{key:"cellData",get:function(){return this.foreignKeyInfo.cellData}},{key:"dataFromCellData",get:function(){return Object.hasOwn(this.cellData,"data")?this.cellData.data:null}},{key:"editorOptions",get:function(){return Object.hasOwn(this.dataFromCellData,"editorOptions")?this.dataFromCellData.editorOptions:null}},{key:"setSelectedRow",value:function(e){var t=e[0];t&&(this.selectedRow=new Map(Object.entries(t)))}}]),e}(),q=X,J=function(){function e(t,n,i){(0,c.Z)(this,e),this.dbeDxGridRef=void 0,this.actions={},this.tableInstance=void 0,this.tableInstanceManager=void 0,this.notificationController=void 0,this.warehouseId=void 0,this.warehouseId=i.warehouseId,this.dbeDxGridRef=t,this.actions=n,this.tableInstance=i,this.tableInstanceManager=new A.Z,this.notificationController=new F.Z,this.getDbeDxGridInstance=this.getDbeDxGridInstance.bind(this)}return(0,d.Z)(e,[{key:"getDbeDxGridInstance",value:function(){return this.dbeDxGridRef.current&&this.dbeDxGridRef.current.instance}},{key:"asyncGridRepaint",value:function(){var e=this;setTimeout((function(){e.getDbeDxGridInstance().repaint()}),1e3)}},{key:"exportButtonClickHandler",value:function(){var e=this;return function(){e.actions.openModal(k.Z.EXPORT_MODAL,{width:1e3,modalTitle:(0,E.Z)("EXPORT_TO_CSV"),tableInstance:e.tableInstance})}}},{key:"addRowButtonClickHandler",value:function(){var e=this;return function(){var t=e.getDbeDxGridInstance();e.actions.openModal(k.Z.ADD_NEW_ROW_MODAL,{width:1e3,modalTitle:(0,E.Z)("ADD_NEW_ROW"),tableInstance:e.tableInstance,handleSubmitEvent:function(n,i){var o=e.tableInstance.getTableDataModel().updateOptionsToActionParams(e.tableInstance.getTableDataModel().getPrimaryKeys().reduce((function(e,t){return(0,s.Z)((0,s.Z)({},e),{},(0,a.Z)({},t,null))}),{}),{},Object.assign(e.tableInstance.getTableDataModel().getRowDefaultValues(),n,{ID_wh:e.warehouseId}));M.Z.addNewRows(e.tableInstance.getTableName(),[o]).then((function(){t.refresh(!0),i&&i()}))}})}}},{key:"cloneRowButtonClickHandler",value:function(){var e=this;return(0,_.Z)((0,O.Z)().mark((function t(){var n;return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getDbeDxGridInstance(),t.next=3,n.getSelectedRowKeys();case 3:if(0!==t.sent.length){t.next=8;break}e.notificationController.createNotification({message:(0,E.Z)("PLEASE_SELECT_ROWS_FOR_CLONING"),type:U.z.WARNING,displayTime:5e3}),t.next=17;break;case 8:return t.t0=e.actions,t.t1=k.Z.CLONE_SELECTED_ROWS_MODAL,t.t2=(0,E.Z)("CLONE_ROWS"),t.t3=e.tableInstance,t.next=14,n.getSelectedRowsData();case 14:t.t4=t.sent,t.t5={modalTitle:t.t2,tableInstance:t.t3,width:"88vw",asyncRender:!0,selectedRows:t.t4},t.t0.openModal.call(t.t0,t.t1,t.t5);case 17:case"end":return t.stop()}}),t)})))}},{key:"deleteRowsButtonClickHandler",value:function(){var e=this;return(0,_.Z)((0,O.Z)().mark((function t(){var n,i,o;return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getDbeDxGridInstance(),t.next=3,n.getSelectedRowKeys();case 3:i=t.sent,o=i.map((function(t){return e.tableInstance.getTableDataModel().updateOptionsToActionParams(t)})),(0,K.iG)((0,E.Z)("_SELECTED_ROW_$_REMOVAL_CONFIRMATION",i.length),"W2MO").then(function(){var t=(0,_.Z)((0,O.Z)().mark((function t(i){return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=7;break}return t.next=3,M.Z.deleteTableRows(e.tableInstance.getTableName(),o).then((function(t){var i=t.recordsDeleted,o=t.message,a=t.parameter;e.notificationController.createNotification({message:(0,E.Z)(o,a),type:i?U.z.SUCCESS:U.z.ERROR}),n.clearSelection()}));case 3:return t.next=5,n.refresh(!0);case 5:t.next=8;break;case 7:return t.abrupt("return");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 7:case"end":return t.stop()}}),t)})))}},{key:"toggleSelectionButtonClickHandler",value:function(e){var t=this;return function(){var n=(0,_.Z)((0,O.Z)().mark((function n(i){return(0,O.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isDown){n.next=8;break}return n.next=3,t.getDbeDxGridInstance().clearSelection();case 3:e.setTitle((0,E.Z)("SELECT_ALL_ROWS")),i.element.classList.remove("deselect-all-icon"),i.element.classList.add("select-all-icon"),n.next=13;break;case 8:return n.next=10,t.getDbeDxGridInstance().selectAll();case 10:e.setTitle((0,E.Z)("UNSELECT_ALL_ROWS")),i.element.classList.add("deselect-all-icon"),i.element.classList.remove("select-all-icon");case 13:e.isDown=!e.isDown;case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},{key:"tableActionsClickHandler",value:function(){var e=this,t=this.getDbeDxGridInstance,n=this.tableInstance;return function(){var i=(0,_.Z)((0,O.Z)().mark((function i(o){var a;return(0,O.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:(a=o.itemData).getTableActionParameters(n).then(function(){var i=(0,_.Z)((0,O.Z)().mark((function i(o){var r,l;return(0,O.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t().getSelectedRowsData();case 2:r=i.sent,l=function(n,i){var o={primaryKeys:e.tableInstance.getTableDataModel().getPrimaryKeys(),inputParams:n||{},selectedRows:r};a.runTableActionByOutputType(o,e.tableInstance.getTableName()).then(function(){var n=(0,_.Z)((0,O.Z)().mark((function n(o){return(0,O.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o&&o.length?o.forEach((function(t){var n=t.alias,i=t.severity,o=t.parameters;e.notificationController.createNotification({message:(0,E.Z)(n,o),type:i})})):(e.notificationController.createNotification({message:(0,E.Z)("_SUCCESSFUL_ACTION"),type:U.z.SUCCESS}),t().clearSelection()),n.next=3,t().refresh(!0);case 3:i&&i(),t().endCustomLoading();case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(t){e.notificationController.createNotification({message:t.errorMessage||t,type:U.z.ERROR})}))},V()(o)?a.confirmationRequired?(0,K.iG)((0,E.Z)("_CHECK_EXECUTION_ACTION"),"W2MO").then((function(e){e&&l()})):l():a.checkBeforeExecuteAction(r,e.tableInstance.getTableName(),(function(){e.actions.openModal(k.Z.TABLE_ACTION_MODAL,(0,s.Z)((0,s.Z)({modalTitle:a.header},a),{},{selectedRows:r.length?(0,s.Z)({},r[0]):{},executeTableAction:l,tableInstance:n,asyncRender:!0,dbeDxGridInstance:t()}))}));case 5:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}());case 2:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()}},{key:"importButtonClickHandler",value:function(){var e=this,t=this.getDbeDxGridInstance,n=this.tableInstance;return function(){e.actions.openModal(k.Z.IMPORT_MODAL,{width:1e3,getDbeDxGridInstance:t,modalTitle:(0,E.Z)("IMPORT"),hideOnOutsideClick:!1,tableInstance:n})}}},{key:"settingsButtonClickHandler",value:function(){var e=this,t=this.getDbeDxGridInstance,n=this.tableInstance;return function(){e.actions.openModal(k.Z.SETTINGS_MODAL,{modalTitle:(0,E.Z)("SETTINGS"),dbeDxGridInstance:t(),tableInstance:n})}}},{key:"reloadButtonClickHandler",value:function(){var e=this;return(0,_.Z)((0,O.Z)().mark((function t(){return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,R.xW.applySortingSetting(e.tableInstance.selectedSortOrder,e.getDbeDxGridInstance()),e.tableInstance.selectedHiddenColumnFilter&&e.getDbeDxGridInstance().option("customizeColumns",(function(t){t.forEach((function(t){t.visible=!e.tableInstance.selectedHiddenColumnFilter.setting.includes(t.dataField)}))})),(new $.Z).clearCache(),t.next=6,e.getDbeDxGridInstance().refresh(!0);case 6:e.asyncGridRepaint(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),e.notificationController.createNotification({message:t.t0,type:U.z.ERROR});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))}},{key:"compareButtonClickHandler",value:function(){var e=this,t=this.getDbeDxGridInstance,n=new j.Z,o=function(n,o,a){M.Z.compareTables(n,a).then((function(n){t().endCustomLoading();var a=(0,i.Z)(n,2),s=a[0];a[1]?o({tableName:s}):e.notificationController.createNotification({message:(0,E.Z)("TABLES_ARE_EQUAL"),type:U.z.INFO})})).catch((function(t){e.notificationController.createNotification({message:t.errorMessage,type:U.z.ERROR})}))};return(0,_.Z)((0,O.Z)().mark((function i(){return(0,O.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:n.resetToDefaultParams(),e.actions.openModal(k.Z.COMPARE_TABLES_PARAMETERS_MODAL,{modalTitle:(0,E.Z)("COMPARE_TABLE"),dbeDxGridInstance:t(),tableInstance:e.tableInstance,width:800,handleCompareTable:o});case 2:case"end":return i.stop()}}),i)})))}},{key:"filterSettingButtonItemClick",value:function(e){var t=this,n=this.getDbeDxGridInstance,i=this.tableInstance;return function(a){var r=a.itemData,l=a.component;switch(r.key){case y.k6.ADD_EDIT_FILTER:t.actions.openModal(k.Z.USER_PARAMS_SETTINGS_MODAL,{width:750,tableInstance:i,type:w.h.FILTER_SETTINGS,hideOnOutsideClick:!1,helpKey:W._.FILTERS,modalTitle:(0,E.Z)("FILTER"),dbeDxGridRef:n(),applySetting:function(){var e=(0,_.Z)((0,O.Z)().mark((function e(o){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.tableRelatedUserParameters.setSelectedFilter(o),e.next=3,n().filter(o);case 3:l.instance().option("selectedItemKey",o.settingId),t.asyncGridRepaint();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),repaintDropDown:function(){return l.instance().option("items",[].concat((0,o.Z)(e),(0,o.Z)(i.filters)).map((function(e){return(0,s.Z)({},e)})))},unfilter:function(){var e=(0,_.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.instance().option("selectedItemKey",null),i.tableRelatedUserParameters.setSelectedFilter(null),n().filter(null),t.asyncGridRepaint();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});var u=n().filter();l.instance().option("selectedItemKey",u?u.settingId:null);break;case y.k6.UNFILTER:i.tableRelatedUserParameters.setSelectedFilter(null),n().filter(null),l.instance().option("selectedItemKey",null),t.asyncGridRepaint();break;default:i.tableRelatedUserParameters.setSelectedFilter(r),r.setting&&(n().filter(r),l.instance().option("selectedItemKey",r.settingId)),t.asyncGridRepaint()}}}},{key:"tableSortButtonItemClick",value:function(e){var t=this,n=this.getDbeDxGridInstance,i=this.tableInstance;return function(a){var r=a.itemData,l=a.component;switch(r.key){case y.Lu.ADD_EDIT_FILTER:t.actions.openModal(k.Z.USER_PARAMS_SETTINGS_MODAL,{width:750,type:w.h.SORTING_SETTING,tableInstance:i,modalTitle:(0,E.Z)("TABLE_SORTING"),helpKey:W._.TABLE_SORTING,dbeDxGridRef:n(),applySetting:function(e){i.tableRelatedUserParameters.setSelectedSortOrder(e),R.xW.applySortingSetting(e,n()),l.instance().option("selectedItemKey",e.settingId)},unfilter:function(){var e=(0,_.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.instance().option("selectedItemKey",null),i.tableRelatedUserParameters.setSelectedSortOrder(null),n().clearSorting(null),n().refresh(!0);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),repaintDropDown:function(){return l.instance().option("items",[].concat((0,o.Z)(e),(0,o.Z)(i.sortOrderSettings)).map((function(e){return(0,s.Z)({},e)})))}});var u=i.tableRelatedUserParameters.selectedSortOrder;l.instance().option("selectedItemKey",u?u.settingId:null);break;case y.Lu.REMOVE_SORTING:l.instance().option("selectedItemKey",null),i.tableRelatedUserParameters.setSelectedSortOrder(null),n().clearSorting(),t.asyncGridRepaint();break;default:i.tableRelatedUserParameters.setSelectedSortOrder(r),R.xW.applySortingSetting(r,n()),l.instance().option("selectedItemKey",r.settingId)}}}},{key:"hiddenColumnSettingSplitMenuButtonItemClick",value:function(e){var t=this,n=this.getDbeDxGridInstance,i=this.tableInstance,a=function(){n().option("customizeColumns",(function(e){e.forEach((function(e){e.visible=!0}))}))};return function(r){var l=r.itemData,u=r.component;switch(l.key){case y.K8.ADD_EDIT_FILTER:t.actions.openModal(k.Z.USER_PARAMS_SETTINGS_MODAL,{width:750,type:w.h.HIDDEN_COLUMNS_SETTING,tableInstance:i,hideOnOutsideClick:!1,modalTitle:(0,E.Z)("HIDDEN_COLUMNS_FILTER"),helpKey:W._.HIDDEN_COLUMN_FILTER,dbeDxGridRef:n(),applySetting:function(e){i.tableRelatedUserParameters.setSelectedHiddenColumnFilter(e),n().option("customizeColumns",(function(t){t.forEach((function(t){t.visible=!e.setting.includes(t.dataField)}))})),u.instance().option("selectedItemKey",e.settingId)},repaintDropDown:function(){u.instance().option("items",[].concat((0,o.Z)(e),(0,o.Z)(i.hiddenColumnSettings)).map((function(e){return(0,s.Z)({},e)})))},unfilter:function(){a()}});var c=i.tableRelatedUserParameters.selectedHiddenColumnFilter;u.instance().option("selectedItemKey",c?c.settingId:null);break;case y.K8.SHOW_HIDDEN_COLUMNS:i.tableRelatedUserParameters.setSelectedHiddenColumnFilter(null),u.instance().option("selectedItemKey",null),a(),t.asyncGridRepaint();break;default:i.tableRelatedUserParameters.setSelectedHiddenColumnFilter(l),n().option("customizeColumns",(function(e){e.forEach((function(e){e.visible=!l.setting.includes(e.dataField)}))})),u.instance().option("selectedItemKey",l.settingId),t.asyncGridRepaint()}}}},{key:"getLinkButtonClickHandler",value:function(){var e=this,t=this.getDbeDxGridInstance,n=this.tableInstance;return(0,_.Z)((0,O.Z)().mark((function i(){var a,s,r,l,u;return(0,O.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t().getSelectedRowsData();case 2:0!==(a=i.sent).length?(s=n.getTableDataModel().getPrimaryKeysAsArray(),r=s.reduce((function(e,t){return e.push([t,(0,o.Z)(new Set(a.map((function(e){return e[t]}))))]),e}),[]),l=R.e_.createFilterForLink(r),(u=JSON.stringify(l)).length<=R.e_.MAX_LENGTH_URL_FILTER?e.actions.openModal(k.Z.LINK_WITH_FILTER,{hideOnOutsideClick:!0,modalTitle:(0,E.Z)("LINK_WITH_FILTER"),tableInstance:n,filterString:u}):F.Z.createNotification({message:(0,E.Z)("DATA_IS_TOO_LONG_FOR_URL_FILTER"),type:U.z.ERROR})):e.notificationController.createNotification({message:(0,E.Z)("THERE_ARE_NO_SELECTED_ROWS"),type:U.z.WARNING});case 4:case"end":return i.stop()}}),i)})))}},{key:"openChildParentTable",value:function(e,t){var n=this,i=this.getDbeDxGridInstance,o=this.tableInstance;return(0,_.Z)((0,O.Z)().mark((function a(){return(0,O.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.actions.openModal(k.Z.CHILD_PARENT_TABLE_MODAL,{width:600,hideOnOutsideClick:!0,modalTitle:e,dbeDxGridInstance:i(),tableInstance:o,isChildOrParentTable:t});case 1:case"end":return a.stop()}}),a)})))}},{key:"massUpdateButtonClickHandler",value:function(e){var t=this;return(0,_.Z)((0,O.Z)().mark((function n(){var i,o;return(0,O.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=function(){var e=(0,_.Z)((0,O.Z)().mark((function e(n,i,o,a){var s,r,l,u;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDbeDxGridInstance().getSelectedRowsData();case 2:return s=e.sent,r=t.tableInstance.getTableDataModel().getAllAppliedFilters(),l=t.tableInstance.getTableDataModel().getPrimaryKeys(),u={allAppliedFilters:r,selectedRows:s,primaryKeys:l,operation:n,updatedRow:i,massUpdateRange:o},e.next=8,M.Z.massiveDataUpdate(u,t.tableInstance.getTableName()).then((function(){t.getDbeDxGridInstance().refresh(!0),a&&a()}));case 8:case"end":return e.stop()}}),e)})));return function(t,n,i,o){return e.apply(this,arguments)}}(),o=function(){var e=(0,_.Z)((0,O.Z)().mark((function e(n,i,o,s){var r,l,u,c,d;return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getDbeDxGridInstance(),l=i[0],u=r.getDataSource().store(),e.next=5,(0,_.Z)((0,O.Z)().mark((function e(){return(0,O.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o!==P.Z.SELECTED_ROWS){e.next=2;break}return e.abrupt("return",r.getSelectedRowKeys());case 2:return e.abrupt("return",r.getDataSource().items());case 3:case"end":return e.stop()}}),e)})))();case 5:c=e.sent,d=L.x[n],Promise.all(c.map((function(e){var t=d(e[l.columnName],l.value);return u.update(e,(0,a.Z)({},l.columnName,t))}))).then((function(){r.refresh(!0),s&&s()}));case 8:case"end":return e.stop()}}),e)})));return function(t,n,i,o){return e.apply(this,arguments)}}(),t.actions.openModal(k.Z.MASSIVE_UPDATE_MODAL,{width:700,hideOnOutsideClick:!0,dbeDxGridInstance:t.getDbeDxGridInstance(),tableInstance:t.tableInstance,executeMassiveUpdate:e===A.Z.CLONE_ROW_IN_ORIGINAL_TABLE?o:i,asyncRender:!0,modalTitle:(0,E.Z)("_MASS_UPDATE")});case 3:case"end":return n.stop()}}),n)})))}},{key:"saveRowsButtonClickHandler",value:function(){var e=this;return function(){var t=e.getDbeDxGridInstance().getDataSource().items(),n=e.tableInstance.getTableDataModel().getPrimaryKeys().reduce((function(e,t){return(0,s.Z)((0,s.Z)({},e),{},(0,a.Z)({},t,null))}),{}),i=t.map((function(t){return e.tableInstance.getTableDataModel().updateOptionsToActionParams(n,{},Object.assign(e.tableInstance.getTableDataModel().getRowDefaultValues(),t,{ID_wh:e.warehouseId}))}));M.Z.addNewRows(e.tableInstance.getTableName(),i).then((function(){e.actions.closeModal(),e.getDbeDxGridInstance().refresh(!0),e.asyncGridRepaint()}))}}},{key:"saveForeignKeyButtonClickHandler",value:function(){var e=this,t=this.getDbeDxGridInstance,n=this.tableInstanceManager.tableInstanceStorage.get(A.Z.ORIGINAL_TABLE);return(0,_.Z)((0,O.Z)().mark((function i(){var o,a;return(0,O.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t().getSelectedRowsData();case 2:return o=i.sent,a=new q(o,e.tableInstance,n.getTableDataModel(),t()),i.next=6,a.update();case 6:case"end":return i.stop()}}),i)})))}},{key:"screenBuilderButtonClickHandler",value:function(){var e=this,t=this.tableInstance;return function(){e.actions.openModal(k.Z.SCREEN_BUILDER_CONFIG,{hideOnOutsideClick:!1,width:600,modalTitle:(0,E.Z)("SCREEN_BUILDER"),tableInstance:t})}}},{key:"columnChooserButtonClickHandler",value:function(){var e=this.getDbeDxGridInstance;return function(){e().showColumnChooser()}}},{key:"linkReferenceTableButtonClickHandler",value:function(){var e=this.getDbeDxGridInstance;return function(){var t=(0,_.Z)((0,O.Z)().mark((function t(n){var i,o;return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.itemData,t.t0=i,t.next=4,e().getSelectedRowsData();case 4:t.t1=t.sent,o=t.t0.createUrl.call(t.t0,t.t1),window.open(o,"_blank");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},{key:"tableRelatedChartsButtonClickHandler",value:function(){var e=this,t=this.getDbeDxGridInstance;return function(){var n=(0,_.Z)((0,O.Z)().mark((function n(i){var o,a,s,r,l;return(0,O.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=i.itemData,a=e.tableInstance.getTableDataModel().getTemporaryTableData(),n.next=4,t().getSelectedRowsData();case 4:s=n.sent,r=e.tableInstance.getTableDataModel().prepareUniqueKeysData(s.notEmpty()?s:a),e.tableInstance.selectedRowsDexieDB.addRecord(o.id,r),(l=new URL(window.location.toString())).searchParams.delete("tableId"),l.searchParams.append("chartId",o.id.toString()),l.pathname="".concat(window.CONTEXT_PATH,"/view/api/showDbeChart"),window.open(l,"_blank");case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},{key:"closeScreenBuilderTableButtonClickHandler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=this.actions,i=n.updateSplitElements,o=n.destroyChildParentTable;return function(){e.screenBuilderTableKey?i(e.screenBuilderTableKey,t):o()}}},{key:"executeRecalculateReportData",value:function(e){var t=this,n=this.getDbeDxGridInstance;M.Z.recalculateReportData(this.tableInstance.getMetadata().getTable().getTableName(),e).then((function(e){e.length?e.forEach((function(e){var n=e.alias,i=e.parameters,a=e.severity;e.namePinned;t.notificationController.createNotification({message:E.Z.apply(void 0,[n].concat((0,o.Z)(i))),type:a,displayTime:1e4})})):n().refresh(!0)})).catch((function(e){t.notificationController.createNotification({message:e.errorMessage||(0,E.Z)("UPDATE_FAILED"),type:U.z.ERROR})}))}},{key:"recalculateReportDataClickHandler",value:function(){var e=this,t=this.tableInstance;return function(){t.getReportInputParameters().length?e.actions.openModal(k.Z.RECALCULATE_REPORT_DATA,{hideOnOutsideClick:!1,width:600,modalTitle:(0,E.Z)("REPORT_INPUT_PARAMETERS"),tableInstance:t,executeRecalculateReportData:e.executeRecalculateReportData.bind(e),asyncRender:!0}):e.executeRecalculateReportData([])}}},{key:"helpButtonClickHandler",value:function(){var e,t=this.tableInstance.table.getHelpLink();if(t){var o=t&&t.split("/"),a=(0,i.Z)(o,3),s=a[0],r=a[1],l=a[2],u=G.l[G.H[this.tableInstance.warehouseUiType]],c=(0,H.N)({warehouseId:this.tableInstance.warehouseId});e=new URL("".concat(window.location.origin).concat(n.g.CONTEXT_PATH,"/view/help/").concat(u,"/").concat(s||"","/").concat(r||"","?").concat(c)),l&&(e.hash=l)}return function(){window.open(e,"_blank")}}},{key:"mergeRowsButtonClickHandler",value:function(){var e=this;return(0,_.Z)((0,O.Z)().mark((function t(){var n,i,o,r;return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getDbeDxGridInstance(),t.next=3,n.getSelectedRowKeys();case 3:if(i=t.sent,o=function(){var t=(0,_.Z)((0,O.Z)().mark((function t(n,i,o){var r,l,u;return(0,O.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.tableInstance.getTableDataModel().getPrimaryKeys().reduce((function(e,t){return(0,s.Z)((0,s.Z)({},e),{},(0,a.Z)({},t,null))}),{}),l=n.map((function(t){return e.tableInstance.getTableDataModel().updateOptionsToActionParams(r,{},Object.assign(e.tableInstance.getTableDataModel().getRowDefaultValues(),t,{ID_wh:e.warehouseId}))})),u=e.tableInstance.getTableDataModel().updateOptionsToActionParams(r,{},Object.assign(e.tableInstance.getTableDataModel().getRowDefaultValues(),i,{ID_wh:e.warehouseId})),t.next=5,M.Z.mergeRows({selectedRows:l,resultRow:[u]},e.tableInstance.getTableName());case 5:return t.next=7,e.getDbeDxGridInstance().refresh(!0);case 7:o&&o();case 8:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}(),!(i.length<2)){t.next=9;break}e.notificationController.createNotification({message:(0,E.Z)("PLEASE_SELECT_TWO_RECORDS"),type:U.z.WARNING,displayTime:5e3}),t.next=13;break;case 9:return t.next=11,n.getSelectedRowsData();case 11:r=t.sent,e.actions.openModal(k.Z.MERGE_ROWS_MODAL,{modalTitle:(0,E.Z)("MERGE_ROWS"),tableInstance:e.tableInstance,width:"88vw",asyncRender:!0,selectedRows:r,handleMergeRows:o});case 13:case"end":return t.stop()}}),t)})))}},{key:"goToOldDBEClickHandler",value:function(){return function(){var e=new URL(window.location.toString());e.pathname="".concat(window.CONTEXT_PATH,"/dbe"),window.open(e,"_blank")}}}]),e}(),Q=J,ee=function(e){(0,f.Z)(n,e);var t=(0,b.Z)(n);function n(e,i){var o;return(0,c.Z)(this,n),(o=t.call(this,i)).tableInstance=e,o.tableType=i,o.dbeDxGridRef=void 0,o.toolbarButtons={},o.actions={},o.toolbarPanelButtonEvents=null,n.instances[i]?(0,p.Z)(o,n.instances[i]):(o.getDbeDxGridInstance=o.getDbeDxGridInstance.bind((0,h.Z)(o)),n.instances[i]=(0,h.Z)(o),(0,p.Z)(o,(0,h.Z)(o)))}return(0,d.Z)(n,[{key:"setDbeDxGridRef",value:function(e){this.dbeDxGridRef=e}},{key:"getDbeDxGridInstance",value:function(){return this.dbeDxGridRef.current&&this.dbeDxGridRef.current.instance}},{key:"buildToolbarButtons",value:function(){return this.toolbarButtons.closeScreenBuilderTableButton=D.buildCloseScreenBuilderTable(this.tableInstance,this.toolbarPanelButtonEvents),this.toolbarButtons.toggleSelectionButton=D.buildToggleSelectionButton(this.toolbarPanelButtonEvents),this.toolbarButtons.reloadButton=D.buildReloadButton(this.toolbarPanelButtonEvents),this.toolbarButtons.tableActionsMenuButton=D.buildTableActionsMenuButton(this.tableInstance,this.toolbarPanelButtonEvents),this.toolbarButtons.executeTableUpdateButton=D.buildExecuteTableUpdateButton(),this.toolbarButtons.getLinkButton=D.buildGetLinkButton(this.toolbarPanelButtonEvents),this.toolbarButtons.deleteRowsButton=D.buildDeleteRowsButton(this.toolbarPanelButtonEvents),this.toolbarButtons.addRowButton=D.buildAddRowButton(this.toolbarPanelButtonEvents),this.toolbarButtons.cloneRowsButton=D.buildCloneRowsButton(this.toolbarPanelButtonEvents),this.toolbarButtons.saveRowsButton=D.buildSaveRowsButton(this.tableInstance,this.toolbarPanelButtonEvents),this.toolbarButtons.saveForeignKeyButton=D.buildSaveForeignKeyButton(this.toolbarPanelButtonEvents),this.toolbarButtons.massUpdateButton=D.buildMassUpdateButton(this.toolbarPanelButtonEvents,this.tableType),this.toolbarButtons.exportButton=D.buildExportButton(this.toolbarPanelButtonEvents),this.toolbarButtons.importButton=D.buildImportButton(this.toolbarPanelButtonEvents),this.toolbarButtons.settingsButton=D.buildSettingsButton(this.toolbarPanelButtonEvents),this.toolbarButtons.pagerPanel=D.buildPagerPanel(),this.toolbarButtons.compareButton=D.buildCompareButton(this.toolbarPanelButtonEvents),this.toolbarButtons.masterButton=D.buildMasterButton(),this.toolbarButtons.helpButton=D.buildHelpButton(this.toolbarPanelButtonEvents),this.toolbarButtons.linksMenuButton=D.buildLinksMenuButton(),this.toolbarButtons.filterSettingButton=D.buildFilterSettingButton(this.tableInstance,this.toolbarPanelButtonEvents,this.setComponentInstance),this.toolbarButtons.hiddenColumnSettingSplitMenuButton=D.buildHiddenColumnSettingSplitMenuButton(this.tableInstance,this.toolbarPanelButtonEvents),this.toolbarButtons.groupingSettingSplitMenuButton=D.buildGroupingSettingSplitMenuButton(),this.toolbarButtons.tableSortButton=D.buildTableSortButton(this.tableInstance,this.toolbarPanelButtonEvents),this.toolbarButtons.viewChartMenuButton=D.buildViewChartMenuButton(this.tableInstance,this.toolbarPanelButtonEvents),this.toolbarButtons.childRecordsMenuButton=D.buildChildRecordsMenuButton(this.tableInstance,this.toolbarPanelButtonEvents),this.toolbarButtons.parentRecordsMenuButton=D.buildParentRecordsMenuButton(this.tableInstance,this.toolbarPanelButtonEvents),this.toolbarButtons.synchronizeChildButton=D.buildSynchronizeChildButton(),this.toolbarButtons.mergeButton=D.buildMergeButton(this.toolbarPanelButtonEvents),this.toolbarButtons.screenBuilderButton=D.buildScreenBuilderButton(this.toolbarPanelButtonEvents),this.toolbarButtons.columnChooserButton=D.buildColumnChooserButton(this.toolbarPanelButtonEvents),this.toolbarButtons.linkReferenceButton=D.buildLinkReferenceButton(this.tableInstance,this.toolbarPanelButtonEvents),this.toolbarButtons.recalculateReportDataButton=D.buildRecalculateReportDataButton(this.toolbarPanelButtonEvents),this.toolbarButtons.goToOldDBEButton=D.buildGoToOldDBEButton(this.toolbarPanelButtonEvents),this}},{key:"configureButtonsVisibility",value:function(e,t){return this.toolbarButtons.closeScreenBuilderTableButton.setVisible(e.isCloseScreenBuilderTableButtonVisible),this.toolbarButtons.toggleSelectionButton.setVisible(e.isToggleSelectionButton),this.toolbarButtons.reloadButton.setVisible(e.isReloadButtonVisible),this.toolbarButtons.executeTableUpdateButton.setVisible(e.isExecuteTableUpdateButtonVisible),this.toolbarButtons.getLinkButton.setVisible(e.isGetLinkButtonVisible),this.toolbarButtons.deleteRowsButton.setVisible(e.isDeleteRowsButtonVisible&&t.isDeleteRowsButtonVisible),this.toolbarButtons.addRowButton.setVisible(e.isCloneRowsButtonVisible&&t.isCloneRowsButtonVisible),this.toolbarButtons.cloneRowsButton.setVisible(e.isCloneRowsButtonVisible&&t.isCloneRowsButtonVisible),this.toolbarButtons.saveRowsButton.setVisible(e.isSaveRowsButtonVisible),this.toolbarButtons.saveForeignKeyButton.setVisible(e.isSaveForeignKeyButtonVisible),this.toolbarButtons.massUpdateButton.setVisible(e.isMassUpdateButtonVisible&&t.isMassUpdateButtonVisible),this.toolbarButtons.exportButton.setVisible(e.isExportButtonVisible&&t.isExportButtonVisible),this.toolbarButtons.importButton.setVisible(e.isImportButtonVisible&&t.isImportButtonVisible),this.toolbarButtons.settingsButton.setVisible(e.isSettingsButtonVisible),this.toolbarButtons.pagerPanel.setVisible(e.isPagerPanelVisible),this.toolbarButtons.compareButton.setVisible(e.isCompareButtonVisible&&t.isCompareButtonVisible),this.toolbarButtons.helpButton.setVisible(e.isUserHelpLinkVisible&&t.isUserHelpLinkVisible),this.toolbarButtons.linksMenuButton.setVisible(e.isLinksMenuButtonVisible),this.toolbarButtons.tableActionsMenuButton.setVisible(e.isTableActionsMenuButtonVisible&&t.isTableActionsMenuButtonVisible),this.toolbarButtons.filterSettingButton.setVisible(e.isFilterSettingButtonVisible),this.toolbarButtons.hiddenColumnSettingSplitMenuButton.setVisible(e.isHiddenColumnSettingSplitMenuButtonVisible),this.toolbarButtons.groupingSettingSplitMenuButton.setVisible(e.isGroupingFilterVisible),this.toolbarButtons.tableSortButton.setVisible(e.isTableSortButtonVisible),this.toolbarButtons.childRecordsMenuButton.setVisible(e.isChildRecordsMenuButtonVisible),this.toolbarButtons.parentRecordsMenuButton.setVisible(e.isParentRecordsMenuButtonVisible),this.toolbarButtons.viewChartMenuButton.setVisible(e.isViewChartMenuButtonVisible&&t.isViewChartMenuButtonVisible),this.toolbarButtons.mergeButton.setVisible(e.isMergeButtonVisible&&t.isMergeButtonVisible),this.toolbarButtons.screenBuilderButton.setVisible(e.isScreenBuilderVisible),this.toolbarButtons.columnChooserButton.setVisible(e.isColumnChooserVisible),this.toolbarButtons.linkReferenceButton.setVisible(e.isLinkReferenceButton&&t.isLinkReferenceButton),this.toolbarButtons.recalculateReportDataButton.setVisible(e.isRecalculateReportDataButtonVisible&&t.isRecalculateReportDataButtonVisible),this.toolbarButtons.goToOldDBEButton.setVisible(!0),this}},{key:"registerShortcuts",value:function(){var e=this;return this.getButtonsAsArray().forEach((function(t){t.getShortcuts().forEach((function(n){e.registerShortcut(n,t.getShortcutHandler(),t.buttonName)}))})),this}},{key:"setActions",value:function(e,t){return this.actions[e]=t,this}},{key:"getButtonsAsArray",value:function(){return[this.toolbarButtons.closeScreenBuilderTableButton,this.toolbarButtons.toggleSelectionButton,this.toolbarButtons.reloadButton,this.toolbarButtons.executeTableUpdateButton,this.toolbarButtons.getLinkButton,this.toolbarButtons.deleteRowsButton,this.toolbarButtons.addRowButton,this.toolbarButtons.cloneRowsButton,this.toolbarButtons.saveRowsButton,this.toolbarButtons.saveForeignKeyButton,this.toolbarButtons.massUpdateButton,this.toolbarButtons.exportButton,this.toolbarButtons.importButton,this.toolbarButtons.settingsButton,this.toolbarButtons.pagerPanel,this.toolbarButtons.compareButton,this.toolbarButtons.masterButton,this.toolbarButtons.helpButton,this.toolbarButtons.linksMenuButton,this.toolbarButtons.tableActionsMenuButton,this.toolbarButtons.filterSettingButton,this.toolbarButtons.hiddenColumnSettingSplitMenuButton,this.toolbarButtons.groupingSettingSplitMenuButton,this.toolbarButtons.tableSortButton,this.toolbarButtons.viewChartMenuButton,this.toolbarButtons.childRecordsMenuButton,this.toolbarButtons.parentRecordsMenuButton,this.toolbarButtons.synchronizeChildButton,this.toolbarButtons.mergeButton,this.toolbarButtons.screenBuilderButton,this.toolbarButtons.columnChooserButton,this.toolbarButtons.linkReferenceButton,this.toolbarButtons.recalculateReportDataButton,this.toolbarButtons.goToOldDBEButton]}},{key:"getVisibleButtons",value:function(){return this.getButtonsAsArray().filter((function(e){return e.isVisible()}))}},{key:"dispatchForToolbar",get:function(){return this.actions.toolbarPanelDispatch}},{key:"createToolbarBarEvents",value:function(){return this.toolbarPanelButtonEvents=new Q(this.dbeDxGridRef,this.actions,this.tableInstance),this}}]),n}(C);ee.instances={},ee.instance=void 0;var te=ee,ne=function(){function e(){(0,c.Z)(this,e),this.isToggleSelectionButton=!1,this.isReloadButtonVisible=!1,this.isExecuteTableUpdateButtonVisible=!1,this.isGetLinkButtonVisible=!1,this.isDeleteRowsButtonVisible=!1,this.isCloneRowsButtonVisible=!1,this.isSaveRowsButtonVisible=!1,this.isSaveForeignKeyButtonVisible=!1,this.isFilterSettingButtonVisible=!1,this.isHiddenColumnSettingSplitMenuButtonVisible=!1,this.isTableSortButtonVisible=!1,this.isChildRecordsMenuButtonVisible=!1,this.isParentRecordsMenuButtonVisible=!1,this.isMassUpdateButtonVisible=!1,this.isExportButtonVisible=!1,this.isImportButtonVisible=!1,this.isSettingsButtonVisible=!1,this.isPagerPanelVisible=!1,this.isPagerTextBoxVisible=!1,this.isCompareButtonVisible=!1,this.isTableActionsMenuButtonVisible=!1,this.isViewChartMenuButtonVisible=!1,this.isLinksMenuButtonVisible=!1,this.isUserHelpLinkVisible=!1,this.isGroupingFilterVisible=!1,this.isMergeButtonVisible=!1,this.isScreenBuilderVisible=!1,this.isColumnChooserVisible=!1,this.isCloseScreenBuilderTableButtonVisible=!1,this.isLinkReferenceButton=!1,this.isRecalculateReportDataButtonVisible=!1}return(0,d.Z)(e,[{key:"setIsReloadButtonVisible",value:function(e){return this.isReloadButtonVisible=e,this}},{key:"setIsToggleSelectionButton",value:function(e){return this.isToggleSelectionButton=e,this}},{key:"setIsExecuteTableUpdateButtonVisible",value:function(e){return this.isExecuteTableUpdateButtonVisible=e,this}},{key:"setIsGetLinkButtonVisible",value:function(e){return this.isGetLinkButtonVisible=e,this}},{key:"setIsDeleteRowsButtonVisible",value:function(e){return this.isDeleteRowsButtonVisible=e,this}},{key:"setIsCloneRowsButtonVisible",value:function(e){return this.isCloneRowsButtonVisible=e,this}},{key:"setIsSaveForeignKeyButtonVisible",value:function(e){return this.isSaveForeignKeyButtonVisible=e,this}},{key:"setIsSaveRowsButtonVisible",value:function(e){return this.isSaveRowsButtonVisible=e,this}},{key:"setIsFilterSettingButtonVisible",value:function(e){return this.isFilterSettingButtonVisible=e,this}},{key:"setIsHiddenColumnSettingSplitMenuButtonVisible",value:function(e){return this.isHiddenColumnSettingSplitMenuButtonVisible=e,this}},{key:"setIsTableSortButtonVisible",value:function(e){return this.isTableSortButtonVisible=e,this}},{key:"setIsChildRecordsMenuButtonVisible",value:function(e){return this.isChildRecordsMenuButtonVisible=e,this}},{key:"setIsParentRecordsMenuButtonVisible",value:function(e){return this.isParentRecordsMenuButtonVisible=e,this}},{key:"setIsMassUpdateButtonVisible",value:function(e){return this.isMassUpdateButtonVisible=e,this}},{key:"setIsExportButtonVisible",value:function(e){return this.isExportButtonVisible=e,this}},{key:"setIsImportButtonVisible",value:function(e){return this.isImportButtonVisible=e,this}},{key:"setIsSettingsButtonVisible",value:function(e){return this.isSettingsButtonVisible=e,this}},{key:"setIsPagerPanelVisible",value:function(e){return this.isPagerPanelVisible=e,this}},{key:"setIsPagerTextBoxVisible",value:function(e){return this.isPagerTextBoxVisible=e,this}},{key:"setIsCompareButtonVisible",value:function(e){return this.isCompareButtonVisible=e,this}},{key:"setIsTableActionsMenuButtonVisible",value:function(e){return this.isTableActionsMenuButtonVisible=e,this}},{key:"setIsViewChartMenuButtonVisible",value:function(e){return this.isViewChartMenuButtonVisible=e,this}},{key:"setIsLinksMenuButtonVisible",value:function(e){return this.isLinksMenuButtonVisible=e,this}},{key:"setIsUserHelpLinkVisible",value:function(e){return this.isUserHelpLinkVisible=e,this}},{key:"setGroupingFilterVisible",value:function(e){return this.isGroupingFilterVisible=e,this}},{key:"setMergeButtonVisible",value:function(e){return this.isMergeButtonVisible=e,this}},{key:"setScreenBuilderVisible",value:function(e){return this.isScreenBuilderVisible=e,this}},{key:"setColumnChooserVisible",value:function(e){return this.isColumnChooserVisible=e,this}},{key:"setCloseScreenBuilderTableButtonVisible",value:function(e){return this.isCloseScreenBuilderTableButtonVisible=e,this}},{key:"setIsLinkReferenceButton",value:function(e){return this.isLinkReferenceButton=e,this}},{key:"setIsRecalculateReportDataButtonVisible",value:function(e){return this.isRecalculateReportDataButtonVisible=e,this}},{key:"build",value:function(){return new ie(this.isToggleSelectionButton,this.isReloadButtonVisible,this.isExecuteTableUpdateButtonVisible,this.isGetLinkButtonVisible,this.isDeleteRowsButtonVisible,this.isCloneRowsButtonVisible,this.isSaveRowsButtonVisible,this.isSaveForeignKeyButtonVisible,this.isFilterSettingButtonVisible,this.isHiddenColumnSettingSplitMenuButtonVisible,this.isTableSortButtonVisible,this.isChildRecordsMenuButtonVisible,this.isMassUpdateButtonVisible,this.isExportButtonVisible,this.isImportButtonVisible,this.isSettingsButtonVisible,this.isPagerPanelVisible,this.isPagerTextBoxVisible,this.isCompareButtonVisible,this.isTableActionsMenuButtonVisible,this.isViewChartMenuButtonVisible,this.isLinksMenuButtonVisible,this.isUserHelpLinkVisible,this.isParentRecordsMenuButtonVisible,this.isMergeButtonVisible,this.isGroupingFilterVisible,this.isScreenBuilderVisible,this.isColumnChooserVisible,this.isCloseScreenBuilderTableButtonVisible,this.isLinkReferenceButton,this.isRecalculateReportDataButtonVisible)}}]),e}(),ie=(0,d.Z)((function e(t,n,i,o,a,s,r,l,u,d,p,h,f,b,m,g,v,B,I,S,C,x,Z,T,E,R,y,D,O,_,k){(0,c.Z)(this,e),this.isToggleSelectionButton=t,this.isReloadButtonVisible=n,this.isExecuteTableUpdateButtonVisible=i,this.isGetLinkButtonVisible=o,this.isDeleteRowsButtonVisible=a,this.isCloneRowsButtonVisible=s,this.isSaveRowsButtonVisible=r,this.isSaveForeignKeyButtonVisible=l,this.isFilterSettingButtonVisible=u,this.isHiddenColumnSettingSplitMenuButtonVisible=d,this.isTableSortButtonVisible=p,this.isChildRecordsMenuButtonVisible=h,this.isMassUpdateButtonVisible=f,this.isExportButtonVisible=b,this.isImportButtonVisible=m,this.isSettingsButtonVisible=g,this.isPagerPanelVisible=v,this.isPagerTextBoxVisible=B,this.isCompareButtonVisible=I,this.isTableActionsMenuButtonVisible=S,this.isViewChartMenuButtonVisible=C,this.isLinksMenuButtonVisible=x,this.isUserHelpLinkVisible=Z,this.isParentRecordsMenuButtonVisible=T,this.isMergeButtonVisible=E,this.isGroupingFilterVisible=R,this.isScreenBuilderVisible=y,this.isColumnChooserVisible=D,this.isCloseScreenBuilderTableButtonVisible=O,this.isLinkReferenceButton=_,this.isRecalculateReportDataButtonVisible=k})),oe=ne,ae=function(){function e(){(0,c.Z)(this,e)}return(0,d.Z)(e,null,[{key:"getToolbarPanelButtonsConfig",value:function(t,n){switch(t){case A.Z.ORIGINAL_TABLE:return e.getMainViewToolbarPanelConfig();case A.Z.CLONE_ROW_IN_ORIGINAL_TABLE:return e.getCloneRowViewToolbarPanelConfig();case A.Z.SCREEN_BUILDER_TABLE:return e.getScreenBuilderTablesPanelConfig();case A.Z.FOREIGN_KEY_TABLE:return e.getForeignKeyToolbarPanelConfig(n);case A.Z.COMPARE_TABLE_RESULT:return this.getCompareTableResultConfig();default:return e.getMainViewToolbarPanelConfig()}}},{key:"getMainViewToolbarPanelConfig",value:function(){return(new oe).setIsToggleSelectionButton(!0).setIsReloadButtonVisible(!0).setIsGetLinkButtonVisible(!0).setIsDeleteRowsButtonVisible(!0).setIsCloneRowsButtonVisible(!0).setIsTableActionsMenuButtonVisible(!0).setIsFilterSettingButtonVisible(!0).setIsHiddenColumnSettingSplitMenuButtonVisible(!0).setIsTableSortButtonVisible(!0).setIsChildRecordsMenuButtonVisible(!0).setIsParentRecordsMenuButtonVisible(!0).setIsMassUpdateButtonVisible(!0).setIsViewChartMenuButtonVisible(!0).setIsExportButtonVisible(!0).setIsCompareButtonVisible(!0).setIsImportButtonVisible(!0).setIsSettingsButtonVisible(!0).setScreenBuilderVisible(!0).setColumnChooserVisible(!0).setIsLinkReferenceButton(!0).setIsRecalculateReportDataButtonVisible(!0).setMergeButtonVisible(!0).setIsUserHelpLinkVisible(!0).build()}},{key:"getForeignKeyToolbarPanelConfig",value:function(e){return(new oe).setIsReloadButtonVisible(!0).setIsGetLinkButtonVisible(!0).setIsSaveForeignKeyButtonVisible(e).setIsDeleteRowsButtonVisible(!0).setIsCloneRowsButtonVisible(!0).setIsFilterSettingButtonVisible(!0).setIsHiddenColumnSettingSplitMenuButtonVisible(!0).setIsTableSortButtonVisible(!0).setIsChildRecordsMenuButtonVisible(!0).setIsParentRecordsMenuButtonVisible(!0).setIsExportButtonVisible(!0).setIsImportButtonVisible(!0).setIsSettingsButtonVisible(!0).setColumnChooserVisible(!0).setIsLinkReferenceButton(!0).build()}},{key:"getCloneRowViewToolbarPanelConfig",value:function(){return(new oe).setIsSaveRowsButtonVisible(!0).setIsDeleteRowsButtonVisible(!0).setIsMassUpdateButtonVisible(!0).setIsToggleSelectionButton(!0).build()}},{key:"getScreenBuilderTablesPanelConfig",value:function(){return(new oe).setIsToggleSelectionButton(!0).setIsReloadButtonVisible(!0).setIsGetLinkButtonVisible(!0).setIsDeleteRowsButtonVisible(!0).setIsCloneRowsButtonVisible(!0).setIsTableActionsMenuButtonVisible(!0).setIsFilterSettingButtonVisible(!0).setIsHiddenColumnSettingSplitMenuButtonVisible(!0).setIsTableSortButtonVisible(!0).setIsChildRecordsMenuButtonVisible(!0).setIsParentRecordsMenuButtonVisible(!0).setIsMassUpdateButtonVisible(!0).setIsExportButtonVisible(!0).setIsImportButtonVisible(!0).setIsSettingsButtonVisible(!0).setIsCompareButtonVisible(!0).setColumnChooserVisible(!0).setCloseScreenBuilderTableButtonVisible(!0).setIsLinkReferenceButton(!0).build()}},{key:"getCompareTableResultConfig",value:function(){return(new oe).setIsHiddenColumnSettingSplitMenuButtonVisible(!0).setIsTableSortButtonVisible(!0).setIsPagerPanelVisible(!0).setIsPagerTextBoxVisible(!0).build()}}]),e}(),se=function(){function e(t){(0,c.Z)(this,e),this.tableInstance=void 0,this.isCloneRowsButtonVisible=void 0,this.isDeleteRowsButtonVisible=void 0,this.isTableActionsMenuButtonVisible=void 0,this.isExportButtonVisible=void 0,this.isImportButtonVisible=void 0,this.isMassUpdateButtonVisible=void 0,this.isCompareButtonVisible=void 0,this.isRecalculateReportDataButtonVisible=void 0,this.isMergeButtonVisible=void 0,this.isUserHelpLinkVisible=void 0,this.isViewChartMenuButtonVisible=void 0,this.isLinkReferenceButton=void 0,this.tableInstance=t}return(0,d.Z)(e,[{key:"setIsCloneRowsButtonVisible",value:function(){return this.isCloneRowsButtonVisible=this.tableInstance.canAddRecords(),this}},{key:"setIsDeleteRowsButtonVisible",value:function(){return this.isDeleteRowsButtonVisible=this.tableInstance.canDelete(),this}},{key:"setIsTableActionsMenuButtonVisible",value:function(){return this.isTableActionsMenuButtonVisible=this.tableInstance.canExecuteTableAction(),this}},{key:"setIsExportButtonVisible",value:function(){return this.isExportButtonVisible=this.tableInstance.canExport(),this}},{key:"setIsImportButtonVisible",value:function(){return this.isImportButtonVisible=this.tableInstance.canImport(),this}},{key:"setIsMassUpdateButtonVisible",value:function(){return this.isMassUpdateButtonVisible=this.tableInstance.canMassUpdate(),this}},{key:"setIsCompareButtonVisible",value:function(){return this.isCompareButtonVisible=this.tableInstance.canCompareTable(),this}},{key:"setIsRecalculateReportDataButtonVisible",value:function(){return this.isRecalculateReportDataButtonVisible=this.tableInstance.canExecuteUpdateTable(),this}},{key:"setIsMergeButtonVisible",value:function(){return this.isMergeButtonVisible=this.tableInstance.canMergeRows(),this}},{key:"setIsUserHelpLinkVisible",value:function(){return this.isUserHelpLinkVisible=this.tableInstance.hasHelpButton(),this}},{key:"setIsViewChartMenuButtonVisible",value:function(){return this.isViewChartMenuButtonVisible=this.tableInstance.isExistTableRelatedCharts,this}},{key:"setIsLinkReferenceButton",value:function(){return this.isLinkReferenceButton=this.tableInstance.isExistTableReferences,this}}],[{key:"build",value:function(t){return new e(t).setIsCloneRowsButtonVisible().setIsDeleteRowsButtonVisible().setIsTableActionsMenuButtonVisible().setIsExportButtonVisible().setIsImportButtonVisible().setIsMassUpdateButtonVisible().setIsCompareButtonVisible().setIsRecalculateReportDataButtonVisible().setIsMergeButtonVisible().setIsUserHelpLinkVisible().setIsViewChartMenuButtonVisible().setIsLinkReferenceButton()}}]),e}(),re=n(19044),le=n(19342),ue=function(e,t,n,i){var o=(0,re.default)(),a=o.updateSplitElements,s=o.destroyChildParentTable,l=o.destroyScreenBuilder,u=o.screenBuilder,c=(0,le.default)(),d=c.openModalWithProps,p=c.closeModal,h=new A.Z;return(0,r.useMemo)((function(){var o=new te(t,e);return n&&o.setDbeDxGridRef(n),h.setButtonManager(o),t.setToolbarPanelButtonManager(o),o.setActions("updateSplitElements",(function(e,t){return l(),a(e,t,u)})).setActions("destroyChildParentTable",s).setActions("openModal",d).setActions("closeModal",p).createToolbarBarEvents().buildToolbarButtons().registerShortcuts().configureButtonsVisibility(ae.getToolbarPanelButtonsConfig(e,i),se.build(t))}),[e,u])},ce=n(80184);function de(e,t){switch(t.type){case"UPDATE_SELECTED_ITEM_KEY":return(0,s.Z)((0,s.Z)({},e),{},(0,a.Z)({},t.payload.buttonName,(0,s.Z)((0,s.Z)({},e[t.payload.buttonName]),{},{selectedItemKey:t.payload.selectedItemKey})));case"UPDATE_ITEMS":return(0,s.Z)((0,s.Z)({},e),{},(0,a.Z)({},t.payload.buttonName,(0,s.Z)((0,s.Z)({},e[t.payload.buttonName]),{},{items:[].concat((0,o.Z)(e[t.payload.buttonName].items),(0,o.Z)(t.payload.items))})));default:return e}}var pe=function(e){var t=e.tableType,n=e.tableInstance,o=e.dbeDxGridRef,c=e.toolbarRef,d=e.saveButtonVisibility,p=ue(t,n,o,d),h=(0,r.useReducer)(de,{},(function(){return p.getVisibleButtons().reduce((function(e,t){return(0,s.Z)((0,s.Z)({},e),{},(0,a.Z)({},t.buttonName,t.getButtonOptions()))}),{})})),f=(0,i.Z)(h,2),b=f[0],m=f[1];return(0,r.useEffect)((function(){p.setActions("toolbarPanelDispatch",m)}),[]),(0,ce.jsx)(r.Fragment,{children:(0,ce.jsx)(u(),{ref:c,className:"toolbar-buttons-holder",id:"toolbar-holder",children:p.getVisibleButtons().map((function(e){return(0,ce.jsx)(l.Item,(0,s.Z)((0,s.Z)({},e.getItemProps()),{},{options:b[e.buttonName],children:e.getChildren()}),e.getKey())}))})})};pe.defaultProps={closeModal:function(){return null}};var he=pe},67182:function(e,t,n){var i=n(1413),o=n(42982),a=n(70885),s=n(72791),r=n(68962),l=n.n(r),u=n(68418),c=n(71078),d=(n(57463),n(80184));t.Z=function(e){var t=e.data,n=e.column,p=(0,s.useRef)(),h=(0,s.useState)((function(){return t.value?"string"===typeof t.value?[t.value]:t.value:[n.getDefaultValue()]})),f=(0,a.Z)(h,2),b=f[0],m=f[1];(0,s.useEffect)((function(){t.setValue(b)}),[]);var g=(0,s.useCallback)((function(){var e;return null===p||void 0===p||null===(e=p.current)||void 0===e?void 0:e.instance.validate()}),[]),v=(0,s.useCallback)((function(e,i){m((function(a){var s=[].concat((0,o.Z)(a.slice(0,e)),[i||n.getDefaultValue()],(0,o.Z)(a.slice(e+1)));return t.setValue(s),t.closeEditor(),s}))}),[]),B=(0,s.useCallback)((function(e){m((function(n){var i=[].concat((0,o.Z)(n.slice(0,e)),(0,o.Z)(n.slice(e+1)));return t.setValue(i),t.closeEditor(),i}))}),[]);return(0,d.jsx)("div",{className:"editor-component-filter-builder",children:(0,d.jsxs)(l(),{ref:p,children:[b.reduce((function(e,t,a){return[].concat((0,o.Z)(e),[(0,d.jsx)(r.SimpleItem,{editorType:n.getViewModel().getInputType(),component:n.getCellRenderForFilterBuilder(null===t||void 0===t?void 0:t.foreignButtonId),editorOptions:(0,i.Z)((0,i.Z)({},n.getEditorOptionsForFilterBuilder(t||n.getDefaultValue(),(function(e){var t=g();t.isValid?v(a,e.value):t.brokenRules.forEach((function(e){var t=e.message;throw new c.Z(t)}))}))),{},{setValueToBuilder:function(e){return v(a,e)},columnName:n.getName()}),children:n.getChildren()},"".concat(t,"-").concat(a,"-item")),1!==b.length?(0,d.jsx)(r.ButtonItem,{buttonOptions:{icon:"remove",useSubmitBehavior:!1,onClick:function(){return B(a)}}},"".concat(t,"-").concat(a,"-button")):null])}),[]),(0,d.jsx)(r.ButtonItem,{cssClass:"add-button",buttonOptions:{icon:"add",useSubmitBehavior:!1,onClick:function(){m((function(e){var i=[].concat((0,o.Z)(e),[n.getDefaultValue()]);return t.setValue(i),i}))},disabled:b.some((function(e){return!(0,u.$K)(e)||""===e}))}})]})})}},6123:function(e,t,n){var i=n(70885),o=n(68962),a=n.n(o),s=n(72791),r=(n(57463),n(80184)),l=new RegExp("^(%)(.*)$","gm"),u=new RegExp("^(.*)(%)$","gm");t.Z=function(e){var t=e.data,n=(0,s.useMemo)((function(){return t.value||""}),[]),c=(0,s.useState)(n),d=(0,i.Z)(c,2),p=d[0],h=d[1],f=(0,s.useState)((function(){return!!n.matchAll(l).next().value})),b=(0,i.Z)(f,2),m=b[0],g=b[1],v=(0,s.useState)((function(){return!!n.matchAll(u).next().value})),B=(0,i.Z)(v,2),I=B[0],S=B[1];return(0,s.useEffect)((function(){t.setValue(p)}),[p]),(0,r.jsx)(a(),{children:(0,r.jsxs)(o.GroupItem,{colCount:6,children:[(0,r.jsx)(o.ButtonItem,{colSpan:1,cssClass:"ends-with percent-btn",buttonOptions:{elementAttr:{class:m?"active":""},icon:"percent",stylingMode:"text",useSubmitBehavior:!1,onClick:function(){h((function(e){return e.matchAll(l).next().value?(g(!1),e.matchAll(l).next().value[2]):(g(!0),"%".concat(e))}))}}}),(0,r.jsx)(o.SimpleItem,{colSpan:4,editorType:"dxTextBox",editorOptions:{value:p,elementAttr:{class:"searchInTextInput"},onValueChanged:function(e){var t=e.value;h(t),g((function(){return!!t.matchAll(l).next().value})),S((function(){return!!t.matchAll(u).next().value}))}}}),(0,r.jsx)(o.ButtonItem,{colSpan:1,cssClass:"percent-btn",buttonOptions:{elementAttr:{class:I?"active":""},icon:"percent",stylingMode:"text",useSubmitBehavior:!1,onClick:function(){h((function(e){return e.matchAll(u).next().value?(S(!1),e.matchAll(u).next().value[1]):(S(!0),"".concat(e,"%"))}))}}})]})})}},19342:function(e,t,n){n.r(t),n.d(t,{ModalWindowPopupContext:function(){return ot},ModalWindowPopupContextProvider:function(){return st},default:function(){return rt}});var i,o=n(74165),a=n(15861),s=n(70885),r=n(4942),l=n(1413),u=n(72791),c=n(68962),d=n.n(c),p=n(57330),h=n.n(p),f=n(56118),b=[{id:0,text:(0,f.Z)("SEMICOLON"),value:";"},{id:1,text:(0,f.Z)("COMMA"),value:","},{id:2,text:(0,f.Z)("COLON"),value:":"},{id:3,text:(0,f.Z)("PIPE"),value:"|"},{id:3,text:(0,f.Z)("EXCLAMATION_MARK"),value:"!"}],m=[{id:0,text:(0,f.Z)("PERIOD"),value:"."},{id:1,text:(0,f.Z)("COMMA"),value:","}],g=[{id:0,text:(0,f.Z)("_CSV_NULL"),value:"\\N"},{id:1,text:(0,f.Z)("EMPTY_STRING"),value:""}],v=[{id:0,text:(0,f.Z)("_CSV_NULL"),value:"\n"},{id:1,text:(0,f.Z)("_CSV_DELIMITER_MAC"),value:"\r"},{id:2,text:(0,f.Z)("_CSV_DELIMITER_WINDOWS"),value:"\r\n"}],B=[{id:0,text:(0,f.Z)("EMPTY_STRING"),value:" "},{id:1,text:(0,f.Z)("PERIOD"),value:"."},{id:2,text:(0,f.Z)("COMMA"),value:","}],I=n(55207),S=n(7149),C=n(54014),x=n(42980),Z=n(38520),T=n(52614),E=n(80496),R=n(40129),y=n(80184),D=function(e){var t=e.closeModal,n=e.props.tableInstance,i=(0,u.useMemo)((function(){return n.getTableName()}),[]),p=(0,u.useState)({fieldSeparator:b[0],floatingPointSeparator:m[0],nullValueEscape:g[0],recordSeparator:v[0],exportIdsCheckBox:!1,notExportHiddenColumns:!1,sortByPrimaryKey:!0}),B=(0,s.Z)(p,2),D=B[0],O=B[1],_=(0,u.useCallback)((function(e,t){O((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,r.Z)({},e,t))}))}),[]),k=(0,u.useCallback)((function(){var e=function(){if(D.notExportHiddenColumns){var e=n.getColumnChooserRef().getColumns().map((function(e){return e.dataField})),t=n.getTableDataModel().columns.reduce((function(t,n){if(!e.includes(n.getName()))return t;var i=n.columnViewModel.defaultValue;return!n.isRequired||void 0!==i&&null!==i?(t.hiddenColumns.push(n.getName()),t.hiddenColumnNames.push(n.getCaption())):t.exportedHiddenColumnsCaption.push(n.getCaption()),t}),{hiddenColumns:[],exportedHiddenColumnsCaption:[],hiddenColumnNames:[]}),i=t.hiddenColumns,o=t.exportedHiddenColumnsCaption,a=t.hiddenColumnNames;return a.length&&E.Z.createNotification({message:(0,f.Z)("NOT_EXPORTED_COLUMNS_$",a.join(", ")),type:R.z.SUCCESS,displayTime:7e3}),o.length&&E.Z.createNotification({message:(0,f.Z)("REQUIRED_COLUMNS_WERE_EXPORTED_$",o.join(", ")),type:R.z.WARNING,displayTime:7e3}),i.join(", ")}return""}(),s=n.getTableDataModel().getTotalRowCount(),r=n.getTableDataModel().columns.length,l=n.getTableDataModel().getPrimaryKeys().length;s>15e3&&r>15&&l>1&&E.Z.createNotification({message:(0,f.Z)("EXPORT_MAY_TAKE_LONG_TIME"),type:R.z.WARNING});var u={csvExportSettings:{fieldSeparator:D.fieldSeparator.value,recordSeparator:D.recordSeparator.value,floatingPointSeparator:D.floatingPointSeparator.value,nullValueEscape:D.nullValueEscape.value},referencesAsIds:D.exportIdsCheckBox,sortByPrimaryKey:D.sortByPrimaryKey,hiddenColumns:e},c=new FormData;c.append("parameters",JSON.stringify(u)),c.append("filter",JSON.stringify(n.getTableDataModel().getAllAppliedFilters()||T.e_.create(null))),c.append("childParentTableInfos",JSON.stringify([])),I.Z.exportTableData(c,i).then(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.t0=S.Z,e.next=4,t.blob();case 4:e.t1=e.sent,e.t2=n.getExportedDataSuggestedName(),(0,e.t0)(e.t1,e.t2);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){return t()}))}),[D]);(0,u.useEffect)((function(){I.Z.retrieveUserSettings("csvExport",i).then((function(e){var t={fieldSeparator:b.find((function(t){return t.value===e.fieldSeparator})),floatingPointSeparator:m.find((function(t){return t.value===e.floatingPointSeparator})),nullValueEscape:g.find((function(t){return t.value===e.nullValueEscape})),recordSeparator:v.find((function(t){return t.value===e.recordSeparator}))};O((function(e){return(0,l.Z)((0,l.Z)({},e),t)}))}))}),[]);var w=(0,C.M)(n.warehouseUiType,x._.EXPORT);return(0,u.useEffect)((function(){var e={fieldSeparator:D.fieldSeparator.value,floatingPointSeparator:D.floatingPointSeparator.value,nullValueEscape:D.nullValueEscape.value,recordSeparator:D.recordSeparator.value};I.Z.storeUserSettings("csvExport",JSON.stringify(e),i)}),[D]),(0,y.jsx)("div",{children:(0,y.jsxs)(d(),{colCount:1,id:"form",children:[(0,y.jsx)(c.SimpleItem,{template:(0,f.Z)("_USE_UTF_8_ENCODING")}),(0,y.jsxs)(c.GroupItem,{colCount:4,children:[(0,y.jsx)(c.GroupItem,{caption:(0,f.Z)("FIELD_SEPARATOR"),children:(0,y.jsx)(h(),{items:b,defaultValue:D.fieldSeparator,value:D.fieldSeparator,layout:"vertical",onValueChanged:function(e){var t=e.value;return _("fieldSeparator",t)}})}),(0,y.jsx)(c.GroupItem,{caption:(0,f.Z)("FLOATING_POINT_SEPARATOR"),children:(0,y.jsx)(h(),{items:m,defaultValue:D.floatingPointSeparator,value:D.floatingPointSeparator,layout:"vertical",onValueChanged:function(e){var t=e.value;return _("floatingPointSeparator",t)}})}),(0,y.jsx)(c.GroupItem,{caption:(0,f.Z)("_NULL_VALUE_ESCAPE"),children:(0,y.jsx)(h(),{items:g,defaultValue:D.nullValueEscape,value:D.nullValueEscape,layout:"vertical",onValueChanged:function(e){var t=e.value;return _("nullValueEscape",t)}})}),(0,y.jsx)(c.GroupItem,{caption:(0,f.Z)("RECORD_SEPARATOR"),children:(0,y.jsx)(h(),{items:v,defaultValue:D.recordSeparator,value:D.recordSeparator,layout:"vertical",onValueChanged:function(e){var t=e.value;return _("recordSeparator",t)}})})]}),(0,y.jsxs)(c.GroupItem,{colCount:3,children:[(0,y.jsx)(c.SimpleItem,{editorType:"dxCheckBox",editorOptions:{text:(0,f.Z)("REFERENCES_ARE_REPRESENTED_AS_IDS"),defaultValue:D.exportIdsCheckBox,value:D.exportIdsCheckBox,onValueChanged:function(e){var t=e.value;return _("exportIdsCheckBox",t)}}}),(0,y.jsx)(c.SimpleItem,{editorType:"dxCheckBox",editorOptions:{text:(0,f.Z)("DO_NOT_EXPORT_HIDDEN_COLUMNS"),defaultValue:D.notExportHiddenColumns,value:D.notExportHiddenColumns,onValueChanged:function(e){var t=e.value;return _("notExportHiddenColumns",t)}}}),(0,y.jsx)(c.SimpleItem,{editorType:"dxCheckBox",editorOptions:{text:(0,f.Z)("SORT_BY_PRIMARY_KEY"),defaultValue:D.sortByPrimaryKey,value:D.sortByPrimaryKey,onValueChanged:function(e){var t=e.value;return _("sortByPrimaryKey",t)}}})]}),(0,y.jsxs)(c.GroupItem,{colCount:2,children:[(0,y.jsx)(c.ButtonItem,{cssClass:"help-button",buttonOptions:{icon:Z.HelpIcon,useSubmitBehavior:!1,onClick:function(){return window.open(w,"_blank")},stylingMode:"text"}}),(0,y.jsx)(c.ButtonItem,{buttonOptions:{type:"success",text:(0,f.Z)("DOWNLOAD"),useSubmitBehavior:!1,onClick:k}})]})]})})},O=n(42982),_=n(5122),k=n(98482),w=n(68418),M=n(58241),N=n(9101),V=n(98826),A=n(42459),L=function(e){var t=e.closeModal,n=e.props,i=n.dbeDxGridInstance,p=n.tableInstance,h=(0,k.mN)(p),b=(0,s.Z)(h,1)[0],m=(0,k.rK)(p),g=(0,s.Z)(m,1)[0],v=(0,k.D1)(p),B=(0,s.Z)(v,1)[0],S=(0,u.useState)((function(){return p.isAutoRefresh})),T=(0,s.Z)(S,2),E=T[0],R=T[1],D=(0,k.rV)(i,p),L=(0,u.useCallback)(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){var i,a,u,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),i=document.forms.namedItem("tableSettingsForm"),a=new FormData(i),u=(0,O.Z)(a.entries()).reduce((function(e,t){var n=(0,s.Z)(t,2),i=n[0],o=n[1];return(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},i,(0,w.gx)(o)))}),{}),c=(0,l.Z)((0,l.Z)({},u),{},{defaultFilter:p.getFilters().find((function(e){return e.settingId===u.defaultFilter})),defaultHiddenColumnFilter:p.getHiddenColumns().find((function(e){return e.settingId===u.defaultHiddenColumnFilter})),defaultSortOrder:p.getSortOrderSettings().find((function(e){return e.settingId===u.defaultSortOrder}))}),p.tableRelatedUserParameters.saveSettings(c),D(c),e.next=9,I.Z.updateDxDbeTableSettings(p.table.getTableId(),c);case 9:t();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),P=(0,C.M)(p.warehouseUiType,x._.SETTINGS),j=(0,u.useCallback)((function(){(0,A.iG)((0,f.Z)("Are you sure you want to reset all table settings?"),"W2MO").then((function(e){e&&p.getDxGridCommonSettings().resetSettingsToDefault().then((function(){(0,A.iG)((0,f.Z)("For applying changes you need to reload the page. <br> Reload page now?"),"W2MO").then((function(e){e&&window.location.reload()}))}))}))}),[]);return(0,y.jsx)(u.Fragment,{children:(0,y.jsx)("form",{action:"src/Components/modals/index",onSubmit:L,id:"tableSettingsForm",children:(0,y.jsxs)(d(),{children:[(0,y.jsx)(c.SimpleItem,{dataField:"tabTitle",editorType:M.Z.SelectBox,label:{text:(0,f.Z)("TAB_TITLE")},editorOptions:{items:_.PW,displayExpr:"name",valueExpr:"id",value:p.tabTitle}}),(0,y.jsx)(c.SimpleItem,{dataField:"defaultFilter",editorType:M.Z.SelectBox,label:{text:(0,f.Z)("DEFAULT_FILTER")},editorOptions:{dataSource:b,grouped:!0,displayExpr:"settingName",valueExpr:"settingId",value:p.defaultFilter?p.defaultFilter.settingId:V.Mm}}),(0,y.jsx)(c.SimpleItem,{dataField:"defaultHiddenColumnFilter",editorType:M.Z.SelectBox,label:{text:(0,f.Z)("DEFAULT_HIDDEN_COLUMNS")},editorOptions:{dataSource:B,grouped:!0,displayExpr:"settingName",valueExpr:"settingId",value:p.defaultHiddenColumn?p.defaultHiddenColumn.settingId:V.Mm}}),(0,y.jsx)(c.SimpleItem,{dataField:"defaultSortOrder",editorType:M.Z.SelectBox,label:{text:(0,f.Z)("DEFAULT_SORTING")},editorOptions:{dataSource:g,grouped:!0,displayExpr:"settingName",valueExpr:"settingId",value:p.defaultSortOrder?p.defaultSortOrder.settingId:V.Mm}}),(0,y.jsx)(c.SimpleItem,{dataField:"pageSize",editorType:M.Z.NumberBox,label:{text:(0,f.Z)("DEFAULT_PAGE_SIZE")},editorOptions:{value:p.pageSize},children:(0,y.jsx)(N.RangeRule,{max:p.table.getMaxPageSize(),min:1,message:(0,f.Z)((0,f.Z)("VALUE_SHOULD_BE_NUMERIC_AND_NOT_BIGGER_THAN_$",p.table.getMaxPageSize()))})}),(0,y.jsx)(c.SimpleItem,{dataField:"isAutoRefresh",editorType:M.Z.CheckBox,label:{text:(0,f.Z)("AUTO_REFRESH")},editorOptions:{value:E,onValueChanged:function(e){R(e.value)}}}),E&&(0,y.jsx)(c.SimpleItem,{dataField:"intervalInSeconds",editorType:M.Z.NumberBox,label:{text:(0,f.Z)("INTERVAL_IN_SECONDS")},editorOptions:{value:p.intervalInSeconds},children:(0,y.jsx)(N.RangeRule,{max:p.table.getMaxPageSize(),min:10,message:(0,f.Z)((0,f.Z)("VALUE_SHOULD_BE_NUMERIC_AND_IN_RANGE_$_$",10,5e3))})}),(0,y.jsx)(c.SimpleItem,{dataField:"lastSelectionMode",editorType:M.Z.CheckBox,label:{text:(0,f.Z)("LAST_SELECTION_MODE")},editorOptions:{value:p.lastSelectionMode}}),(0,y.jsx)(c.ButtonItem,{colSpan:2,horizontalAlignment:"right",buttonOptions:{type:"success",text:(0,f.Z)("RESET_TABLE_DYNAMICAL_SETTINGS_TO_DEFAULT"),useSubmitBehavior:!1,onClick:function(){return j()},stylingMode:"outlined"}}),(0,y.jsxs)(c.GroupItem,{colCount:2,children:[(0,y.jsx)(c.ButtonItem,{colSpan:1,cssClass:"help-button",horizontalAlignment:"left",buttonOptions:{icon:Z.HelpIcon,useSubmitBehavior:!1,onClick:function(){return window.open(P,"_blank")},stylingMode:"text"}}),(0,y.jsx)(c.ButtonItem,{verticalAlignment:"center",colSpan:1,horizontalAlignment:"right",buttonOptions:{type:"success",text:(0,f.Z)("APPLY"),useSubmitBehavior:!0}})]})]})})})},P=n(8047),j=n.n(P),F=n(15671),U=n(43144),G=n(42175),H=n(50649),K=n.n(H),W=n(67789),z=n.n(W),Y=function(){function e(){(0,F.Z)(this,e)}return(0,U.Z)(e,null,[{key:"getNotificationSeverityForImport",value:function(e){switch(e){case"ALL_RECORDS_LOADED":return{severity:R.z.SUCCESS,text:"_UPLOAD_SUCCESSFUL"};case"NOT_ALL_RECORDS_LOADED":return{severity:R.z.WARNING,text:"_UPLOAD_PARTLY_SUCCESSFUL"};default:return{severity:R.z.ERROR,text:""}}}},{key:"createNotificationHeader",value:function(e,t,n){var i=(0,f.Z)("ROWS_IMPORTED_$",t),o=(0,f.Z)("ROWS_FAILED_$",e);return(0,y.jsxs)("div",{className:"notification-content-header",children:[n?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{children:(0,y.jsx)("b",{children:(0,f.Z)(n)})}),(0,y.jsx)("br",{})]}):null,(0,y.jsx)("span",{children:i}),(0,y.jsx)("br",{}),(0,y.jsx)("span",{children:o})]})}},{key:"createNotificationBody",value:function(e,t){return 1===e.length&&null===e[0].recordNumber?(0,y.jsxs)("div",{className:"notification-content-body",children:[t.length?(0,y.jsx)("span",{children:t.join(", ")}):null,(0,y.jsx)("span",{children:e[0].failedReason})]}):(0,y.jsxs)("div",{className:"notification-content-body",children:[e.length?(0,y.jsx)(z(),{dataSource:[e],collapsible:!0,animationDuration:1e3,itemTitleRender:function(){return(0,y.jsx)("span",{children:(0,f.Z)("SHOW_FIRST_$_FAILED_RECORDS",e.length)})},itemRender:function(e){return e.map((function(e,t){var n=e.failedReason,i=e.recordNumber;return(0,y.jsxs)(u.Fragment,{children:[(0,y.jsxs)("span",{children:[(0,f.Z)("RECORD_$",i),": ",n]}),(0,y.jsx)("br",{})]},t)}))},id:"notification-content-accordion-body"}):null,t.length?(0,y.jsx)(z(),{dataSource:[t],animationDuration:1e3,collapsible:!0,itemTitleRender:function(){return(0,y.jsx)("span",{children:(0,f.Z)("SKIPPED_COLUMNS_$","")})},itemRender:function(e){return(0,y.jsx)("span",{children:e.join(", ")})},id:"notification-content-accordion-skipped-cols"}):null]})}},{key:"parseImportResult",value:function(t){var n=new E.Z,i=t.result,o=i.failedRecords,a=i.importedRecords,s=i.isRightSeparator,r=i.resultBody,l=i.resultHeader,u=i.skippedColumnNames,c=i.postProcessingResult,d=e.getNotificationSeverityForImport(l),p=d.severity,h=d.text;s||n.createNotification({message:(0,f.Z)("FIELD_SEPARATOR_IS_WRONG"),type:R.z.WARNING});n.createNotification({Content:function(){return(0,y.jsxs)("div",{className:"notification-content",children:[e.createNotificationHeader(o,a,h),e.createNotificationBody(r,u)]})},type:p,displayTime:1e4,hasCopyButton:!1}),c.forEach((function(e){var t=f.Z.apply(void 0,[e.alias].concat((0,O.Z)(e.parameters.split(",")||[])));n.createNotification({message:t,type:e.severity,displayTime:1e4,hasCopyButton:!1})}))}},{key:"getDataFormatsTooltip",value:function(e,t){var n=function(e,t,n){return{letter:e,desc:(0,f.Z)(t),example:n}},i=[n("G","ERA_DESIGNATOR","AD"),n("y","YEAR","1996; 96"),n("Y","WEEK_YEAR","2009; 09"),n("M","MONTH_IN_YEAR","July; Jul; 07"),n("w","WEEK_IN_YEAR","27"),n("W","WEEK_IN_MONTH","2"),n("D","DAY_IN_YEAR","189"),n("d","DAY_IN_MONTH","10"),n("F","DAY_OF_WEEK_IN_MONTH","2"),n("E","DAY_NAME_IN_WEEK","Tuesday; Tue"),n("u","_DAY_NUMBER_OF_WEEK","1"),n("a","_AM_PM_MARKER","PM"),n("H","_HOUR_IN_DAY_0","0"),n("k","_HOUR_IN_DAY_1","24"),n("K","_HOUR_IN_AM_PM_0","0"),n("h","_HOUR_IN_AM_PM_1","12"),n("m","MINUTE_IN_HOUR","30"),n("s","SECOND_IN_MINUTE","55"),n("S","MILLISECOND","978"),n("z","TIME_ZONE","PST;\xa0GMT-08:00"),n("Z","TIME_ZONE","-800"),n("X","TIME_ZONE","-08;\xa0-0800;\xa0-08:00")];return(0,y.jsx)("div",{children:(0,y.jsx)(G.Tooltip,{target:e,position:"right",visible:t,hideOnOutsideClick:!1,children:(0,y.jsxs)(K(),{dataSource:i,allowColumnReordering:!1,rowAlternationEnabled:!0,showBorders:!1,width:450,children:[(0,y.jsx)(H.Selection,{mode:"single"}),(0,y.jsx)(H.Paging,{defaultPageSize:100}),(0,y.jsx)(H.Column,{dataField:"letter",caption:(0,f.Z)("LETTER"),width:40}),(0,y.jsx)(H.Column,{dataField:"desc",caption:(0,f.Z)("DATE_OR_TIME_COMPONENT"),width:270}),(0,y.jsx)(H.Column,{dataField:"example",caption:(0,f.Z)("EXAMPLES")})]})})})}}]),e}(),$=n(48573),X=n.n($),q=X()((function(){(new E.Z).createNotification({message:(0,f.Z)("SEPARATORS_CAN_NOT_BE_THE_SAME"),type:R.z.WARNING})}),300),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?[{text:(0,f.Z)("CLOSE"),onClick:function(t){e&&e(t)}}]:[];return(0,A.PG)({messageHtml:'<img src="" alt="progress bar"/>',showTitle:!1,buttons:t})},Q=function(e){var t=e.closeModal,n=e.props,i=n.getDbeDxGridInstance,p=n.tableInstance,v=(0,u.useMemo)((function(){return p.getTableName()}),[]),S=(0,u.useState)(!1),T=(0,s.Z)(S,2),E=T[0],R=T[1],D=(0,u.useState)((function(){return{fieldSeparator:b[0],floatingPointSeparator:m[0],nullValueEscape:g[0],thousandSeparator:B[0],importDataFile:null,customDateFormat:"yyyy-MM-dd HH:mm:ss",useCustomDateFormat:!1,exportIdsCheckBox:!1,updateIfExistCheckBox:!1,oldImportTypeCheckBox:!1}})),O=(0,s.Z)(D,2),_=O[0],k=O[1];(0,u.useEffect)((function(){I.Z.retrieveUserSettings("csvImport",v).then((function(e){var t={fieldSeparator:b.find((function(t){return t.value===e.fieldSeparator})),floatingPointSeparator:m.find((function(t){return t.value===e.floatingPointSeparator})),nullValueEscape:g.find((function(t){return t.value===e.nullValueEscape})),thousandSeparator:B.find((function(t){return t.value===e.thousandSeparator}))};k((function(e){return(0,l.Z)((0,l.Z)({},e),t)}))}))}),[]);var w=(0,u.useMemo)((function(){var e=[_.fieldSeparator.value,_.floatingPointSeparator.value,_.thousandSeparator.value];return new Set(e).size!==e.length}),[_]);(0,u.useEffect)((function(){var e,t,n,i,o={fieldSeparator:null===(e=_.fieldSeparator)||void 0===e?void 0:e.value,thousandSeparator:null===(t=_.thousandSeparator)||void 0===t?void 0:t.value,floatingPointSeparator:null===(n=_.floatingPointSeparator)||void 0===n?void 0:n.value,nullValueEscape:null===(i=_.nullValueEscape)||void 0===i?void 0:i.value};I.Z.storeUserSettings("csvImport",JSON.stringify(o),v)}),[_,w]);var M=(0,u.useCallback)((0,a.Z)((0,o.Z)().mark((function e(){var n,s,r,l,u,c,d,p,h;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),i().beginCustomLoading((0,f.Z)("DATA_IMPORTING")+"..."),u={fieldSeparator:null===(n=_.fieldSeparator)||void 0===n?void 0:n.value,thousandSeparator:null===(s=_.thousandSeparator)||void 0===s?void 0:s.value,floatingPointSeparator:null===(r=_.floatingPointSeparator)||void 0===r?void 0:r.value,nullValueEscape:null===(l=_.nullValueEscape)||void 0===l?void 0:l.value},c={csvImportSettings:u,referencesAsIds:_.exportIdsCheckBox,updateIfExist:_.updateIfExistCheckBox,oldImportType:_.oldImportTypeCheckBox,dateFormatPattern:_.customDateFormat},(d=new FormData).append("parameters",JSON.stringify(c)),d.append("uploadFile",_.importDataFile[0]),e.next=9,I.Z.importTableData(d,v);case 9:p=e.sent,i().endCustomLoading((0,f.Z)("DATA_IMPORTING")+"..."),(h=J((function(){return I.Z.cancelLongTermAction(p)}))).show(),I.Z.startLongTerm(p).then(Y.parseImportResult).finally((0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.hide(),e.next=3,i().refresh(!1);case 3:case"end":return e.stop()}}),e)}))));case 14:case"end":return e.stop()}}),e)}))),[_]),N=(0,u.useCallback)((function(e,t){var n;null!==(n=_[e])&&void 0!==n&&n.isEqual(t)||k((function(n){var i=(0,l.Z)((0,l.Z)({},n),{},(0,r.Z)({},e,t));return w&&q(),i}))}),[_,w]),V=(0,C.M)(p.warehouseUiType,x._.IMPORT);return(0,y.jsxs)("div",{id:"import-modal-wrapper",children:[Y.getDataFormatsTooltip(".dateFormat",E),(0,y.jsxs)(d(),{colCount:1,id:"import-data-form",children:[(0,y.jsx)(c.SimpleItem,{template:(0,f.Z)("_USE_UTF_8_ENCODING")}),(0,y.jsxs)(c.GroupItem,{colCount:4,children:[(0,y.jsx)(c.GroupItem,{caption:(0,f.Z)("FIELD_SEPARATOR"),children:(0,y.jsx)(h(),{items:b,defaultValue:_.fieldSeparator,value:_.fieldSeparator,layout:"vertical",onValueChanged:function(e){var t=e.value;return N("fieldSeparator",t)}})}),(0,y.jsx)(c.GroupItem,{caption:(0,f.Z)("THOUSANDS_SEPARATOR"),children:(0,y.jsx)(h(),{items:B,defaultValue:_.thousandSeparator,value:_.thousandSeparator,layout:"vertical",onValueChanged:function(e){var t=e.value;return N("thousandSeparator",t)}})}),(0,y.jsx)(c.GroupItem,{caption:(0,f.Z)("FLOATING_POINT_SEPARATOR"),children:(0,y.jsx)(h(),{items:m,defaultValue:_.floatingPointSeparator,value:_.floatingPointSeparator,layout:"vertical",onValueChanged:function(e){var t=e.value;return N("floatingPointSeparator",t)}})}),(0,y.jsx)(c.GroupItem,{caption:(0,f.Z)("_NULL_VALUE_ESCAPE"),children:(0,y.jsx)(h(),{items:g,defaultValue:_.nullValueEscape,value:_.nullValueEscape,layout:"vertical",onValueChanged:function(e){var t=e.value;return N("nullValueEscape",t)}})})]}),(0,y.jsx)(c.GroupItem,{children:(0,y.jsx)(j(),{selectButtonText:"Select file",labelText:"or Drop file here",accept:"text/csv",uploadMode:"useForm",onValueChanged:function(e){var t=e.value;return N("importDataFile",t)}})}),(0,y.jsxs)(c.GroupItem,{colCount:4,children:[(0,y.jsx)(c.SimpleItem,{editorType:"dxCheckBox",editorOptions:{text:(0,f.Z)("_CUSTOM_DATE_FORMAT"),defaultValue:_.useCustomDateFormat,value:_.useCustomDateFormat,onValueChanged:function(e){var t=e.value;return N("useCustomDateFormat",t)}}}),(0,y.jsx)(c.SimpleItem,{editorType:"dxTextBox",cssClass:"dateFormat",editorOptions:{defaultValue:_.customDateFormat,value:_.customDateFormat,readOnly:!_.useCustomDateFormat,disabled:!_.useCustomDateFormat,onFocusIn:function(){return R(!0)},onFocusOut:function(){return R(!1)}}})]}),(0,y.jsx)(c.GroupItem,{colCount:1,children:(0,y.jsx)("div",{style:{display:_.useCustomDateFormat?"block":"none"},children:(0,y.jsx)("div",{className:"custom-date-notifier",children:(0,f.Z)("_CUSTOM_DATE_FORMAT_HINT")})})}),(0,y.jsxs)(c.GroupItem,{colCount:3,children:[(0,y.jsx)(c.SimpleItem,{editorType:"dxCheckBox",editorOptions:{text:(0,f.Z)("REFERENCES_ARE_REPRESENTED_AS_IDS"),defaultValue:_.exportIdsCheckBox,value:_.exportIdsCheckBox,onValueChanged:function(e){var t=e.value;return N("exportIdsCheckBox",t)}}}),(0,y.jsx)(c.SimpleItem,{editorType:"dxCheckBox",editorOptions:{text:(0,f.Z)("UPDATE_IF_EXIST"),defaultValue:_.updateIfExistCheckBox,value:_.updateIfExistCheckBox,onValueChanged:function(e){var t=e.value;return N("updateIfExistCheckBox",t)}}}),(0,y.jsx)(c.SimpleItem,{editorType:"dxCheckBox",editorOptions:{text:(0,f.Z)("USE_IMPORT_DATA_TEMPLATE"),defaultValue:_.oldImportTypeCheckBox,value:_.oldImportTypeCheckBox,onValueChanged:function(e){var t=e.value;return N("oldImportTypeCheckBox",t)}}})]}),(0,y.jsxs)(c.GroupItem,{colCount:2,children:[(0,y.jsx)(c.ButtonItem,{cssClass:"help-button",buttonOptions:{icon:Z.HelpIcon,useSubmitBehavior:!1,onClick:function(){return window.open(V,"_blank")},stylingMode:"text"}}),(0,y.jsx)(c.ButtonItem,{buttonOptions:{type:"success",text:(0,f.Z)("UPLOAD"),useSubmitBehavior:!1,onClick:M,disabled:!_.importDataFile||w}})]})]})]})},ee=n(60545),te=function(e){var t=e.closeModal,n=e.props,i=n.applySetting,o=n.type,a=n.repaintDropDown,r=n.unfilter,p=n.tableInstance,h=n.helpKey,b=n.dbeDxGridRef,m=rt().openModalWithProps,g=(0,u.useState)(V.fD[0].value),v=(0,s.Z)(g,2),B=v[0],I=v[1],S=(0,u.useRef)(),x=(0,u.useState)(null),T=(0,s.Z)(x,2),E=T[0],R=T[1],D=(0,k.wS)(o)(p,b,B!==V.fD[1].value),O=D.buttonName,_=D.settingElements,w=D.addSetting,N=D.editSetting,A=D.deleteSetting,L=D.builderKey,P=D.setSelectedSetting,j=D.shareUnshareSetting,F=D.checkSelectedSetting,U=D.createNewSetting,G=D.title,W=D.getTheBiggestObjectId,z=D.isNameExists,Y=D.getNextSettingName,$=(0,k.L5)(p,_,N,j),X=(0,s.Z)($,2),q=X[0],J=X[1],Q=(0,C.M)(p.warehouseUiType,h);return(0,y.jsxs)("div",{children:[(0,y.jsxs)(d(),{colCount:5,children:[(0,y.jsx)(c.SimpleItem,{colSpan:4,editorType:M.Z.RadioGroup,editorOptions:{layout:"horizontal",value:B,valueExpr:"value",items:V.fD,onValueChanged:function(e){I(e.value)}}}),(0,y.jsx)(c.ButtonItem,{colSpan:1,buttonOptions:{text:(0,f.Z)("ADD"),type:"normal",stylingMode:"contained",useSubmitBehavior:!1,disabled:B===V.fD[1].value,icon:"add",onClick:function(){m(ee.Z.ADD_NEW_SETTINGS_MODAL,{width:700,hideOnOutsideClick:!1,saveSetting:w,dataGridRefSettings:S,setDataSource:J,builderKey:L,modalTitle:G,createNewSetting:U,getTheBiggestObjectId:W,tableInstance:p,isNameExists:z,getNextSettingName:Y,buttonName:O})}}})]}),(0,y.jsxs)(K(),{className:"settings-list",ref:S,dataSource:q,showRowLines:!0,allowColumnResizing:!0,onSelectionChanged:function(e){R(e.selectedRowsData[0])},onRowRemoved:function(e){var t=e.data;A(t),a(_),F(t.settingId)&&r()},onRowInserted:function(){return a()},children:[(0,y.jsx)(H.Editing,{allowUpdating:B,allowAdding:!1,allowDeleting:B,mode:"cell",refreshMode:"repaint",startEditAction:"dblClick"}),(0,y.jsx)(H.Selection,{mode:"single",showCheckBoxesMode:"none"}),(0,y.jsx)(H.Paging,{defaultPageSize:10}),(0,y.jsx)(H.Pager,{visible:!0,displayMode:!0,showInfo:!0,showNavigationButtons:!0}),(0,y.jsx)(H.Column,{allowEditing:B,dataField:"settingName",dataType:"string",caption:(0,f.Z)("NAME"),children:(0,y.jsx)(H.RequiredRule,{})}),(0,y.jsx)(H.Column,{allowEditing:B,dataField:"isPublic",dataType:"boolean",caption:(0,f.Z)("PUBLIC")}),(0,y.jsx)(H.Column,{allowEditing:B,dataField:"isShared",dataType:"boolean",caption:(0,f.Z)("SHARED")}),(0,y.jsx)(H.Column,{allowEditing:!1,dataField:"description",dataType:"string",caption:(0,f.Z)("DESCRIPTION")}),(0,y.jsx)(H.Column,{dataField:"setting",allowEditing:!1,cellRender:function(e){return(0,y.jsx)("div",{className:"foreign-key-btn",onClick:function(){B&&m(ee.Z.EDIT_SETTING_MODAL,(0,l.Z)({width:700,hideOnOutsideClick:!1,builderKey:L,modalTitle:e.data.settingName,tableInstance:p},e))},children:(0,y.jsx)("span",{children:(0,f.Z)("EDIT_FILTER")})})}})]}),(0,y.jsxs)(d(),{colCount:2,children:[(0,y.jsx)(c.ButtonItem,{colSpan:1,cssClass:"help-button",buttonOptions:{icon:Z.HelpIcon,useSubmitBehavior:!1,onClick:function(){return window.open(Q,"_blank")},stylingMode:"text"}}),(0,y.jsx)(c.ButtonItem,{colSpan:1,buttonOptions:{activeStateEnabled:!1,text:(0,f.Z)("APPLY"),useSubmitBehavior:!1,stylingMode:"contained",type:"success",disabled:!E,onClick:function(){t(),P(E),i(E)}}})]})]})},ne=function(e){var t=e.props,n=t.tableInstance,i=t.filterString,r=e.closeModal,l=(0,u.useState)(new URL(window.location.toString())),p=(0,s.Z)(l,2),h=p[0],b=p[1];(0,u.useEffect)((function(){console.log("filterString",i),i.length<=T.e_.MAX_LENGTH_URL_FILTER?b((function(e){var t=new URL(e);return t.searchParams.delete("filter"),t.searchParams.append("filter",i),t})):E.Z.createNotification({message:(0,f.Z)("DATA_IS_TOO_LONG_FOR_URL_FILTER"),type:R.z.ERROR})}),[i]);var m=(0,C.M)(n.warehouseUiType,x._.LINK_WITH_FILTER);return(0,y.jsxs)(d(),{children:[(0,y.jsx)(c.SimpleItem,{editorType:M.Z.TextBox,editorOptions:{value:h.toString(),readOnly:!0,onFocusIn:function(e){e.element.getElementsByTagName("input")[0].select()}}}),(0,y.jsxs)(c.GroupItem,{colSpan:2,colCount:2,children:[(0,y.jsx)(c.ButtonItem,{cssClass:"help-button",buttonOptions:{icon:Z.HelpIcon,useSubmitBehavior:!1,onClick:function(){return window.open(m,"_blank")},stylingMode:"text"}}),(0,y.jsx)(c.ButtonItem,{buttonOptions:{type:"success",text:(0,f.Z)("COPY"),stylingMode:"contained",useSubmitBehavior:!1,onClick:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(h.toString());case 2:r();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}})]})]})},ie=n(8140),oe=n(57295),ae=(n(13486),n(73261)),se=n.n(ae),re=(n(85841),n(68583),n(14042),function(e){var t=e.props,n=e.closeModal,i=e.setLoading,o=e.isLoading,a=t.tableId,p=t.actionId,h=t.selectedRows,b=t.executeTableAction,m=t.link,g=t.tableInstance,v=t.confirmationRequired,B=(0,k.hZ)(g,m),S=(0,s.Z)(B,1)[0],C=(0,u.useRef)([]),x=(0,u.useRef)([]),E=(0,u.useState)([]),R=(0,s.Z)(E,2),D=R[0],_=R[1],M=(0,u.useState)(null),N=(0,s.Z)(M,2),V=N[0],L=N[1],P=(0,u.useRef)(),j=(0,u.useState)((function(){return h||{}})),F=(0,s.Z)(j,2),U=F[0],G=F[1],H=(0,u.useCallback)((function(e){if(P.current.instance.validate().isValid){e.preventDefault();var t=new FormData(e.target),i=(0,O.Z)(t.entries()).reduce((function(e,t){var n=(0,s.Z)(t,2),i=n[0],o=n[1];return(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},i,o))}),{}),o=Object.assign(U,i),a=x.current.reduce((function(e,t){return(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},t,o[t]))}),{});b(a,n)}}),[U]),K=(0,u.useMemo)((function(){return C.current.every((function(e){if(e.getIsRequired()){var t=e.getName();if(e.getCellType()===oe.Z.FOREIGN_KEY_CELL&&V&&Object.hasOwn(V,t)){var n=V[t];return!(n&&Object.values(n).every((function(e){return(0,w.$K)(e)})))}return!0}return!1}))}),[C,C.current,V,U]),W=(0,u.useCallback)((function(e,t,n,i){G((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},e,i))})),L((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,r.Z)({},e,t))}))}),[U]);(0,u.useEffect)((function(){I.Z.getTableActionParameterModels(a,p).then((function(e){var t=T.Iv.createInputParametersModels(e,(function(){return g.getMetadata()})).map((function(e){return e.setActionId(p),(0,ie.Z)(e,T.Iv)}));t.map((function(e){e.getDependsOnParamsList().map((function(t){var n=(0,s.Z)(t,2),i=n[0];(n[1]?!e.getDefaultValue():e.getDefaultValue())&&_((function(e){return[].concat((0,O.Z)(e),[i])}))}))})),x.current=t.map((function(e){return e.getName()})),C.current=t,i(!0)}))}),[a,p]);var z=(0,u.useMemo)((function(){return C.current.reduce((function(e,t){return(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},t.parameterName,t))}),{})}),[C]),Y=(0,u.useCallback)((function(e,t){t.getDependsOnParamsList().map((function(t){var n,i,o,a=(0,s.Z)(t,2),r=a[0],l=a[1];null===P||void 0===P||null===(n=P.current)||void 0===n||null===(i=n.instance)||void 0===i||null===(o=i.getEditor(r))||void 0===o||o.option("disabled",l?!e.value:e.value)}))}),[]);return o?(0,y.jsx)(u.Fragment,{children:(0,y.jsx)("form",{action:"src/Components/modals/index",onSubmit:function(e){v?(0,A.iG)((0,f.Z)("_CHECK_EXECUTION_ACTION"),"W2MO").then((function(t){t&&H(e)})):H(e)},id:"tableActionForm",children:(0,y.jsxs)(d(),{colCount:1,formData:z,ref:P,children:[C.current.map((function(e){var t=U&&Object.hasOwn(U,e.getName())?U[e.getName()]:e.getDefaultValue();return e.getCellType()===oe.Z.FOREIGN_KEY_CELL?(0,y.jsx)(c.SimpleItem,(0,l.Z)((0,l.Z)({},e.getInputParameters()),{},{component:e.getFormCellRender(Object.assign(V&&V[e.getName()]||{},U)),editorOptions:(0,l.Z)((0,l.Z)({setParameters:function(t,n,i){return W(e.getName(),t,n,i)}},e.getEditorOptionsForInputParameters()),{},{value:t})})):(0,y.jsx)(c.SimpleItem,{name:e.getName(),dataField:e.getName(),editorType:e.getViewModel().getInputType(),label:{text:e.getCaption()},editorOptions:(0,l.Z)((0,l.Z)({},e.getEditorOptionsForInputParameters()),{},{value:t,onValueChanged:function(t){G((function(n){return(0,l.Z)((0,l.Z)({},n),{},(0,r.Z)({},e.getName(),t.value))})),Y(t,e)},disabled:D.includes(e.getName())}),children:e.getChildren()},e.getName())})),(0,y.jsxs)(c.GroupItem,{colCount:S?2:1,children:[S&&(0,y.jsx)(c.ButtonItem,{cssClass:"help-button",buttonOptions:{icon:Z.HelpIcon,useSubmitBehavior:!1,onClick:function(){return window.open(S,"_blank")},stylingMode:"text"}}),(0,y.jsx)(c.ButtonItem,{buttonOptions:{type:"success",text:(0,f.Z)("_EXECUTE_BUTTON"),useSubmitBehavior:!0,disabled:K}})]})]})})}):null}),le=n(54965),ue=n.n(le),ce=n(67182),de=n(57744),pe=n(6123),he=function(e){var t=e.data,n=e.column,i=(0,u.useState)((function(){return t.value||""})),o=(0,s.Z)(i,2),a=o[0],r=o[1],l=(0,u.useMemo)((function(){var e=n.getViewModel().getInputType();return e===M.Z.TextBox||e===M.Z.NumberBox?e:M.Z.TextBox}),[]);return(0,y.jsx)(d(),{children:(0,y.jsx)(c.SimpleItem,{editorType:l,editorOptions:{value:a,onValueChanged:function(e){r(e.value),t.setValue(e.value)}}})})},fe=function(e){var t=e.tableInstance,n=e.defaultValue,i=e.getSettingChanges,o=(0,u.useRef)(),a=(0,u.useState)((function(){return n&&T.e_.parseFilterGroupToDxFilter(n)})),r=(0,s.Z)(a,2),c=r[0],d=r[1],p=(0,u.useMemo)((function(){return t.getTableDataModel().getSortedColumn()}),[]),h=(0,u.useCallback)((function(e){return p.find((function(t){return t.getName()===e}))}),[p]),b=(0,u.useCallback)((function(){var e,t=null===o||void 0===o||null===(e=o.current)||void 0===e?void 0:e.instance.getFilterExpression();return t&&T.e_.createFilterGroup(t)}),[]);return(0,u.useEffect)((function(){c&&c[1]===de.r.BETWEEN?i(b()):c&&i(T.e_.createFilterGroup(c,null,(function(e){return Array.isArray(e)?null===e||void 0===e?void 0:e.map((function(e){return e instanceof Object&&Object.hasOwn(e,"foreignButtonId")?null===e||void 0===e?void 0:e.foreignButtonId:e})):e instanceof Object&&Object.hasOwn(e,"foreignButtonId")?null===e||void 0===e?void 0:e.foreignButtonId:e})))}),[c,o,b]),(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(ue(),{ref:o,value:c,onValueChanged:function(e){d(e.value)},children:[p.map((function(e){return(0,y.jsx)(le.Field,(0,l.Z)({},e.getColumnParametersForFilterSetting()))})),(0,y.jsx)(le.CustomOperation,{name:"anyof",caption:(0,f.Z)("IS_ANY_OF"),icon:"check",editorRender:function(e){var t=h(e.field.dataField);return(0,y.jsx)(ce.Z,{data:e,column:t})}}),(0,y.jsx)(le.CustomOperation,{name:"noneof",caption:(0,f.Z)("IS_NONE_OF"),icon:"close",editorRender:function(e){var t=h(e.field.dataField);return(0,y.jsx)(ce.Z,{data:e,column:t})}}),(0,y.jsx)(le.CustomOperation,{name:"searchintext",caption:(0,f.Z)("SEARCH_IN_TEXT"),icon:"search",editorRender:function(e){return(0,y.jsx)(pe.Z,{data:e})}}),(0,y.jsx)(le.CustomOperation,{name:"startswith",caption:(0,f.Z)("STARTS_WITH"),icon:"startswith",editorRender:function(e){var t=h(e.field.dataField);return(0,y.jsx)(he,{data:e,column:t})}}),(0,y.jsx)(le.CustomOperation,{name:"endswith",caption:(0,f.Z)("ENDS_WITH"),icon:"endswith",editorRender:function(e){var t=h(e.field.dataField);return(0,y.jsx)(he,{data:e,column:t})}}),(0,y.jsx)(le.CustomOperation,{name:"contains",caption:(0,f.Z)("CONTAINS"),icon:"contains",editorRender:function(e){var t=h(e.field.dataField);return(0,y.jsx)(he,{data:e,column:t})}}),(0,y.jsx)(le.CustomOperation,{name:"notcontains",caption:(0,f.Z)("IS_NOT_LIKE"),icon:"doesnotcontain",editorRender:function(e){return(0,y.jsx)(pe.Z,{data:e})}})]})})},be=n(1099),me=function(e){var t=e.item,n=e.setSortSettings,i=e.sortSettingsKeys,o=e.tableInstance,a=(0,s.Z)(t,2),r=a[0],l=a[1],p=(0,u.useMemo)((function(){return o.getTableDataModel().getSortedColumn().filter((function(e){return!i.includes(e.columnName)||r===e.columnName}))}),[r]),h=(0,u.useMemo)((function(){return[{sortOrderName:(0,f.Z)("_DESC"),key:be.J9.DESCENDING},{sortOrderName:(0,f.Z)("_ASC"),key:be.J9.ASCENDING}]}),[]);return(0,y.jsxs)(d(),{colCount:11,style:{marginTop:"10px"},children:[(0,y.jsx)(c.SimpleItem,{colSpan:5,editorType:M.Z.SelectBox,editorOptions:{items:p,searchMode:"contains",searchEnabled:!0,searchExpr:function(e){return e.getCaption()},displayExpr:function(e){return null===e||void 0===e?void 0:e.getCaption()},valueExpr:"columnName",value:r,onValueChanged:function(e){var t=e.previousValue,i=e.value;n((function(e){var n=e.findIndex((function(e){return e[0]===t}));return[].concat((0,O.Z)(e.slice(0,n)),[[i,l]],(0,O.Z)(e.slice(n+1)))}))}},children:(0,y.jsx)(c.RequiredRule,{})}),(0,y.jsx)(c.SimpleItem,{colSpan:5,editorType:M.Z.SelectBox,editorOptions:{items:h,displayExpr:"sortOrderName",valueExpr:"key",value:l,onValueChanged:function(e){var t=e.value;n((function(e){var n=e.findIndex((function(e){return e[0]===r}));return[].concat((0,O.Z)(e.slice(0,n)),[[r,t]],(0,O.Z)(e.slice(n+1)))}))}}}),(0,y.jsx)(c.ButtonItem,{colSpan:1,buttonOptions:{icon:Z.Close,useSubmitBehavior:!1,onClick:function(){n((function(e){return(0,O.Z)(e).filter((function(e){return(0,s.Z)(e,1)[0]!==r}))}))},stylingMode:"text"}})]})},ge=function(e){var t=e.tableInstance,n=e.defaultValue,i=e.getSettingChanges,o=(0,u.useState)([]),a=(0,s.Z)(o,2),l=a[0],p=a[1],h=(0,u.useState)((function(){return t.getTableDataModel().getSortedColumn()})),b=(0,s.Z)(h,2),m=b[0],g=b[1];return(0,u.useEffect)((function(){p((function(){return(n?Object.entries(n):Object.entries((0,r.Z)({},m[0].columnName,be.J9.DESCENDING))).sort((function(e,t){var n=(0,s.Z)(e,1)[0],i=(0,s.Z)(t,1)[0];return n<i?-1:n>i?1:0}))}))}),[n]),(0,u.useEffect)((function(){g((function(e){return e.filter((function(e){var t=e.columnName;return!Object.keys(Object.fromEntries(l)).includes(t)}))})),i(Object.fromEntries(l))}),[l]),(0,y.jsxs)(d(),{children:[(0,y.jsx)(c.ButtonItem,{cssClass:"add-sorting-button",buttonOptions:{icon:Z.Add,text:(0,f.Z)("SORT_BY"),useSubmitBehavior:!1,onClick:function(){p((function(e){return[].concat((0,O.Z)(e),[[m[0].columnName,be.J9.DESCENDING]])}))}}}),l.map((function(e,n){return(0,y.jsx)(me,{item:e,tableInstance:t,setSortSettings:p,sortSettingsKeys:Object.keys(Object.fromEntries(l))},"".concat(e.columnName,"-").concat(n))}))]})},ve=n(44284),Be=n.n(ve),Ie=function(e){var t=e.tableInstance,n=e.defaultValue,i=void 0===n?[]:n,o=e.getSettingChanges,a=(0,u.useMemo)((function(){return t.getTableDataModel().getPrimaryKeys()}),[]),r=(0,u.useRef)(),l=(0,u.useRef)(),p=(0,u.useMemo)((function(){return t.metadata.getVisibleColumnsModelSortedByAlphabet(a)}),[]),h=(0,u.useState)((function(){return p.filter((function(e){var t=e.columnName;return(i||[]).includes(t)}))})),b=(0,s.Z)(h,2),m=b[0],g=b[1],v=(0,u.useState)((function(){return p.filter((function(e){return!m.find((function(t){return t.columnName===e.columnName}))}))})),B=(0,s.Z)(v,2),I=B[0],S=B[1],C=(0,u.useMemo)((function(){return I[I.length-1]}),[I]),x=(0,u.useState)([]),Z=(0,s.Z)(x,2),T=Z[0],E=Z[1],R=(0,u.useState)([]),D=(0,s.Z)(R,2),_=D[0],k=D[1];(0,u.useEffect)((function(){o(m.map((function(e){return e.columnName})))}),[m]);var w=(0,u.useCallback)((function(){var e,t;null===r||void 0===r||null===(e=r.current)||void 0===e||e.instance.unselectAll(),null===l||void 0===l||null===(t=l.current)||void 0===t||t.instance.unselectAll()}),[l,r]);return(0,y.jsxs)("div",{id:"hidden-column-wrapper",children:[(0,y.jsx)(d(),{children:(0,y.jsxs)(c.GroupItem,{colCount:2,cssClass:"hidden-column-filter-wrapper",children:[(0,y.jsxs)(c.GroupItem,{colSpan:1,colCount:2,alignItemLabels:!0,caption:(0,f.Z)("VISIBLE_COLUMNS"),children:[(0,y.jsx)(c.ButtonItem,{colSpan:1,buttonOptions:{icon:"chevronright",useSubmitBehavior:!1,stylingMode:"text",onClick:function(){g((function(e){return[].concat((0,O.Z)(_),(0,O.Z)(e))})),S((function(e){return(0,O.Z)(e.filter((function(e){return!_.find((function(t){return t.columnName===e.columnName}))})))})),k([]),E([]),w()}}}),(0,y.jsx)(c.ButtonItem,{colSpan:1,buttonOptions:{icon:"chevrondoubleright",useSubmitBehavior:!1,stylingMode:"text",onClick:function(){g(p.filter((function(e){return e.columnName!==C.columnName}))),S([C]),w()}}})]}),(0,y.jsxs)(c.GroupItem,{colSpan:1,colCount:2,alignItemLabels:!0,caption:(0,f.Z)("HIDDEN_COLUMNS"),cssClass:"hidden-column-control",children:[(0,y.jsx)(c.ButtonItem,{colSpan:1,buttonOptions:{icon:"chevronleft",useSubmitBehavior:!1,stylingMode:"text",onClick:function(){S((function(e){return[].concat((0,O.Z)(T),(0,O.Z)(e))})),g((function(e){return(0,O.Z)(e.filter((function(e){return!T.find((function(t){return t.columnName===e.columnName}))})))})),E([]),k([]),w()}}}),(0,y.jsx)(c.ButtonItem,{colSpan:1,buttonOptions:{icon:"chevrondoubleleft",useSubmitBehavior:!1,stylingMode:"text",onClick:function(){g([]),S([].concat((0,O.Z)(I),(0,O.Z)(m))),E([]),k([]),w()}}})]})]})}),(0,y.jsxs)("div",{className:"widget-container",children:[(0,y.jsx)(Be(),{height:"450px",width:"50%",dataSource:I,repaintChangesOnly:!0,selectionMode:"multiple",displayExpr:function(e){return e.getHeader()},ref:r,onSelectionChanged:function(e){k((function(t){var n=(0,s.Z)(e.addedItems,1)[0],i=(0,s.Z)(e.removedItems,1)[0];return n?[].concat((0,O.Z)(t),[n]):i?(0,O.Z)(t).filter((function(e){var t=e.columnName;return i.columnName!==t})):void 0}))},children:(0,y.jsx)(ve.ItemDragging,{allowReordering:!1,group:"columns",data:"visibleColumns",onAdd:function(e){S((function(t){return[].concat((0,O.Z)(t.slice(0,e.toIndex)),[m[e.fromIndex]],(0,O.Z)(t.slice(e.toIndex)))}))},onRemove:function(e){I.length>1&&S((function(t){return[].concat((0,O.Z)(t.slice(0,e.fromIndex)),(0,O.Z)(t.slice(e.fromIndex+1)))}))}})}),(0,y.jsx)(Be(),{height:"400px",width:"50%",dataSource:m,repaintChangesOnly:!0,displayExpr:function(e){return e.getHeader()},ref:l,selectionMode:"multiple",onSelectionChanged:function(e){E((function(t){var n=(0,s.Z)(e.addedItems,1)[0],i=(0,s.Z)(e.removedItems,1)[0];return n?[].concat((0,O.Z)(t),[n]):i?(0,O.Z)(t).filter((function(e){var t=e.columnName;return i.columnName!==t})):void 0}))},pageLoadMode:"scrollBottom",children:(0,y.jsx)(ve.ItemDragging,{allowReordering:!1,group:"columns",data:"hiddenColumns",onAdd:function(e){g((function(t){return[].concat((0,O.Z)(t.slice(0,e.toIndex)),[I[e.fromIndex]],(0,O.Z)(t.slice(e.toIndex)))}))},onRemove:function(e){g((function(t){return[].concat((0,O.Z)(t.slice(0,e.fromIndex)),(0,O.Z)(t.slice(e.fromIndex+1)))}))}})})]})]})},Se=function(e){var t=e.builderKey,n=e.tableInstance,i=e.defaultValue,o=e.getSettingChanges;switch(t){case ee.W.FILTER_BUILDER:return(0,y.jsx)(fe,{tableInstance:n,defaultValue:i,getSettingChanges:o});case ee.W.HIDDEN_COLUMNS_BUILDER:return(0,y.jsx)(Ie,{tableInstance:n,defaultValue:i,getSettingChanges:o});case ee.W.SORTING_BUILDER:return(0,y.jsx)(ge,{tableInstance:n,defaultValue:i,getSettingChanges:o});default:return null}},Ce=n(71603),xe=function(e){var t=e.props,n=e.closeModal,i=t.buttonName,r=t.saveSetting,p=t.setDataSource,h=t.builderKey,b=t.createNewSetting,m=t.getTheBiggestObjectId,g=t.tableInstance,v=t.isNameExists,B=t.getNextSettingName,I=(0,u.useRef)(),S=(0,u.useState)("Filter (".concat(B(),")")),C=(0,s.Z)(S,2),x=C[0],Z=C[1],T=(0,u.useState)(!1),E=(0,s.Z)(T,2),R=E[0],D=E[1],_=(0,u.useState)(null),k=(0,s.Z)(_,2),w=k[0],N=k[1],V=(0,u.useCallback)((function(e){return N(e)}),[]),A=(0,u.useCallback)((function(){return I&&I.current&&I.current.instance}),[I]),L=(0,u.useCallback)((function(){var e;return(e=g.toolbarPanelButtonManager).dispatchForToolbar.apply(e,arguments)}),[g,g.toolbarPanelButtonManager]);return(0,y.jsxs)("div",{children:[(0,y.jsxs)(d(),{ref:I,children:[(0,y.jsx)(c.SimpleItem,{editorType:M.Z.TextBox,label:{text:(0,f.Z)("FILTER_NAME")},editorOptions:{value:x,onValueChanged:X()((function(e){Z(e.value),I.current.instance.validate()}),500,{leading:!0})},children:(0,Ce.MV)(v)}),(0,y.jsx)(c.SimpleItem,{editorType:M.Z.CheckBox,label:{text:(0,f.Z)("PUBLIC")},editorOptions:{value:R,onValueChanged:function(e){D(e.value)}}})]}),(0,y.jsx)("div",{className:"builder-wrapper",children:(0,y.jsx)(Se,{builderKey:h,tableInstance:g,defaultValue:null,getSettingChanges:V})}),(0,y.jsx)(d(),{children:(0,y.jsx)(c.ButtonItem,{colSpan:1,buttonOptions:{type:"success",text:(0,f.Z)("SAVE"),stylingMode:"contained",useSubmitBehavior:!1,disabled:A()&&!A().validate().isValid||!w,onClick:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b(x,R,m(),w),e.next=3,r(t).then((function(e){p((function(t){return[e].concat((0,O.Z)(t))}))}));case 3:L({type:"UPDATE_ITEMS",payload:{items:[t].map((function(e){return(0,l.Z)({},e)})),buttonName:i}}),n();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}})})]})},Ze=n(99807),Te=function(e){var t=e.closeModal,n=e.props,i=n.builderKey,r=n.data,l=n.component,c=n.rowIndex,d=n.tableInstance,p=(0,u.useState)(),h=(0,s.Z)(p,2),b=h[0],m=h[1],g=(0,u.useMemo)((function(){return r.getSetting()}),[r]);(0,u.useEffect)((function(){m(r.getSetting())}),[r]);var v=(0,u.useCallback)((function(e){return m(e)}),[]);return(0,y.jsxs)("div",{children:[(0,y.jsx)(Se,{builderKey:i,tableInstance:d,defaultValue:g,getSettingChanges:v}),(0,y.jsx)("div",{className:"dx-field",children:(0,y.jsx)("div",{className:"dx-field-value",children:(0,y.jsx)(Ze.Button,{width:70,text:(0,f.Z)("SAVE"),type:"success",stylingMode:"contained",onClick:(0,a.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b,r.setSetting(n),l.cellValue(c,r,n),e.next=5,l.saveEditData();case 5:return e.next=7,l.refresh();case 7:t();case 8:case"end":return e.stop()}}),e)})))})})})]})},Ee=function(e){var t=e.templatesElements,n=e.defaultValue,i=e.getSelectedTemplate,o=(0,u.useState)(n),a=(0,s.Z)(o,2),r=a[0],l=a[1];return(0,y.jsx)("div",{className:"form",children:(0,y.jsx)("div",{className:"dx-fieldset",children:(0,y.jsx)("div",{className:"templates-container",children:t.map((function(e){var t=r&&e.ID===r.ID;return(0,y.jsx)("div",{className:"".concat(t?"selected ":"","template-image-wrapper"),onClick:function(){l(e),i(e)},children:(0,y.jsx)("img",{style:{width:"110px"},src:e.ImageSrc})},e.ID)}))})})})},Re=u.memo(Ee),ye=n(41882),De=n(19044),Oe=function(e){var t=e.selectBoxes,n=e.tablesList,i=e.selectedTables,o=e.setSelectedTables;return t.map((function(e){return(0,y.jsx)(ae.SelectBox,{dataSource:n,displayExpr:function(e){return e&&(0,f.Z)(e.name)},valueExpr:"table_name",label:e.label,searchEnabled:!0,searchMode:"contains",searchExpr:(0,f.Z)("name"),searchTimeout:200,value:i["table".concat(e.key)],onSelectionChanged:function(t){o((function(n){var i;return(0,l.Z)((0,l.Z)({},n),{},(0,r.Z)({},"table".concat(e.key),null===(i=t.selectedItem)||void 0===i?void 0:i.table_name))}))}},e.key)}))},_e=function(e){var t=e.closeModal,n=e.props.tableInstance,i=(0,u.useMemo)((function(){return n.getAllVisibleTables()}),[]),p=(0,De.default)(),h=p.setScreenBuilderConfig,b=p.destroyScreenBuilder,m=p.screenBuilder,g=m.screenBuilderTemplateID,v=m.screenBuilderTables,B=m.isScreenBuilderOn,I=(0,u.useMemo)((function(){return ye.K.find((function(e){return e.ID===g}))}),[]),S=(0,u.useState)(B?I:null),C=(0,s.Z)(S,2),x=C[0],Z=C[1],T=(0,u.useState)({}),E=(0,s.Z)(T,2),R=E[0],D=E[1],O=(0,u.useRef)();(0,u.useEffect)((function(){D((function(){return B?!x||x&&x.ID!==g?{}:v.reduce((function(e,t,n){return(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},"table".concat(n+1),t))}),{}):{}}))}),[x]);var _=(0,u.useMemo)((function(){return x?Array(x.numberOfTables).fill({}).map((function(e,t){return{label:"Table ".concat(t+1),key:t+1}})):[]}),[x]);return(0,y.jsx)("div",{id:"screen-builder-template",children:(0,y.jsxs)(d(),{ref:O,children:[(0,y.jsx)(c.SimpleItem,{render:function(){return(0,y.jsx)(Re,{templatesElements:ye.K,defaultValue:x,getSelectedTemplate:Z})}}),(0,y.jsx)(c.GroupItem,{children:(0,y.jsx)(Oe,{selectedTables:R,tablesList:i,selectBoxes:_,setSelectedTables:D})}),(0,y.jsxs)(c.GroupItem,{colCount:10,children:[(0,y.jsx)(c.EmptyItem,{colSpan:7}),(0,y.jsxs)(c.GroupItem,{colSpan:3,colCount:2,children:[(0,y.jsx)(c.ButtonItem,{verticalAlignment:"center",cssClass:"zeroPadding",buttonOptions:{text:(0,f.Z)("Destroy"),type:"normal",stylingMode:"contained",onClick:function(){b(),n.tableRelatedUserParameters.storeScreenBuilderSettings(null,null),t()},disabled:!g}}),(0,y.jsx)(c.ButtonItem,{verticalAlignment:"center",buttonOptions:{text:(0,f.Z)("BUILD"),type:"success",stylingMode:"contained",onClick:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=x.splitScreenConfig(Object.values(R)),b(),h(i,x.ID,Object.values(R)),n.tableRelatedUserParameters.storeScreenBuilderSettings(x.ID,Object.values(R)),t();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),disabled:!x||!(Object.keys(R).length===x.numberOfTables&&Object.values(R).every((function(e){return(0,w.$K)(e)})))}})]})]})]})})},ke=function(e){var t=e.closeModal,n=e.props,i=n.tableInstance,o=n.isChildOrParentTable,a=(0,u.useMemo)((function(){return i.getTables(o)}),[o]),r=(0,C.M)(i.warehouseUiType,o?x._.CHILD_RECORDS:x._.PARENT_RECORDS),l=(0,De.default)(),p=l.parentChildTable,h=l.destroyChildParentTable,b=l.setChildParentConfig,m=p.childParentTable,g=p.childParentTableTemplateID,v=(0,u.useState)(null),B=(0,s.Z)(v,2),I=B[0],S=B[1],T=(0,u.useMemo)((function(){return ye.o.find((function(e){return e.ID===g}))}),[]),E=(0,u.useState)(T),R=(0,s.Z)(E,2),D=R[0],O=R[1],_=(0,u.useState)(m),k=(0,s.Z)(_,2),w=k[0],N=k[1],V=(0,u.useRef)();return(0,y.jsx)("div",{id:"screen-builder-template",children:(0,y.jsxs)(d(),{ref:V,children:[(0,y.jsx)(c.SimpleItem,{dataField:"table",editorType:M.Z.SelectBox,editorOptions:{label:(0,f.Z)("TABLE"),items:a,searchEnabled:!0,searchExpr:"localizedChildTableName",searchMode:"contains",displayExpr:"localizedChildTableName",valueExpr:"childTableName",value:w,onSelectionChanged:function(e){var t,n;N(null===(t=e.selectedItem)||void 0===t?void 0:t.childTableName),S(null===(n=e.selectedItem)||void 0===n?void 0:n.joinedColumnGroups)}},children:(0,y.jsx)(c.RequiredRule,{})}),(0,y.jsx)(c.SimpleItem,{render:function(){return(0,y.jsx)(Re,{templatesElements:ye.o,defaultValue:T,getSelectedTemplate:O})}}),(0,y.jsxs)(c.GroupItem,{colCount:10,children:[(0,y.jsx)(c.GroupItem,{colSpan:1,children:(0,y.jsx)(c.ButtonItem,{cssClass:"help-button",buttonOptions:{icon:Z.HelpIcon,useSubmitBehavior:!1,onClick:function(){return window.open(r,"_blank")},stylingMode:"text"}})}),(0,y.jsx)(c.EmptyItem,{colSpan:6}),(0,y.jsxs)(c.GroupItem,{colSpan:3,colCount:2,children:[(0,y.jsx)(c.ButtonItem,{verticalAlignment:"center",cssClass:"zeroPadding",buttonOptions:{text:(0,f.Z)("Destroy"),type:"normal",stylingMode:"contained",useSubmitBehavior:!1,onClick:function(){h(),i.tableRelatedUserParameters.storeParentChildTableBuilderSettings(null,null),t()}}}),(0,y.jsx)(c.ButtonItem,{verticalAlignment:"center",buttonOptions:{text:(0,f.Z)("BUILD"),type:"success",stylingMode:"contained",useSubmitBehavior:!1,onClick:function(){V.current.instance.validate().isValid&&(h(),b(D.splitScreenConfig(w),w,D.ID,I),i.tableRelatedUserParameters.storeParentChildTableBuilderSettings(D.ID,[w],{joinedColumnGroups:I}),t())},disabled:!D}})]})]})]})})},we=n(63154),Me=function(){function e(t,n,i,o){(0,F.Z)(this,e),this.indexKey=t,this.fieldType=n,this.message=i,this.considerUnit=o,this.indexKey=t,this.fieldType=n,this.message=i,this.considerUnit=o}return(0,U.Z)(e,[{key:"getIndexKey",value:function(){return this.indexKey}},{key:"getMessageKey",value:function(){return this.message}},{key:"getFieldType",value:function(){return this.fieldType}},{key:"toNullOperation",value:function(){return this.getIndexKey()==we.Z.NULL}},{key:"toZeroOperation",value:function(){return this.getIndexKey()==we.Z.REPLACE_TO_ZERO}},{key:"toNullOrZeroOperation",value:function(){return this.getIndexKey()==we.Z.NULL||this.getIndexKey()==we.Z.REPLACE_TO_ZERO}},{key:"isDevideBy",value:function(){return this.getIndexKey()==we.Z.DIVIDE_BY}},{key:"isConsiderUnit",value:function(){return this.considerUnit}}],[{key:"create",value:function(t){return new e(t.indexKey,t.fieldType,t.message,t.considerUnit)}}]),e}(),Ne=function(e){var t=e.selectColumn,n=e.setLoading,i=e.tableInstance,r=(0,u.useState)([]),l=(0,s.Z)(r,2),c=l[0],d=l[1],p=(0,u.useMemo)((function(){return i.getTableName()}),[]);return(0,u.useEffect)((function(){Promise.all([I.Z.getUpdatableColumnModels(p),I.Z.getMassUpdateOperations(p)]).then(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,l,u,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,s.Z)(t,2),l=r[0],u=r[1],c=T.QH.createColumnModels(l,i.getMetadata),Promise.all(c.map(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var n,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,ie.Z)(t,T.QH),a=u[n.getName()].map(Me.create),s=a.filter((function(e){return(!e.toZeroOperation()||n.getViewModel().isZeroAsAny)&&(!e.toNullOperation()||n.getColumnTypeObject().isNullable)})),n.setMassiveUpdateOperations(s),n.setIsMassiveUpdateField(!0),n.setTableDataModel(i.getTableDataModel()),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){d(e),n(!0)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),(0,y.jsx)("div",{className:"dx-field-label",children:(0,y.jsx)(se(),{deferRendering:!1,items:c,displayExpr:function(e){return null===e||void 0===e?void 0:e.getCaption()},valueExpr:function(e){return e},onValueChange:function(e){return t(e)}})})},Ve=n(72333),Ae=function(e){var t=e.executeMassiveUpdate,n=e.tableInstance,i=e.dbeDxGridInstance,c=e.closeModal,d=(0,u.useState)(null),p=(0,s.Z)(d,2),h=p[0],f=p[1],b=(0,u.useState)([Ve.Z.ENTIRE_TABLE]),m=(0,s.Z)(b,2),g=m[0],v=m[1],B=(0,u.useState)(null),S=(0,s.Z)(B,2),C=S[0],x=S[1],Z=(0,u.useState)({}),T=(0,s.Z)(Z,2),E=T[0],R=T[1],y=(0,u.useState)(null===h||void 0===h?void 0:h.getDefaultValue()),D=(0,s.Z)(y,2),_=D[0],k=D[1],M=(0,u.useMemo)((function(){return n.getTableName()}),[]);(0,u.useEffect)((function(){h&&x(h.getMassiveUpdateOperations()[0]),h&&k(null===h||void 0===h?void 0:h.getDefaultValue())}),[h]),(0,u.useEffect)((function(){(0,a.Z)((0,o.Z)().mark((function e(){var t,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getSelectedRowKeys();case 2:return t=e.sent,a=n.getTableDataModel().getAllAppliedFilters(),s=t.length>0,e.next=7,I.Z.getMassiveDataUpdateRanges(s,a,M).then((function(e){v(e)}));case 7:case"end":return e.stop()}}),e)})))()}),[]);var N=(0,u.useCallback)((function(e){var t,n=e.event,i=null===(t=(Object.hasOwn(n,"originalEvent")?null===n||void 0===n?void 0:n.originalEvent:n).target)||void 0===t?void 0:t.value;i!==_&&k(i)}),[_]),V=(0,u.useCallback)((function(e,n){(0,A.iG)((0,Ve.t)(n),"W2MO").then((function(e){if(e){var i=document.forms.namedItem("massiveUpdateForm"),o=new FormData(i),a=(0,O.Z)(o.entries()).reduce((function(e,t){var n=(0,s.Z)(t,2),i=n[0],o=n[1];return(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},i,(0,w.gx)(o)))}),E),u=C.toNullOrZeroOperation()?[{columnName:h.getName(),value:C.toNullOperation()?null:C.toZeroOperation()?0:""}]:Object.entries(a).map((function(e){var t=(0,s.Z)(e,2);return{columnName:t[0],value:t[1]}}));t(C.getIndexKey(),u,n,c)}}))}),[h,C,E]),L=(0,u.useCallback)((function(e,t,n){R((0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},t,n)))}),[]),P=(0,u.useMemo)((function(){return h}),[h]),j=(0,u.useMemo)((function(){var e=parseInt(_,10);return null!==C&&void 0!==C&&C.isDevideBy()?!isNaN(e)&&0!==e:!(null===C||void 0===C||!C.toNullOrZeroOperation())||""!==_}),[_,C,P]),F=(0,u.useMemo)((function(){return!(!n.getTableDataModel().getUniqColumns().length&&i.getSelectedRowKeys().length)}),[]),U=(0,u.useMemo)((function(){return!h||!C||!F||!j}),[h,C,F,j]);return{selectColumn:f,selectedColumn:h,dbeColumn:P,foreignKeyParams:E,radioButtonsValue:C,setParameters:L,onInputChange:N,setRadioButtonsValue:x,isMassiveUpdatePossible:F,massUpdateRange:g,handleSubmit:V,isDisabledApplyButton:U}},Le=function(e){var t=e.props,n=e.closeModal,i=e.setLoading,o=t.dbeDxGridInstance,a=t.executeMassiveUpdate,s=t.tableInstance,r=(0,u.useRef)(null),p=(0,C.M)(s.warehouseUiType,x._.MASSIVE_UPDATE),b=Ae({executeMassiveUpdate:a,tableInstance:s,dbeDxGridInstance:o,closeModal:n}),m=b.selectColumn,g=b.selectedColumn,v=b.dbeColumn,B=b.foreignKeyParams,I=b.radioButtonsValue,S=b.setParameters,T=b.onInputChange,E=b.setRadioButtonsValue,R=b.isMassiveUpdatePossible,D=b.massUpdateRange,O=b.handleSubmit,_=b.isDisabledApplyButton,k=(0,u.useCallback)((function(){var e;return!(null===r||void 0===r||null===(e=r.current)||void 0===e||!e.instance)&&r.current.instance.validate().isValid}),[r]);return(0,y.jsx)("div",{id:"massive-update-modal",children:(0,y.jsx)("form",{action:"src/Components/modals/index",id:"massiveUpdateForm",children:(0,y.jsxs)("div",{className:"dx-fieldset",children:[(0,y.jsxs)("div",{className:"dx-field",children:[(0,y.jsx)(Ne,{selectColumn:m,setLoading:i,tableInstance:s}),(0,y.jsx)("div",{className:"dx-field-value",children:g&&(0,y.jsxs)(u.Fragment,{children:[(0,y.jsx)(d(),{colCount:1,labelMode:"hidden",ref:r,children:(0,y.jsx)(c.SimpleItem,{dataField:v.getName(),name:v.getName(),component:v.getFormCellRender(B,null===I||void 0===I?void 0:I.toNullOrZeroOperation(),I),editorOptions:(0,l.Z)((0,l.Z)({},v.getColumnEditorOptions()),{},{name:v.getName(),dataField:v.getName(),setParameters:S,width:"auto",disabled:null===I||void 0===I?void 0:I.toNullOrZeroOperation(),onValueChanged:T,onChange:T}),editorType:v.getViewModel().getInputType(),children:v.getChildren()},v.getName())}),(0,y.jsx)(h(),{items:g.getMassiveUpdateOperations(),defaultValue:g.getMassiveUpdateOperations()[0],onValueChanged:function(e){var t=e.value;return E(t)},valueExpr:function(e){return e},displayExpr:function(e){return(0,f.Z)(e.message)}})]})})]}),!R&&(0,y.jsx)("div",{className:"dx-field",style:{display:"flex",alignItems:"flex-end",color:"#d9534f"},children:(0,f.Z)("MASSIVE_UPDATE_FOR_SELECTED_ROWS_IS_NOT_POSSIBLE")}),(0,y.jsxs)("div",{className:"dx-field",children:[(0,y.jsx)(Ze.Button,{type:"normal",stylingMode:"text",onClick:function(){window.open(p,"_blank")},icon:Z.HelpIcon}),(0,y.jsx)("div",{className:"dx-field-value",children:D.map((function(e){return(0,y.jsx)(Ze.Button,{text:(0,w._I)(e),type:"success",onClick:function(t){return O(t,e)},useSubmitBehavior:!1,stylingMode:"contained",disabled:_||!k()},e)}))})]})]})})})},Pe=n(51793),je=function(e){var t=e.props,n=e.closeModal,i=t.tableInstance,o=t.handleSubmitEvent,a=(0,u.useState)((function(){return i.getTableDataModel().getRowDefaultValues()})),p=(0,s.Z)(a,2),h=p[0],b=p[1],m=(0,u.useRef)(),g=(0,u.useCallback)((function(){return m&&m.current&&m.current.instance}),[m]),v=(0,u.useCallback)((function(e){if(e.preventDefault(),g().validate().isValid){var t=document.forms.namedItem("addNewRowForm"),i=new FormData(t),a=(0,O.Z)(i.entries()).reduce((function(e,t){var n=(0,s.Z)(t,2),i=n[0],o=n[1];return(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},i,(0,w.H2)(o)))}),{ID_user_change:window.USER_ID});o(a,n)}}),[o]);return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)("form",{onSubmit:v,id:"addNewRowForm",action:"",children:[(0,y.jsx)(Pe.pf,{id:"scrollview",height:"75vh",children:(0,y.jsx)(d(),{formData:h,readOnly:!1,showColonAfterLabel:!0,labelLocation:"left",scrollingEnabled:!0,ref:m,style:{maxHeight:700},children:(0,y.jsx)(c.GroupItem,{colCount:2,children:i.getTableDataModel().getColumnsForAddingCloning().map((function(e){var t=(0,l.Z)((0,l.Z)({},e.getColumnEditorOptions()),{},{disabled:!e.getIsEditable(),setParameters:function(t,n,i){b((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},e.getName(),i))}))}});return(0,y.jsx)(c.SimpleItem,{dataField:e.getName(),name:e.getName(),component:e.getFormCellRender(h),label:{text:e.getCaption()},editorOptions:t,editorType:e.getViewModel().getInputType(),children:e.getChildren()},e.getName())}))})})}),(0,y.jsx)("div",{className:"dx-field",children:(0,y.jsx)("div",{className:"dx-field-value",children:(0,y.jsx)(Ze.Button,{width:70,type:"success",text:(0,f.Z)("ADD_ROW"),stylingMode:"contained",useSubmitBehavior:!0})})})]})})},Fe=n(45217),Ue=n(55841),Ge=n(6977),He=function(e){var t=e.props,n=e.closeModal,i=e.setLoading,o=t.selectedRows,a=t.tableInstance,c=(0,u.useRef)(null),d=(0,u.useRef)(null),p=(0,u.useState)([]),h=(0,s.Z)(p,2),f=h[0],b=h[1];return(0,u.useEffect)((function(){var e=o.map((function(e){return Object.entries(e).reduce((function(e,t){var n=(0,s.Z)(t,2),i=n[0],o=n[1],u=a.getTableDataModel().getColumnModelByName(i);return u?u.getViewModel().isHideOnCLone?e:u.getViewModel().isClearOnClone?(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},i,u.getViewModel().getDefaultValue())):(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},i,o)):e}),{})}));b(e),i(!0)}),[o]),(0,y.jsxs)(u.Fragment,{children:[(0,y.jsx)(Fe.Z,{tableType:Ue.Z.CLONE_ROW_IN_ORIGINAL_TABLE,tableInstance:a,dbeDxGridRef:c,toolbarRef:d,closeModal:n,saveButtonVisibility:!1}),(0,y.jsxs)(K(),{ref:c,dataSource:f,allowColumnReordering:!1,allowColumnResizing:!1,cellHintEnabled:!0,showColumnHeaders:!0,remoteOperations:!0,cacheEnabled:!1,rowAlternationEnabled:!0,showRowLines:!0,showBorders:!0,children:[(0,y.jsx)(H.Editing,{mode:"cell",allowUpdating:!0,refreshMode:"repaint",startEditAction:"dblClick"}),(0,y.jsx)(H.Selection,{mode:"multiple",showCheckBoxesMode:"none"}),a.getTableDataModel().columns.map((function(e){return e.getViewModel().isHideOnCLone?null:(0,y.jsx)(H.Column,(0,l.Z)((0,l.Z)({},e.getColumnParameters()),{},{children:e.getChildren()}))})),(0,y.jsx)(H.MasterDetail,{enabled:!0,component:function(e){var t=e.data;return(0,y.jsx)(Ge.default,(0,l.Z)((0,l.Z)({},t),{},{dbeDxGridRef:c,tableInstance:a,id:"detail-row-view"}))}})]},"cloneTable-dataGrid")]})},Ke=n(48186),We=n(41189),ze=n(73026),Ye=[{id:0,text:(0,f.Z)("SHOW_COMMON_RECORDS"),key:"showCommonRecords"},{id:1,text:(0,f.Z)("SHOW_CHANGED_ON_DATE"),key:"showChangedColumn"}],$e=["ID_user_change","changed"],Xe=function(e){var t=e.props,n=t.tableInstance,i=t.handleCompareTable,o=t.dbeDxGridInstance,a=e.closeModal,r=(0,u.useRef)(),l=(0,ze.default)().setCompareTableData,p=(0,u.useState)([]),b=(0,s.Z)(p,2),m=b[0],g=b[1],v=(0,u.useMemo)((function(){return n.getTableDataModel().getPrimaryKeys()}),[]),B=(0,u.useMemo)((function(){return We.Z.getCompareTableDto()}),[]),S=(0,u.useState)(),T=(0,s.Z)(S,2),E=T[0],R=T[1],D=(0,u.useState)([]),O=(0,s.Z)(D,2),_=O[0],w=O[1];(0,u.useEffect)((function(){n.tableDataModel.getCompareTableManager().then((function(e){var t=e.getVisibleCompareTableButtons();R(t[0]),w(t)}))}),[]);var N=(0,u.useMemo)((function(){return n.getTableDataModel().getMetadata().getVisibleColumnsModel().filter((function(e){var t=e.columnName;return!$e.includes(t)}))}),[]);(0,u.useEffect)((function(){B.setComparableColumnsModels(v),I.Z.getAllCampaigns().then((function(e){return g(e)}))}),[]);var A=(0,k.mN)(n),L=(0,s.Z)(A,1)[0],P=(0,k.D1)(n),j=(0,s.Z)(P,1)[0],F=(0,u.useMemo)((function(){return x._[null===E||void 0===E?void 0:E.name]}),[E]),U=(0,C.M)(n.warehouseUiType,F);return(0,y.jsx)("div",{className:"compare-table-modal form-container",children:(0,y.jsxs)(d(),{colCount:2,ref:r,children:[(0,y.jsx)(c.GroupItem,{caption:(0,f.Z)("SELECT_COMPARE_TYPE"),children:(0,y.jsx)(h(),{items:_,defaultValue:E,displayExpr:"localizedName",onValueChange:function(e){R(e),B.setCompareTablesType(e.getName(),v)}})}),(0,y.jsx)(c.GroupItem,{caption:null===E||void 0===E?void 0:E.getCaption(),children:null===E||void 0===E?void 0:E.getComponent(n,m)}),(0,y.jsxs)(c.GroupItem,{caption:(0,f.Z)("FILTER_SETTINGS"),children:[(0,y.jsx)(c.SimpleItem,{label:{text:(0,f.Z)("SELECT_FILTER")},editorType:M.Z.SelectBox,editorOptions:{dataSource:L,grouped:!0,displayExpr:"settingName",value:V.Mm,onValueChanged:function(e){var t=e.value,n=t.settingId!==V.Mm?t.setting:null;B.setCustomFilter(n)}}}),(0,y.jsx)(c.SimpleItem,{label:{text:(0,f.Z)("HIDDEN_COLUMNS")},editorType:M.Z.SelectBox,editorOptions:{dataSource:j,grouped:!0,displayExpr:"settingName",value:V.Mm,onValueChanged:function(e){var t=e.value,n=t.settingId!==V.Mm?t.setting:null;B.setHiddenColumns(n)}}})]}),(0,y.jsx)(c.GroupItem,{caption:(0,f.Z)("RESULT_SETTINGS"),children:Ye.map((function(e){var t=e.text,n=e.id,i=e.key;return(0,y.jsx)(c.SimpleItem,{dataField:i,label:{text:t},editorType:M.Z.CheckBox,editorOptions:{value:B[i],onValueChanged:function(e){return B.setValueByKey(i,e.value)}}},"".concat(t,"-").concat(n))}))}),(null===E||void 0===E?void 0:E.name)===Ke.Z.COMPARE_DATA_FROM_OTHER_LAYOUT&&(0,y.jsx)(c.GroupItem,{colSpan:2,colCount:4,itemType:"group",caption:(0,f.Z)("COMPARE_COLUMN_SETTINGS"),children:N.map((function(e,t){return(0,y.jsx)(c.SimpleItem,{editorType:M.Z.CheckBox,editorOptions:{text:e.getCaption(),value:v.includes(e.columnName),onValueChanged:function(){return B.addComparableColumnsModels(e.columnName)}}},"".concat(e.columnName,"-").concat(t))}))}),(0,y.jsxs)(c.GroupItem,{colSpan:2,colCount:2,children:[(0,y.jsx)(c.ButtonItem,{cssClass:"help-button",buttonOptions:{icon:Z.HelpIcon,useSubmitBehavior:!1,onClick:function(){return window.open(U,"_blank")},stylingMode:"text"}}),(0,y.jsx)(c.ButtonItem,{buttonOptions:{type:"success",text:(0,f.Z)("COMPARE"),useSubmitBehavior:!1,onClick:function(){var e;B.validate(v)&&null!==r&&void 0!==r&&null!==(e=r.current)&&void 0!==e&&e.instance.validate().isValid&&(i(B,l,n.getTableName()),a(),o.beginCustomLoading((0,f.Z)("_COMPARE_LOADING_TEXT")))}}})]})]})})},qe=function(e){var t=e.props,n=e.closeModal,i=e.setLoading,o=t.selectedRows,a=t.tableInstance,c=t.handleMergeRows,d=(0,u.useRef)(null),p=(0,u.useState)([]),h=(0,s.Z)(p,2),b=h[0],m=h[1],g=(0,u.useState)({}),v=(0,s.Z)(g,2),B=v[0],I=v[1],S=(0,u.useMemo)((function(){return{}}),[]);(0,u.useEffect)((function(){m(o),I(o[0]),i(!0)}),[o]);var C=(0,u.useCallback)((function(e){if("data"===e.rowType){var t=e.column.dataField,n=e.data,i=e.rowIndex;S[t]=i,I((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},t,n[t]))}))}}),[]),x=(0,u.useMemo)((function(){return a?a.getTableDataModel().getPrimaryKeys():[]}),[a]);return(0,y.jsxs)(u.Fragment,{children:[(0,y.jsx)(K(),{ref:d,dataSource:b,keyExpr:x,allowColumnReordering:!1,allowColumnResizing:!1,cellHintEnabled:!0,showColumnHeaders:!0,remoteOperations:!0,cacheEnabled:!1,rowAlternationEnabled:!0,showRowLines:!0,showBorders:!0,onCellClick:C,onCellPrepared:function(e){var t=e.column.dataField,n=e.cellElement,i=e.rowType,o=e.rowIndex;"data"===i&&(S[t]===o||void 0===S[t]&&0===o)&&(n.style.backgroundColor="#E6F5D6")},children:a.getTableDataModel().columns.map((function(e){return e.getViewModel().isHideOnCLone?null:(0,y.jsx)(H.Column,(0,l.Z)((0,l.Z)({},e.getColumnParameters()),{},{children:e.getChildren()}))}))},"mergeRows-dataGrid"),(0,y.jsx)("div",{className:"dx-field",children:(0,y.jsx)("div",{className:"dx-field-value",children:(0,y.jsx)(Ze.Button,{text:(0,f.Z)("MERGE_ROWS"),type:"success",onClick:function(){return c(b,B,n)},useSubmitBehavior:!1,stylingMode:"contained"})})})]})},Je=function(e){var t=e.props,n=e.closeModal,i=e.setLoading,o=t.tableInstance,a=t.executeRecalculateReportData,p=(0,u.useState)([]),h=(0,s.Z)(p,2),b=h[0],m=h[1],g=(0,u.useState)({}),v=(0,s.Z)(g,2),B=v[0],I=v[1],S=(0,u.useRef)(),C=(0,k.hZ)(o,o.table.getSpLink()),x=(0,s.Z)(C,1)[0],E=(0,u.useCallback)((function(){return Object.values(B).some((function(e){var t=e.value;return e.isRequired&&!t}))}),[B]),R=(0,u.useCallback)((function(e){if(e.preventDefault(),S.current.instance.validate().isValid&&!E()){var t=new FormData(e.target),i=(0,O.Z)(t.entries()).reduce((function(e,t){var n=(0,s.Z)(t,2),i=n[0],o=n[1];return(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},i,o))}),{}),o=[];[].concat((0,O.Z)(Object.entries((0,l.Z)({},i))),(0,O.Z)(Object.entries(B).map((function(e){var t=(0,s.Z)(e,2),n=t[0],i=t[1];return[n,null===i||void 0===i?void 0:i.value]})))).forEach((function(e){var t=(0,s.Z)(e,2),n=t[0],i=t[1],a=b.findIndex((function(e){return e.getName()===n}));o[a]=i})),a(o),n()}}),[B,b]),D=(0,u.useCallback)((function(e,t){var n=e[t.foreignKeyInfo.joinedKeyColumnNames[t.parameterName]];I((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},t.parameterName,{value:n,isRequired:t.getIsRequired()}))}))}),[B]);return(0,u.useEffect)((function(){var e=o.getReportInputParameters().map((function(e){return(0,ie.Z)(e,T.Iv)}));m(e),e.forEach((function(e){e.getCellType()===be.lT.FOREIGN_KEY_CELL&&I((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,r.Z)({},e.getName(),{value:e.getDefaultValue(),isRequired:e.getIsRequired()}))}))})),i(!0)}),[]),(0,y.jsx)(u.Fragment,{children:(0,y.jsx)("form",{onSubmit:R,id:"recalculateReportDataForm",children:(0,y.jsxs)(d(),{ref:S,children:[b.map((function(e){return e.setTableDataModel(o.getTableDataModel()),(0,y.jsx)(c.SimpleItem,(0,l.Z)((0,l.Z)({},e.getInputParameters()),{},{component:e.getFormCellRender(),editorOptions:(0,l.Z)({setParameters:function(t){return D(t,e)}},e.getEditorOptionsForInputParameters()),editorType:e.getViewModel().getInputType(),children:e.getChildren()}))})),(0,y.jsxs)(c.GroupItem,{colCount:2,children:[x&&(0,y.jsx)(c.ButtonItem,{cssClass:"help-button",buttonOptions:{icon:Z.HelpIcon,useSubmitBehavior:!1,onClick:function(){return window.open(x,"_blank")},stylingMode:"text"}}),(0,y.jsx)(c.ButtonItem,{buttonOptions:{text:(0,f.Z)("_EXECUTE_BUTTON"),useSubmitBehavior:!0,type:"success"}})]})]})})})},Qe=function(e){var t=e.props,n=t.tableInstance,i=t.setting,o=t.dataGrid,a=t.type,r=e.closeModal,l=(0,u.useRef)(),p=(0,k.wS)(a)(n,o),h=p.addSetting,b=p.setSelectedSetting,m=p.createNewSetting,g=p.getTheBiggestObjectId,v=p.isNameExists,B=p.getNextSettingName,I=p.updateToolbarButton,S=p.applySettingToDataGrid,C=(0,u.useState)("Filter (".concat(B(),")")),x=(0,s.Z)(C,2),Z=x[0],T=x[1],E=(0,u.useCallback)((function(){var e;return(e=n.toolbarPanelButtonManager).dispatchForToolbar.apply(e,arguments)}),[n,n.toolbarPanelButtonManager]),R=(0,u.useCallback)((function(){return l&&l.current&&l.current.instance}),[l]),D=(0,u.useCallback)((function(){var e=m(Z,!1,g(),i);h(e),b(e),I(E,e),S(e)}),[Z,i,o]);return(0,y.jsx)("div",{children:(0,y.jsxs)(d(),{ref:l,children:[(0,y.jsx)(c.SimpleItem,{editorType:M.Z.TextBox,editorOptions:{value:Z,onValueChanged:X()((function(e){var t=e.value;T(t)}),500,{leading:!0})},children:(0,Ce.MV)(v)}),(0,y.jsx)(c.ButtonItem,{verticalAlignment:"center",colSpan:1,buttonOptions:{type:"success",text:(0,f.Z)("SAVE"),useSubmitBehavior:!1,onClick:function(){R()&&R().validate().isValid&&(D(),r(),o.clearSelection())}}})]})})},et=(i={},(0,r.Z)(i,ee.Z.TABLE_ACTION_MODAL,re),(0,r.Z)(i,ee.Z.SETTINGS_MODAL,L),(0,r.Z)(i,ee.Z.EXPORT_MODAL,D),(0,r.Z)(i,ee.Z.IMPORT_MODAL,Q),(0,r.Z)(i,ee.Z.LINK_WITH_FILTER,ne),(0,r.Z)(i,ee.Z.MASSIVE_UPDATE_MODAL,Le),(0,r.Z)(i,ee.Z.USER_PARAMS_SETTINGS_MODAL,te),(0,r.Z)(i,ee.Z.ADD_NEW_SETTINGS_MODAL,xe),(0,r.Z)(i,ee.Z.EDIT_SETTING_MODAL,Te),(0,r.Z)(i,ee.Z.SCREEN_BUILDER_CONFIG,_e),(0,r.Z)(i,ee.Z.CHILD_PARENT_TABLE_MODAL,ke),(0,r.Z)(i,ee.Z.ADD_NEW_ROW_MODAL,je),(0,r.Z)(i,ee.Z.CLONE_SELECTED_ROWS_MODAL,He),(0,r.Z)(i,ee.Z.COMPARE_TABLES_PARAMETERS_MODAL,Xe),(0,r.Z)(i,ee.Z.MERGE_ROWS_MODAL,qe),(0,r.Z)(i,ee.Z.RECALCULATE_REPORT_DATA,Je),(0,r.Z)(i,ee.Z.SELECTION_FOR_FILTER_MODAL,Qe),i),tt=n(61229),nt=function(e){var t=e.ModalContent,n=e.modalName,i=e.visibility,o=e.props,a=e.closeModal,r=(0,u.useState)(!1),l=(0,s.Z)(r,2),c=l[0],d=l[1],p=(0,u.useCallback)((function(){a(n),d(!1)}),[n]);return(0,y.jsx)(tt.Popup,{visible:i,onHiding:p,animation:{show:null},dragEnabled:!0,hideOnOutsideClick:!!(0,w.$K)(o.hideOnOutsideClick)||o.hideOnOutsideClick,showCloseButton:!0,showTitle:!0,title:o.modalTitle||n,width:o.width||550,height:o.height||"auto",deferRendering:!0,minHeight:100,wrapperAttr:{class:"modal-container"},children:i?(0,y.jsx)(t,{tableType:o.tableType,openModal:o.openModal,closeModal:p,props:o,setLoading:d,isLoading:c}):(0,y.jsx)("div",{children:"Loading..."})},n)},it=u.memo(nt,(function(e,t){return e.visibility===t.visibility})),ot=u.createContext(null);function at(e,t){switch(t.type){case"OPEN_MODAL_WITH_PROPS":return(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},t.modalName,(0,l.Z)((0,l.Z)({},e[t.modalName]),{},{visibility:!0,props:t.props})));case"CLOSE_MODAL":return(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},t.modalName,{visibility:!1,props:{}}));default:return e}}var st=function(e){var t=e.children,n=(0,u.useReducer)(at,{},(function(){return Object.keys(et).reduce((function(e,t){return(0,l.Z)((0,l.Z)({},e),{},(0,r.Z)({},t,{visibility:!1,props:{}}))}),{})})),i=(0,s.Z)(n,2),c=i[0],d=i[1],p=(0,u.useCallback)((function(e){d({type:"CLOSE_MODAL",modalName:e})}),[c,d]),h=(0,u.useCallback)(function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d({type:"OPEN_MODAL_WITH_PROPS",modalName:t,props:n}),e.abrupt("return",(0,a.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[c,d,p]);return(0,y.jsx)(ot.Provider,{value:{openModalWithProps:h,closeModal:p},children:(0,y.jsxs)(y.Fragment,{children:[t,(0,y.jsx)("div",{id:"modals-root",children:Object.entries(et).map((function(e){var t=(0,s.Z)(e,2),n=t[0],i=t[1],o=c[n];return(0,y.jsx)(it,{ModalContent:i,modalName:n,visibility:o.visibility,props:o.props,closeModal:p},n)}))})]})})},rt=function(){return(0,u.useContext)(ot)}},42980:function(e,t,n){var i;n.d(t,{_:function(){return i}}),function(e){e.EXPORT="export",e.IMPORT="import",e.CHILD_RECORDS="show-child-records",e.PARENT_RECORDS="show-parent-records",e.MASSIVE_UPDATE="massive_update",e.SETTINGS="settings",e.COMPARE_DATA_FROM_OTHER_LAYOUT="compare-data-from-other-layout",e.COMPARE_DATA_WITHIN_THIS_LAYOUT="compare-data-within-this-layout",e.COMPARE_DATA_BY_CAMPAIGN="compare-data-by-campaign",e.HIDDEN_COLUMN_FILTER="hidden-columns-filter",e.TABLE_SORTING="table-sorting",e.FILTERS="filters",e.LINK_WITH_FILTER="get-link-filtered-by-selected-rows"}(i||(i={}))},63154:function(e,t,n){n.d(t,{x:function(){return r}});var i,o,a=n(4942),s=n(97741);!function(e){e.REPLACE="replaceWith",e.REPLACE_TO_ZERO="replaceToZero",e.ADD="add",e.SUBTRACT_BY="subtractBy",e.SUBTRACTED_BY="subtractedBy",e.MULTIPLY="multiply",e.DIVIDE_BY="divideBy",e.DIVIDED_BY="dividedBy",e.PREFIX_BY="prefixBy",e.SUFFIX_BY="suffixBy",e.NULL="null"}(o||(o={}));var r=(i={},(0,a.Z)(i,o.REPLACE,(function(e,t){return t})),(0,a.Z)(i,o.REPLACE_TO_ZERO,(function(){return 0})),(0,a.Z)(i,o.ADD,(function(e,t){return parseInt((0,s.$K)(e)?e:0,10)+parseInt((0,s.$K)(t)?t:0,10)})),(0,a.Z)(i,o.SUBTRACT_BY,(function(e,t){return parseInt((0,s.$K)(e)?e:0,10)-parseInt((0,s.$K)(t)?t:0,10)})),(0,a.Z)(i,o.SUBTRACTED_BY,(function(e,t){return parseInt((0,s.$K)(t)?t:0,10)+parseInt((0,s.$K)(e)?e:0,10)})),(0,a.Z)(i,o.MULTIPLY,(function(e,t){return parseInt((0,s.$K)(e)?e:0,10)*parseInt((0,s.$K)(t)?t:0,10)})),(0,a.Z)(i,o.DIVIDE_BY,(function(e,t){return parseInt((0,s.$K)(e)?e:0,10)/parseInt((0,s.$K)(t)?t:0,10)})),(0,a.Z)(i,o.DIVIDED_BY,(function(e,t){return parseInt((0,s.$K)(t)?t:0,10)-parseInt((0,s.$K)(e)?e:0,10)})),(0,a.Z)(i,o.PREFIX_BY,(function(e,t){return((0,s.$K)(t)?t:"").toString()+((0,s.$K)(e)?e:"").toString()})),(0,a.Z)(i,o.SUFFIX_BY,(function(e,t){return((0,s.$K)(e)?e:"").toString()+((0,s.$K)(t)?t:"").toString()})),(0,a.Z)(i,o.NULL,(function(){return null})),i);t.Z=o},57463:function(){}}]);
//# sourceMappingURL=310.6682699c.chunk.js.map